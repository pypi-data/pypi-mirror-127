"use strict";(self.webpackChunk_tiledb_inc_pybabylonjs=self.webpackChunk_tiledb_inc_pybabylonjs||[]).push([[568],{1568:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=n(8233),s=n(5592),r=n(8657);const a={id:"@tiledb-inc/pybabylonjs:plugin",requires:[i.IJupyterWidgetRegistry],autoStart:!0,activate:function(e,t){t.registerWidget({name:r.o,version:r.Y,exports:s})}}},8657:(e,t,n)=>{n.d(t,{Y:()=>s,o:()=>r});const i=n(4147),s=i.version,r=i.name},5592:(e,t,n)=>{n.r(t),n.d(t,{BabylonJSModel:()=>w,BabylonJSView:()=>x});var i=n(8233),s=n(8657),r=n(4687),a=n(3379),o=n.n(a),l=n(7795),c=n.n(l),d=n(569),u=n.n(d),p=n(3565),b=n.n(p),h=n(9216),m=n.n(h),v=n(4589),y=n.n(v),f=n(3889),g={};g.styleTagTransform=y(),g.setAttributes=b(),g.insert=u().bind(null,"head"),g.domAPI=c(),g.insertStyleElement=m(),o()(f.Z,g),f.Z&&f.Z.locals&&f.Z.locals;class w extends i.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:w.model_name,_model_module:w.model_module,_model_module_version:w.model_module_version,_view_name:w.view_name,_view_module:w.view_module,_view_module_version:w.view_module_version,extents:[],query:null,value:null,token:"",uri:"",width:700,height:500,wheel_precision:50,z_scale:.5})}}w.serializers=Object.assign({},i.DOMWidgetModel.serializers),w.model_name="BabylonJSModel",w.model_module=s.o,w.model_module_version=s.Y,w.view_name="BabylonJSView",w.view_module=s.o,w.view_module_version=s.Y;class x extends i.DOMWidgetView{render(){document.createElement("div").id="loadingScreen",this.canvas=document.createElement("canvas"),this.canvas.classList.add("renderCanvas"),this.el.appendChild(this.canvas),this.model.on("change:query",this.query_changed,this),this.model.on_some_change(["width","height"],this.resizeCanvas,this),this.engine=new r.Engine(this.canvas,!0),r.SceneLoader.ShowLoadingScreen=!0,this.resizeCanvas();const e=this.createScene();this.engine.runRenderLoop((()=>{e.render()}))}createScene(){const e=new r.Scene(this.engine);new r.PointLight("Point",new r.Vector3(5,10,5),e);const t=new r.ArcRotateCamera("Camera",1,.8,3,new r.Vector3(0,0,0),e);t.attachControl(this.canvas,!0);const n=JSON.parse(this.model.get("value")),i=this.model.get("extents"),s=this.model.get("z_scale"),a=this.model.get("wheel_precision"),o=n.X.length,l=i[0],c=i[1],d=i[2],u=i[3],p=i[4],b=i[5];t.wheelPrecision=a;const h=new r.PointsCloudSystem("pcs",1,e,{updatable:!1});return h.addPoints(o,(function(e,t,i){e.position=new r.Vector3((n.X[t]-l)/(c-l),(n.Y[t]-d)/(u-d),(n.Z[t]-p)/(b-p)*s),e.color=new r.Color3(n.Red[t],n.Green[t],n.Blue[t])})),h.buildMeshAsync(),e}resizeCanvas(){var e,t,n;null===(e=this.canvas)||void 0===e||e.setAttribute("width",this.model.get("width")),null===(t=this.canvas)||void 0===t||t.setAttribute("height",this.model.get("height")),null===(n=this.engine)||void 0===n||n.resize()}query_changed(){}}},3889:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(8081),s=n.n(i),r=n(3645),a=n.n(r)()(s());a.push([e.id,"#renderCanvas {\n  width: 100%;\n  height: 100%;\n  touch-action: none;\n}\n",""]);const o=a},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,s,r){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);i&&a[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),s&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=s):d[4]="".concat(s)),t.push(d))}},t}},8081:e=>{e.exports=function(e){return e[1]}},3379:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var r={},a=[],o=0;o<e.length;o++){var l=e[o],c=i.base?l[0]+i.base:l[0],d=r[c]||0,u="".concat(c," ").concat(d);r[c]=d+1;var p=n(u),b={css:l[1],media:l[2],sourceMap:l[3]};-1!==p?(t[p].references++,t[p].updater(b)):t.push({identifier:u,updater:s(b,i),references:1}),a.push(u)}return a}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var r=i(e=e||[],s=s||{});return function(e){e=e||[];for(var a=0;a<r.length;a++){var o=n(r[a]);t[o].references--}for(var l=i(e,s),c=0;c<r.length;c++){var d=n(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=l}}},569:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},3565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i=n.css,s=n.media,r=n.sourceMap;s?e.setAttribute("media",s):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(i,e)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},4147:e=>{e.exports=JSON.parse('{"name":"@tiledb-inc/pybabylonjs","version":"0.2.0","description":"BabylonJS widget","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css","style/*.css","style/index.js"],"author":{"name":"TileDB","email":"support@tiledb.com"},"homepage":"https://github.com/TileDB-Inc/PyBabylonJS","bugs":{"url":"https://github.com/TileDB-Inc/PyBabylonJS/issues"},"license":"MIT","main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/TileDB-Inc/PyBabylonJS"},"scripts":{"build":"jlpm run build:lib && jlpm run build:labextension:dev","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"NODE_OPTIONS=--max-old-space-size=4096 webpack --mode=production","build:prod":"jlpm run clean && jlpm run build:lib && jlpm run build:labextension","clean":"jlpm run clean:lib","clean:all":"jlpm run clean:lib && jlpm run clean:labextension","clean:labextension":"rimraf pybabylonjs/labextension","clean:lib":"rimraf lib tsconfig.tsbuildinfo","clean:nbextension":"rimraf pybabylonjs/nbextension/static/index.js","eslint":"eslint . --ext .ts,.tsx --fix","eslint:check":"eslint . --ext .ts,.tsx","install:extension":"jlpm run build","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"echo test","watch":"run-p watch:src watch:labextension","watch:labextension":"jupyter labextension watch .","watch:lib":"tsc -w","watch:nbextension":"NODE_OPTIONS=--max-old-space-size=4096 webpack --watch --mode=development","watch:src":"tsc -w"},"dependencies":{"@jupyterlab/application":"^3.2.0","@babylonjs/core":"^4.2.0","@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4","@tiledb-inc/tiledb-cloud":"^0.0.8"},"devDependencies":{"@babylonjs/core":"^4.2.0","@jupyterlab/builder":"^3.1.0","@types/node":"^10.11.6","@types/webpack-env":"^1.16.2","@typescript-eslint/eslint-plugin":"^4.8.1","@typescript-eslint/parser":"^4.8.1","crypto":"1.0.1","css-loader":"^6.3.0","eslint":"^7.14.0","eslint-config-prettier":"^6.15.0","eslint-plugin-prettier":"^3.1.4","expect.js":"^0.3.1","fs-extra":"^7.0.0","git-tag-version":"^1.3.1","mkdirp":"^0.5.1","npm-run-all":"^4.1.5","prettier":"^2.1.1","rimraf":"^3.0.2","source-map-loader":"^3.0.0","style-loader":"^3.2.1","svg-url-loader":"^7.1.1","ts-loader":"^9.2.5","typescript":"~4.1.3","webpack":"^5.53.0","webpack-cli":"^4.8.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"pybabylonjs/labextension"},"styleModule":"style/index.js"}')}}]);