<tool id="sane_tiff_registered" name="sane_tiff_registered" version="0.0.1" profile="21.09">

    <description>check tiff_registered file names</description>

    <requirements>
        <requirement type="package">jinxif</requirement>
    </requirements>

    <command detect_errors="exit_code"><![CDATA[
	#import re

        mkdir tiff_registered &&
    
	#for $tiff in $tiff_registered_input:
	    #set $filename = re.sub('[^\w\-\.\s]', '_', str($tiff.element_identifier))
	    #if str($filename).endswith('.tif') or str($filename).endswith('.tiff'):
	        ln -s $tiff tiff_registered/$filename &&
	    #else:
	        ln -s $tiff tiff_registered/${filename}.tif &&
            #end if
	#end for

	python $__tool_directory__/mpleximage_03_2_sane_tiff_reg_slide.py > $stdout_tiff_registered
    ]]></command>

    <inputs>
        <param type="data_collection" collection_type="list" format="tiff" name="tiff_registered_input" label="tiff_registered_input"/>
    </inputs>
    <outputs>
	<data format="tabular" name="stdout_tiff_registered" label="stdout_tiff_registered"/>
    </outputs>

    <help></help>
</tool>
