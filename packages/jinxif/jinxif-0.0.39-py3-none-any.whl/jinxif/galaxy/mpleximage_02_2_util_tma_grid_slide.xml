<tool id="util_tma_grid_slide" name="util_tma_grid_slide" version="0.0.1" profile="21.09">

    <description>fetch image metadata</description>

    <requirements>
        <requirement type="package">jinxif</requirement>
    </requirements>

    <command detect_errors="exit_code"><![CDATA[
	#import re

	mkdir csvpng_metaimages &&

	#set $the_slide = re.sub('[^\w\-\.\s]', '_', str($slide_id))
	ln -s $csv_sceneposition csvpng_metaimages/${the_slide}_ScenePositions_xy.csv &&

	python $__tool_directory__/mpleximage_02_2_util_tma_grid_slide.py $slide_id -y $core_yaxis -x $core_xaxis
    ]]></command>

    <inputs>
        <param type="data" format="csv" name="csv_sceneposition" label="csv_sceneposition" />
        <param type="text" value="galaxy" name="slide_id" label="slide_id" help="slide indetifier"/>
        <param type="integer" value="0" name="core_yaxis" label="core_yaxis" help="0 or number of tma coor rows"/>
        <param type="integer" value="0" name="core_xaxis" label="core_xaxis" help="0 number of tma coor columns" />
    </inputs>

    <outputs>
        <collection type="list" name="util_tma_grid_metaimages_output">
            <discover_datasets pattern="__designation_and_ext__" visible="false" directory="csvpng_metaimages" />
        </collection>
    </outputs>

    <help></help>
</tool>
