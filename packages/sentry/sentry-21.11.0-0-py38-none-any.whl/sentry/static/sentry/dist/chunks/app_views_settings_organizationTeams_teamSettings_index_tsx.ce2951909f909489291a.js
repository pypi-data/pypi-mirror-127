"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationTeams_teamSettings_index_tsx"],{"./app/actionCreators/teams.tsx":(e,t,s)=>{s.d(t,{PX:()=>m,eM:()=>d,z_:()=>u,fs:()=>p,um:()=>l,s:()=>g,Cm:()=>h,tT:()=>I}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=s("./app/actionCreators/indicator.tsx"),o=s("./app/actions/teamActions.tsx"),r=s("./app/locale.tsx"),n=s("./app/utils/callIfFunction.tsx"),i=s("./app/utils/guid.tsx");const c=(e={},t,...s)=>{(0,n.g)(e[t],...s)};async function m(e,t){const s=await e.requestPromise("/organizations/".concat(t.orgId,"/user-teams/"));o.Z.loadUserTeams(s)}function d(e,t,s){return o.Z.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:e=>{o.Z.fetchDetailsSuccess(t.teamId,e),c(s,"success",e)},error:e=>{o.Z.fetchDetailsError(t.teamId,e),c(s,"error",e)}})}function u(e,t){o.Z.updateSuccess(e,t)}function p(e,t,s){const a="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return o.Z.update(t.teamId,t.data),e.request(a,{method:"PUT",data:t.data,success:e=>{u(t.teamId,e),c(s,"success",e)},error:e=>{o.Z.updateError(t.teamId,e),c(s,"error",e)}})}function l(e,t,s){var a;const r="/organizations/".concat(t.orgId,"/members/").concat(null!==(a=t.memberId)&&void 0!==a?a:"me","/teams/").concat(t.teamId,"/"),n=(0,i.E)();return o.Z.update(n,t.teamId),e.request(r,{method:"POST",success:e=>{o.Z.updateSuccess(t.teamId,e),c(s,"success",e)},error:e=>{o.Z.updateError(n,t.teamId,e),c(s,"error",e)}})}function g(e,t,s){const a="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),r=(0,i.E)();return o.Z.update(r,t.teamId),e.request(a,{method:"DELETE",success:e=>{o.Z.updateSuccess(t.teamId,e),c(s,"success",e)},error:e=>{o.Z.updateError(r,t.teamId,e),c(s,"error",e)}})}function h(e,t,s){return o.Z.createTeam(t),e.requestPromise("/organizations/".concat(s.orgId,"/teams/"),{method:"POST",data:t}).then((e=>(o.Z.createTeamSuccess(e),(0,a.S9)((0,r._N)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:s.orgId})),e)),(e=>{throw o.Z.createTeamError(t.slug,e),(0,a.Iw)((0,r._N)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:s.orgId})),e}))}function I(e,t){return o.Z.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((e=>(o.Z.removeTeamSuccess(t.teamId,e),(0,a.S9)((0,r._N)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e)),(e=>{throw o.Z.removeTeamError(t.teamId,e),(0,a.Iw)((0,r._N)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},"./app/data/forms/teamSettingsFields.tsx":(e,t,s)=>{s.r(t),s.d(t,{route:()=>r,default:()=>n});var a=s("./app/locale.tsx"),o=s("./app/utils/slugify.tsx");const r="/settings/:orgId/teams/:teamId/settings/",n=[{title:"Team Settings",fields:[{name:"slug",type:"string",required:!0,label:(0,a.t)("Name"),placeholder:"e.g. api-team",help:(0,a.t)("A unique ID used to identify the team"),disabled:({access:e})=>!e.has("team:write"),transformInput:o.Z,saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:(0,a.t)("You will be redirected to the new team slug after saving")}]}]},"./app/utils/slugify.tsx":(e,t,s)=>{function a(e){return"string"==typeof e?e.toLowerCase().replace(" ","-"):""}s.d(t,{Z:()=>a}),s("../node_modules/core-js/modules/es.string.replace.js")},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i}),s("../node_modules/react/index.js");var a=s("../node_modules/react-document-title/index.js"),o=s.n(a),r=s("./app/components/asyncComponent.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends r.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,n.tZ)(o(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/settings/organizationTeams/teamSettings/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),r=s("../node_modules/react-router/es/index.js"),n=s("./app/actionCreators/indicator.tsx"),i=s("./app/actionCreators/teams.tsx"),c=s("./app/components/button.tsx"),m=s("./app/components/confirm.tsx"),d=s("./app/components/panels/index.tsx"),u=s("./app/data/forms/teamSettingsFields.tsx"),p=s("./app/icons/index.tsx"),l=s("./app/locale.tsx"),g=s("./app/utils/withOrganization.tsx"),h=s("./app/views/asyncView.tsx"),I=s("./app/views/settings/components/forms/field/index.tsx"),Z=s("./app/views/settings/components/forms/form.tsx"),f=s("./app/views/settings/components/forms/jsonForm.tsx"),x=s("./app/views/settings/components/forms/model.tsx");class w extends x.Z{constructor(e,t){super(),(0,a.Z)(this,"orgId",void 0),(0,a.Z)(this,"teamId",void 0),this.orgId=e,this.teamId=t}doApiRequest({data:e}){return new Promise(((t,s)=>(0,i.fs)(this.api,{orgId:this.orgId,teamId:this.teamId,data:e},{success:t,error:s})))}}const v=w;var b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class T extends h.Z{constructor(...e){super(...e),(0,a.Z)(this,"model",new v(this.props.params.orgId,this.props.params.teamId)),(0,a.Z)(this,"handleSubmitSuccess",((e,t,s)=>{(0,i.z_)(e.slug,e),"slug"===s&&((0,n.S9)((0,l.t)("Team name changed")),r.browserHistory.replace("/settings/".concat(this.props.params.orgId,"/teams/").concat(t.getValue(s),"/settings/")),this.setState({loading:!0}))})),(0,a.Z)(this,"handleRemoveTeam",(async()=>{await(0,i.tT)(this.api,this.props.params),r.browserHistory.replace("/settings/".concat(this.props.params.orgId,"/teams/"))}))}getTitle(){return"Team Settings"}getEndpoints(){return[]}renderBody(){const{organization:e,team:t}=this.props,s=new Set(e.access);return(0,b.BX)(o.Fragment,{children:[(0,b.tZ)(Z.Z,{model:this.model,apiMethod:"PUT",saveOnBlur:!0,allowUndo:!0,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:()=>(0,n.Iw)((0,l.t)("Unable to save change")),initialData:{name:t.name,slug:t.slug},children:(0,b.tZ)(f.Z,{access:s,forms:u.default})}),(0,b.BX)(d.s_,{children:[(0,b.tZ)(d.V9,{children:(0,l.t)("Remove Team")}),(0,b.tZ)(I.Z,{help:(0,l.t)("This may affect team members' access to projects and associated alert delivery."),children:(0,b.tZ)("div",{children:(0,b.tZ)(m.Z,{disabled:!s.has("team:admin"),onConfirm:this.handleRemoveTeam,priority:"danger",message:(0,l._N)("Are you sure you want to remove the team [team]?",{team:"#".concat(t.slug)}),children:(0,b.tZ)(c.ZP,{icon:(0,b.tZ)(p.Fz,{}),priority:"danger",disabled:!s.has("team:admin"),children:(0,l.t)("Remove Team")})})})})]})]})}}const S=(0,g.Z)(T)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationTeams_teamSettings_index_tsx.0f3e485899d3b53b706c1c062dfc63b5.js.map