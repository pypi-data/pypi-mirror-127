"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_dashboardsV2_manage_index_tsx","app_components_sentryDocumentTitle_tsx"],{"./app/components/activity/item/avatar.tsx":(e,t,a)=>{a.d(t,{Z:()=>l});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=a("./app/components/avatar/userAvatar.tsx"),n=a("./app/components/placeholder.tsx"),i=a("./app/icons/index.tsx"),o=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d({className:e,type:t,user:a,size:s=38}){return a?(0,o.tZ)(r.Z,{user:a,size:s,className:e}):"system"===t?(0,o.tZ)(c,{className:e,size:s,children:(0,o.tZ)(p,{size:"md"})}):(0,o.tZ)(n.Z,{className:e,width:"".concat(s,"px"),height:"".concat(s,"px"),shape:"circle"})}d.displayName="ActivityAvatar";const l=d,c=(0,s.Z)("span",{target:"ety7k0b1"})("display:flex;justify-content:center;align-items:center;width:",(e=>e.size),"px;height:",(e=>e.size),"px;background-color:",(e=>e.theme.textColor),";color:",(e=>e.theme.background),";border-radius:50%;"),p=(0,s.Z)(i.iW,{target:"ety7k0b0"})({name:"1p2ly5v",styles:"padding-bottom:3px"})},"./app/components/sentryDocumentTitle.tsx":(e,t,a)=>{a.d(t,{Z:()=>o}),a("../node_modules/react/index.js");var s=a("../node_modules/react-document-title/index.js"),r=a.n(s),n=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i({title:e,orgSlug:t,projectSlug:a,children:s}){const i=t||a?t&&a?"".concat(e," - ").concat(t," - ").concat(a):t?"".concat(e," - ").concat(t):"".concat(e," - ").concat(a):e;return(0,n.tZ)(r(),{title:"".concat(i," - Sentry"),children:s})}i.displayName="SentryDocumentTitle";const o=i},"./app/views/asyncView.tsx":(e,t,a)=>{a.d(t,{Z:()=>o}),a("../node_modules/react/index.js");var s=a("../node_modules/react-document-title/index.js"),r=a.n(s),n=a("./app/components/asyncComponent.tsx"),i=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class o extends n.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,i.tZ)(r(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}o.displayName="AsyncView"},"./app/views/dashboardsV2/manage/index.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>ye});var s=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/react-router/es/index.js")),i=a("../node_modules/lodash/pick.js"),o=a.n(i),d=a("./app/components/acl/feature.tsx"),l=a("./app/components/alert.tsx"),c=a("./app/components/button.tsx"),p=a("./app/components/dropdownControl.tsx"),m=a("./app/components/noProjectMessage.tsx"),h=a("./app/components/searchBar.tsx"),u=a("./app/components/sentryDocumentTitle.tsx"),g=a("./app/icons/index.tsx"),b=a("./app/locale.tsx"),y=a("./app/styles/organization.tsx"),Z=a("./app/styles/space.tsx"),x=a("./app/utils/analytics.tsx"),v=a("./app/utils/queryString.tsx"),w=a("./app/utils/withApi.tsx"),f=a("./app/utils/withOrganization.tsx"),k=a("./app/views/asyncView.tsx"),D=a("../node_modules/react/index.js"),z=a("./images/dashboard/widget-area.svg"),_=a("./images/dashboard/widget-bar.svg"),C=a("./images/dashboard/widget-big-number.svg"),S=a("./images/dashboard/widget-line-1.svg"),j=a("./images/dashboard/widget-table.svg"),q=a("./images/dashboard/widget-world-map.svg"),N=a("./app/actionCreators/dashboards.tsx"),B=a("./app/actionCreators/indicator.tsx"),A=a("./app/components/confirm.tsx"),M=a("./app/components/emptyStateWarning.tsx"),I=a("./app/components/menuItem.tsx"),O=a("./app/components/pagination.tsx"),P=a("./app/components/timeSince.tsx"),E=a("./app/views/dashboardsV2/types.tsx"),F=a("./app/views/dashboardsV2/contextMenu.tsx"),V=a("./app/views/dashboardsV2/utils.tsx"),X=a("./app/components/activity/item/avatar.tsx"),T=a("./app/components/card.tsx"),K=a("./app/components/links/link.tsx"),L=a("./app/styles/overflowEllipsis.tsx"),R=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function H({title:e,detail:t,createdBy:a,renderWidgets:s,dateStatus:r,to:n,onEventClick:i,renderContextMenu:o}){return(0,R.tZ)(K.Z,{"data-test-id":"card-".concat(e),onClick:function(){null==i||i()},to:n,children:(0,R.BX)(Q,{interactive:!0,children:[(0,R.BX)(G,{children:[(0,R.BX)(J,{children:[(0,R.tZ)(U,{children:e}),(0,R.tZ)(Y,{children:t})]}),(0,R.tZ)(W,{children:a?(0,R.tZ)(X.Z,{type:"user",user:a,size:34}):(0,R.tZ)(X.Z,{type:"system",size:34})})]}),(0,R.tZ)($,{children:s()}),(0,R.BX)(ee,{children:[(0,R.tZ)(te,{children:r?(0,R.BX)(ae,{children:[(0,b.t)("Created")," ",r]}):(0,R.tZ)(ae,{})}),o&&o()]})]})})}H.displayName="DashboardCard";const W=(0,r.Z)("span",{target:"emkzkq79"})("border:3px solid ",(e=>e.theme.border),";border-radius:50%;height:min-content;"),J=(0,r.Z)("div",{target:"emkzkq78"})("flex-grow:1;overflow:hidden;margin-right:",(0,Z.Z)(1),";"),Q=(0,r.Z)(T.Z,{target:"emkzkq77"})({name:"1h9y2eg",styles:"justify-content:space-between;height:100%;&:focus,&:hover{top:-1px;}"}),G=(0,r.Z)("div",{target:"emkzkq76"})("display:flex;padding:",(0,Z.Z)(1.5)," ",(0,Z.Z)(2),";"),U=(0,r.Z)("div",{target:"emkzkq75"})("color:",(e=>e.theme.textColor),";",L.Z,";"),Y=(0,r.Z)("div",{target:"emkzkq74"})("font-family:",(e=>e.theme.text.familyMono),";font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.gray300),";",L.Z,";line-height:1.5;"),$=(0,r.Z)("div",{target:"emkzkq73"})("background:",(e=>e.theme.gray100),";padding:",(0,Z.Z)(1.5)," ",(0,Z.Z)(2),";max-height:150px;min-height:150px;overflow:hidden;"),ee=(0,r.Z)("div",{target:"emkzkq72"})("display:flex;justify-content:space-between;align-items:center;padding:",(0,Z.Z)(1)," ",(0,Z.Z)(2),";"),te=(0,r.Z)("div",{target:"emkzkq71"})("font-size:",(e=>e.theme.fontSizeSmall),";display:grid;grid-column-gap:",(0,Z.Z)(1),";color:",(e=>e.theme.textColor),";",L.Z,";"),ae=(0,r.Z)("span",{target:"emkzkq70"})("color:",(e=>e.theme.purple300),";padding-left:",(0,Z.Z)(1),";"),se=H;function re({api:e,organization:t,location:a,dashboards:s,pageLinks:r,onDashboardsChange:i}){function o(e){switch(e){case E.FO.BAR:return _;case E.FO.AREA:case E.FO.TOP_N:return z;case E.FO.BIG_NUMBER:return C;case E.FO.TABLE:return j;case E.FO.WORLD_MAP:return q;case E.FO.LINE:default:return S}}return(0,R.BX)(D.Fragment,{children:[null!=s&&s.length?(0,R.tZ)(ne,{children:null==s?void 0:s.map(((r,n)=>(0,R.tZ)(se,{title:"default-overview"===r.id?"Default Dashboard":r.title,to:{pathname:"/organizations/".concat(t.slug,"/dashboard/").concat(r.id,"/"),query:{...a.query}},detail:(0,b.tn)("%s widget","%s widgets",r.widgetDisplay.length),dateStatus:r.dateCreated?(0,R.tZ)(P.Z,{date:r.dateCreated}):void 0,createdBy:r.createdBy,renderWidgets:()=>(0,R.tZ)(ie,{children:r.widgetDisplay.map(((e,t)=>e===E.FO.BIG_NUMBER?(0,R.tZ)(oe,{children:(0,R.tZ)(le,{src:o(e)})},"".concat(t,"-").concat(e)):(0,R.tZ)(de,{children:(0,R.tZ)(le,{src:o(e)})},"".concat(t,"-").concat(e))))}),renderContextMenu:()=>(0,R.BX)(F.Z,{children:[(0,R.tZ)(I.Z,{"data-test-id":"dashboard-delete",disabled:s.length<=1,onClick:a=>{a.preventDefault(),(0,A._)({message:(0,b.t)("Are you sure you want to delete this dashboard?"),priority:"danger",onConfirm:()=>function(a){(0,N.iM)(e,t.slug,a.id).then((()=>{(0,x.ec)({eventKey:"dashboards_manage.delete",eventName:"Dashboards Manager: Dashboard Deleted",organization_id:parseInt(t.id,10),dashboard_id:parseInt(a.id,10)}),i(),(0,B.S9)((0,b.t)("Dashboard deleted"))})).catch((()=>{(0,B.Iw)((0,b.t)("Error deleting Dashboard"))}))}(r)})},children:(0,b.t)("Delete")}),(0,R.tZ)(I.Z,{"data-test-id":"dashboard-duplicate",onClick:a=>{a.preventDefault(),function(a){(0,N.AK)(e,t.slug,a.id).then((s=>{const r=(0,V.qk)(s);r.widgets.map((e=>e.id=void 0)),(0,N.JR)(e,t.slug,r,!0).then((()=>{(0,x.ec)({eventKey:"dashboards_manage.duplicate",eventName:"Dashboards Manager: Dashboard Duplicated",organization_id:parseInt(t.id,10),dashboard_id:parseInt(a.id,10)}),i(),(0,B.S9)((0,b.t)("Dashboard duplicated"))}))})).catch((()=>(0,B.Iw)((0,b.t)("Error duplicating Dashboard"))))}(r)},children:(0,b.t)("Duplicate")})]})},"".concat(n,"-").concat(r.id))))}):(0,R.tZ)(M.Z,{children:(0,R.tZ)("p",{children:(0,b.t)("Sorry, no Dashboards match your filters.")})}),(0,R.tZ)(ce,{pageLinks:r,onCursor:(e,a,s,r)=>{var i,o,d;const l={...s,cursor:e};Number(null!==(i=null==e||null===(o=e.split)||void 0===o||null===(d=o.call(e,":"))||void 0===d?void 0:d[1])&&void 0!==i?i:0)<=0&&-1===r&&delete l.cursor,(0,x.ec)({eventKey:"dashboards_manage.paginate",eventName:"Dashboards Manager: Paginate",organization_id:parseInt(t.id,10)}),n.browserHistory.push({pathname:a,query:l})}})]})}re.displayName="DashboardList";const ne=(0,r.Z)("div",{target:"e8t3ebt5"})("display:grid;grid-template-columns:minmax(100px, 1fr);grid-template-rows:repeat(3, max-content);grid-gap:",(0,Z.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){grid-template-columns:repeat(2, minmax(100px, 1fr));}@media (min-width: ",(e=>e.theme.breakpoints[2]),"){grid-template-columns:repeat(3, minmax(100px, 1fr));}"),ie=(0,r.Z)("div",{target:"e8t3ebt4"})("display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));grid-auto-flow:row dense;grid-gap:",(0,Z.Z)(.25),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){grid-template-columns:repeat(4, minmax(0, 1fr));}@media (min-width: ",(e=>e.theme.breakpoints[3]),"){grid-template-columns:repeat(6, minmax(0, 1fr));}@media (min-width: ",(e=>e.theme.breakpoints[4]),"){grid-template-columns:repeat(8, minmax(0, 1fr));}"),oe=(0,r.Z)("div",{target:"e8t3ebt3"})("display:flex;align-items:flex-start;width:100%;height:100%;grid-area:span 1/span 2;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-area:span 1/span 1;}@media (min-width: ",(e=>e.theme.breakpoints[3]),"){grid-area:span 1/span 2;}"),de=(0,r.Z)("div",{target:"e8t3ebt2"})({name:"1ni4knu",styles:"display:flex;align-items:flex-start;width:100%;height:100%;grid-area:span 2/span 2"}),le=(0,r.Z)("img",{target:"e8t3ebt1"})({name:"w1atjl",styles:"width:100%;height:100%"}),ce=(0,r.Z)(O.Z,{target:"e8t3ebt0"})("margin-bottom:",(0,Z.Z)(3),";"),pe=(0,w.Z)(re),me=[{label:(0,b.t)("My Dashboards"),value:"mydashboards"},{label:(0,b.t)("Dashboard Name (A-Z)"),value:"title"},{label:(0,b.t)("Date Created (Newest)"),value:"-dateCreated"},{label:(0,b.t)("Date Created (Oldest)"),value:"dateCreated"},{label:(0,b.t)("Most Popular"),value:"mostPopular"},{label:(0,b.t)("Recently Viewed"),value:"recentlyViewed"}];class he extends k.Z{constructor(...e){super(...e),(0,s.Z)(this,"handleSortChange",(e=>{const{location:t}=this.props;(0,x.ec)({eventKey:"dashboards_manage.change_sort",eventName:"Dashboards Manager: Sort By Changed",organization_id:parseInt(this.props.organization.id,10),sort:e}),n.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,sort:e}})}))}getEndpoints(){const{organization:e,location:t}=this.props;return[["dashboards","/organizations/".concat(e.slug,"/dashboards/"),{query:{...o()(t.query,["cursor","query"]),sort:this.getActiveSort().value,per_page:"9"}}]]}getActiveSort(){const{location:e}=this.props,t=(0,v.ro)(e.query.sort,"mydashboards");return me.find((e=>e.value===t))||me[0]}onDashboardsChange(){this.reloadData()}handleSearch(e){const{location:t,router:a}=this.props;(0,x.ec)({eventKey:"dashboards_manage.search",eventName:"Dashboards Manager: Search",organization_id:parseInt(this.props.organization.id,10)}),a.push({pathname:t.pathname,query:{...t.query,cursor:void 0,query:e}})}getQuery(){const{query:e}=this.props.location.query;return"string"==typeof e?e:void 0}renderActions(){const e=this.getActiveSort();return(0,R.BX)(be,{children:[(0,R.tZ)(h.Z,{defaultQuery:"",query:this.getQuery(),placeholder:(0,b.t)("Search Dashboards"),onSearch:e=>this.handleSearch(e)}),(0,R.tZ)(p.ZP,{buttonProps:{prefix:(0,b.t)("Sort By")},label:e.label,children:me.map((({label:t,value:a})=>(0,R.tZ)(p.hP,{onSelect:this.handleSortChange,eventKey:a,isActive:a===e.value,children:t},a)))})]})}renderNoAccess(){return(0,R.tZ)(y.JH,{children:(0,R.tZ)(l.Z,{type:"warning",children:(0,b.t)("You don't have access to this feature")})})}renderDashboards(){const{dashboards:e,dashboardsPageLinks:t}=this.state,{organization:a,location:s,api:r}=this.props;return(0,R.tZ)(pe,{api:r,dashboards:e,organization:a,pageLinks:t,location:s,onDashboardsChange:()=>this.onDashboardsChange()})}getTitle(){return(0,b.t)("Dashboards")}onCreate(){const{organization:e,location:t}=this.props;(0,x.ec)({eventKey:"dashboards_manage.create.start",eventName:"Dashboards Manager: Dashboard Create Started",organization_id:parseInt(e.id,10)}),n.browserHistory.push({pathname:"/organizations/".concat(e.slug,"/dashboards/new/"),query:t.query})}renderBody(){const{organization:e}=this.props;return(0,R.tZ)(d.Z,{organization:e,features:["dashboards-edit"],renderDisabled:this.renderNoAccess,children:(0,R.tZ)(u.Z,{title:(0,b.t)("Dashboards"),orgSlug:e.slug,children:(0,R.tZ)(ue,{children:(0,R.tZ)(m.Z,{organization:e,children:(0,R.BX)(y.JH,{children:[(0,R.BX)(ge,{children:[(0,b.t)("Dashboards"),(0,R.tZ)(c.ZP,{"data-test-id":"dashboard-create",onClick:e=>{e.preventDefault(),this.onCreate()},priority:"primary",icon:(0,R.tZ)(g.N_,{size:"xs",isCircled:!0}),children:(0,b.t)("Create Dashboard")})]}),this.renderActions(),this.renderDashboards()]})})})})})}}const ue=(0,r.Z)(y.JH,{target:"e1bpet4v2"})({name:"1hcx8jb",styles:"padding:0"}),ge=(0,r.Z)("div",{target:"e1bpet4v1"})("display:flex;align-items:flex-end;font-size:",(e=>e.theme.headerFontSize),";color:",(e=>e.theme.textColor),";justify-content:space-between;margin-bottom:",(0,Z.Z)(2),";"),be=(0,r.Z)("div",{target:"e1bpet4v0"})("display:grid;grid-template-columns:auto max-content;grid-gap:",(0,Z.Z)(2),";margin-bottom:",(0,Z.Z)(2),";@media (max-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:auto;}"),ye=(0,w.Z)((0,f.Z)(he))}}]);
//# sourceMappingURL=../sourcemaps/app_views_dashboardsV2_manage_index_tsx.e5130bd546af22c5d1688c0510fcb668.js.map