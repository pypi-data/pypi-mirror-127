"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_projectSourceMaps_detail_index_tsx"],{"./app/components/acl/role.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var a=s("../node_modules/react/index.js"),i=s("./app/stores/configStore.tsx"),r=s("./app/utils/isActiveSuperuser.tsx"),n=s("./app/utils/isRenderFunc.tsx"),o=s("./app/utils/withOrganization.tsx");class c extends a.Component{hasRole(){var e;const t=i.Z.get("user"),{organization:s,role:a}=this.props,{availableRoles:n}=s,o=null!==(e=s.role)&&void 0!==e?e:"";if(!t)return!1;if((0,r.M)())return!0;if(!Array.isArray(n))return!1;const c=n.map((e=>e.id));if(!c.includes(a)||!c.includes(o))return!1;const l=c.indexOf(a);return c.indexOf(o)>=l}render(){const{children:e}=this.props,t=this.hasRole();return(0,n.l)(e)?e({hasRole:t}):t&&e?e:null}}c.displayName="Role";const l=(0,o.Z)(c)},"./app/components/fileSize.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("./app/utils.tsx"),r=s("./app/utils/getDynamicText.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){const{className:t,bytes:s}=e;return(0,n.tZ)(c,{className:t,children:(0,r.Z)({value:(0,i.F)(s),fixed:"xx KB"})})}o.displayName="FileSize";const c=(0,a.Z)("span",{target:"e1xn0mc30"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),l=o},"./app/utils/isActiveSuperuser.tsx":(e,t,s)=>{s.d(t,{M:()=>n});var a=s("../node_modules/js-cookie/src/js.cookie.js"),i=s.n(a),r=s("./app/stores/configStore.tsx");function n(){const{isSuperuser:e}=r.Z.get("user")||{};return!(!e||(i().set("su","test"),void 0!==i().get("su")))}},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});const a=function(e,t,s=!0,a){const i="".concat(e," - ").concat(t),r=a?"".concat(i," - ").concat(a):i;return s?"".concat(r," - Sentry"):r}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>o}),s("../node_modules/react/index.js");var a=s("../node_modules/react-document-title/index.js"),i=s.n(a),r=s("./app/components/asyncComponent.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class o extends r.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,n.tZ)(i(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}o.displayName="AsyncView"},"./app/views/settings/projectSourceMaps/detail/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>V});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("./app/actionCreators/indicator.tsx"),o=s("./app/components/acl/access.tsx"),c=s("./app/components/button.tsx"),l=s("./app/components/buttonBar.tsx"),d=s("./app/components/confirm.tsx"),p=s("./app/components/pagination.tsx"),m=s("./app/components/panels/index.tsx"),u=s("./app/components/searchBar.tsx"),h=s("./app/components/textOverflow.tsx"),g=s("./app/components/tooltip.tsx"),x=s("./app/components/version.tsx"),Z=s("./app/icons/index.tsx"),f=s("./app/locale.tsx"),y=s("./app/styles/space.tsx"),v=s("./app/utils/formatters.tsx"),j=s("./app/utils/queryString.tsx"),w=s("./app/utils/routeTitle.tsx"),b=s("./app/views/asyncView.tsx"),A=s("./app/views/settings/components/settingsPageHeader.tsx"),S=s("./app/components/acl/role.tsx"),z=s("./app/components/fileSize.tsx"),R=s("./app/components/tag.tsx"),q=s("./app/components/timeSince.tsx"),_=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const k=({artifact:e,onDelete:t,downloadUrl:s,downloadRole:a})=>{const{name:i,size:n,dateCreated:p,id:m,dist:u}=e,h=()=>{t(m)};return(0,_.BX)(r.Fragment,{children:[(0,_.BX)(D,{children:[(0,_.tZ)(E,{children:i||"(".concat((0,f.t)("empty"),")")}),(0,_.BX)(T,{children:[(0,_.BX)(C,{children:[(0,_.tZ)(Z.jo,{size:"sm"}),(0,_.tZ)(q.Z,{date:p})]}),(0,_.tZ)(U,{type:u?"info":void 0,tooltipText:u?void 0:(0,f.t)("No distribution set"),children:null!=u?u:(0,f.t)("none")})]})]}),(0,_.tZ)(B,{children:(0,_.tZ)(z.Z,{bytes:n})}),(0,_.tZ)(P,{children:(0,_.BX)(l.ZP,{gap:.5,children:[(0,_.tZ)(S.Z,{role:a,children:({hasRole:e})=>(0,_.tZ)(g.Z,{title:(0,f.t)("You do not have permission to download artifacts."),disabled:e,children:(0,_.tZ)(c.ZP,{size:"small",icon:(0,_.tZ)(Z.Dj,{size:"sm"}),disabled:!e,href:s,title:e?(0,f.t)("Download Artifact"):void 0})})}),(0,_.tZ)(o.Z,{access:["project:releases"],children:({hasAccess:e})=>(0,_.tZ)(g.Z,{disabled:e,title:(0,f.t)("You do not have permission to delete artifacts."),children:(0,_.tZ)(d.Z,{message:(0,f.t)("Are you sure you want to remove this artifact?"),onConfirm:h,disabled:!e,children:(0,_.tZ)(c.ZP,{size:"small",icon:(0,_.tZ)(Z.Fz,{size:"sm"}),title:e?(0,f.t)("Remove Artifact"):void 0,label:(0,f.t)("Remove Artifact"),disabled:!e})})})})]})})]})};k.displayName="SourceMapsArtifactRow";const D=(0,i.Z)("div",{target:"e2h2xmi6"})({name:"1ij1o5n",styles:"display:flex;flex-direction:column;align-items:flex-start;justify-content:center"}),B=(0,i.Z)("div",{target:"e2h2xmi5"})({name:"ivtwc8",styles:"display:flex;justify-content:flex-end;text-align:right;align-items:center"}),P=(0,i.Z)(B,{target:"e2h2xmi4"})(""),E=(0,i.Z)("div",{target:"e2h2xmi3"})("padding-right:",(0,y.Z)(4),";overflow-wrap:break-word;word-break:break-all;"),T=(0,i.Z)("div",{target:"e2h2xmi2"})("width:100%;display:flex;margin-top:",(0,y.Z)(1),";align-items:center;"),C=(0,i.Z)("div",{target:"e2h2xmi1"})("display:grid;grid-gap:",(0,y.Z)(.5),";grid-template-columns:min-content 1fr;font-size:",(e=>e.theme.fontSizeMedium),";align-items:center;color:",(e=>e.theme.subText),";"),U=(0,i.Z)(R.Z,{target:"e2h2xmi0"})("margin-left:",(0,y.Z)(1),";"),F=k;class I extends b.Z{constructor(...e){super(...e),(0,a.Z)(this,"handleSearch",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,query:e}})})),(0,a.Z)(this,"handleArtifactDelete",(async e=>{(0,n.E3)((0,f.t)("Removing artifact…"));try{await this.api.requestPromise("".concat(this.getArtifactsUrl()).concat(e,"/"),{method:"DELETE"}),this.fetchData(),(0,n.S9)((0,f.t)("Artifact removed."))}catch{(0,n.Iw)((0,f.t)("Unable to remove artifact. Please try again."))}})),(0,a.Z)(this,"handleArchiveDelete",(async()=>{const{orgId:e,projectId:t,name:s}=this.props.params;(0,n.E3)((0,f.t)("Removing artifacts…"));try{await this.api.requestPromise("/projects/".concat(e,"/").concat(t,"/files/source-maps/"),{method:"DELETE",query:{name:s}}),this.fetchData(),(0,n.S9)((0,f.t)("Artifacts removed."))}catch{(0,n.Iw)((0,f.t)("Unable to remove artifacts. Please try again."))}}))}getTitle(){const{projectId:e,name:t}=this.props.params;return(0,w.Z)((0,f.t)("Archive %s",(0,v.ko)(t)),e,!1)}getDefaultState(){return{...super.getDefaultState(),artifacts:[]}}getEndpoints(){return[["artifacts",this.getArtifactsUrl(),{query:{query:this.getQuery()}}]]}getArtifactsUrl(){const{orgId:e,projectId:t,name:s}=this.props.params;return"/projects/".concat(e,"/").concat(t,"/releases/").concat(encodeURIComponent(s),"/files/")}getQuery(){const{query:e}=this.props.location.query;return(0,j.ro)(e)}getEmptyMessage(){return this.getQuery()?(0,f.t)("There are no artifacts that match your search."):(0,f.t)("There are no artifacts in this archive.")}renderLoading(){return this.renderBody()}renderArtifacts(){const{organization:e}=this.props,{artifacts:t}=this.state,s=this.api.baseUrl+this.getArtifactsUrl();return t.length?t.map((t=>(0,_.tZ)(F,{artifact:t,onDelete:this.handleArtifactDelete,downloadUrl:"".concat(s).concat(t.id,"/?download=1"),downloadRole:e.debugFilesRole},t.id))):null}renderBody(){const{loading:e,artifacts:t,artifactsPageLinks:s}=this.state,{name:a,orgId:i}=this.props.params,{project:n}=this.props;return(0,_.BX)(r.Fragment,{children:[(0,_.tZ)(M,{title:(0,_.BX)(X,{children:[(0,f.t)("Archive")," ",(0,_.tZ)(h.Z,{children:(0,_.tZ)(x.Z,{version:a,tooltipRawVersion:!0,anchor:!1,truncate:!0})})]}),action:(0,_.BX)(N,{gap:1,children:[(0,_.tZ)(O,{to:"/organizations/".concat(i,"/releases/").concat(encodeURIComponent(a),"/?project=").concat(n.id),children:(0,f.t)("Go to Release")}),(0,_.tZ)(o.Z,{access:["project:releases"],children:({hasAccess:e})=>(0,_.tZ)(g.Z,{disabled:e,title:(0,f.t)("You do not have permission to delete artifacts."),children:(0,_.tZ)(d.Z,{message:(0,f.t)("Are you sure you want to remove all artifacts in this archive?"),onConfirm:this.handleArchiveDelete,disabled:!e,children:(0,_.tZ)(c.ZP,{icon:(0,_.tZ)(Z.Fz,{size:"sm"}),title:(0,f.t)("Remove All Artifacts"),label:(0,f.t)("Remove All Artifacts"),disabled:!e})})})}),(0,_.tZ)(u.Z,{placeholder:(0,f.t)("Filter artifacts"),onSearch:this.handleSearch,query:this.getQuery()})]})}),(0,_.tZ)(L,{headers:[(0,f.t)("Artifact"),(0,_.tZ)(Q,{children:(0,f.t)("File Size")},"size"),""],emptyMessage:this.getEmptyMessage(),isEmpty:0===t.length,isLoading:e,children:this.renderArtifacts()}),(0,_.tZ)(p.Z,{pageLinks:s})]})}}const M=(0,i.Z)(A.Z,{target:"e1qrdj7c5"})(">div{@media (max-width: ",(e=>e.theme.breakpoints[2]),"){display:block;}}"),X=(0,i.Z)("div",{target:"e1qrdj7c4"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),N=(0,i.Z)(l.ZP,{target:"e1qrdj7c3"})({name:"11g6mpt",styles:"justify-content:flex-start"}),L=(0,i.Z)(m.KB,{target:"e1qrdj7c2"})({name:"qc2mzu",styles:"grid-template-columns:minmax(220px, 1fr) max-content 120px"}),O=(0,i.Z)(c.ZP,{target:"e1qrdj7c1"})({name:"1bmnxg7",styles:"white-space:nowrap"}),Q=(0,i.Z)("div",{target:"e1qrdj7c0"})({name:"2qga7i",styles:"text-align:right"}),V=I}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectSourceMaps_detail_index_tsx.b9af774cf9bdea82610fcc977223a3a6.js.map