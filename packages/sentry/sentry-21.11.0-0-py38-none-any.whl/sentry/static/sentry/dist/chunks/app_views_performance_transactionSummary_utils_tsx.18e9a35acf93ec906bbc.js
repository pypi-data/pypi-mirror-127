"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_transactionSummary_utils_tsx"],{"./app/components/events/interfaces/spans/utils.tsx":(e,t,n)=>{n.d(t,{IG:()=>v,n0:()=>g,TC:()=>_,hw:()=>T,ro:()=>y,Rr:()=>E,yk:()=>w,PA:()=>b,k9:()=>R,yn:()=>P,h_:()=>x,PC:()=>C,o0:()=>I,is:()=>q,vu:()=>D,rF:()=>N}),n("../node_modules/core-js/modules/es.symbol.description.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/lodash/isNumber.js"),s=n.n(a),i=n("../node_modules/lodash/isString.js"),o=n.n(i),l=n("../node_modules/lodash/set.js"),c=n.n(l),u=n("../node_modules/moment/moment.js"),p=n.n(u),d=n("./app/types/event.tsx"),m=n("./app/types/utils.tsx"),f=n("./app/utils/performance/vitals/constants.tsx");const h=e=>{const{startTimestamp:t,endTimestamp:n}=e;return t>n?{startTimestamp:n,endTimestamp:t}:e};let S;!function(e){e[e.Stable=0]="Stable",e[e.Reversed=1]="Reversed",e[e.Equal=2]="Equal"}(S||(S={}));const v=e=>{const{viewStart:t,viewEnd:n}=e,{startTimestamp:r,endTimestamp:a}=h({startTimestamp:e.traceStartTimestamp,endTimestamp:e.traceEndTimestamp}),s=a-r,i=r+t*s,o=a-(1-n)*s-i;return e=>{if(s<=0)return{type:"TRACE_TIMESTAMPS_EQUAL",isSpanVisibleInView:!0};if(o<=0)return{type:"INVALID_VIEW_WINDOW",isSpanVisibleInView:!0};const{startTimestamp:t,endTimestamp:n}=h(e),r=(e=>{const t=e.startTimestamp,n=e.endTimestamp;return t<n?S.Stable:t===n?S.Equal:S.Reversed})(e),a=(t-i)/o,l=(n-i)/o,c=l>0&&a<1;switch(r){case S.Equal:return{type:"TIMESTAMPS_EQUAL",start:a,width:1,isSpanVisibleInView:l>=0&&a<=1};case S.Reversed:return{type:"TIMESTAMPS_REVERSED",start:a,end:l,isSpanVisibleInView:c};case S.Stable:return{type:"TIMESTAMPS_STABLE",start:a,end:l,isSpanVisibleInView:c};default:return r}}};function g(e){return{trace_id:e.traceID,span_id:e.rootSpanID,parent_span_id:e.parentSpanID,start_timestamp:e.traceStartTimestamp,timestamp:e.traceEndTimestamp,op:e.op,description:e.description,data:{},status:e.rootSpanStatus,hash:e.hash,exclusive_time:e.exclusiveTime}}function _(e){return{start:p().unix(e.start).subtract(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS"),end:p().unix(e.end).add(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS")}}function T(e){return"type"in e&&"gap"===e.type}function y(e){if("type"in e){if("orphan"===e.type)return!0;if("gap"===e.type)return e.isOrphan}return!1}function E(e,t=""){return T(e)?t:e.span_id}function w(e){if(!T(e))return e.op}function b(e){var t;return null==e||null===(t=e.contexts)||void 0===t?void 0:t.trace}function R(e){var t;const n=e.entries.find((e=>e.type===d.U.SPANS)),r=null!==(t=null==n?void 0:n.data)&&void 0!==t?t:[],a=b(e),i=a&&a.trace_id||"",l=a&&a.span_id||"",u=a&&a.op||"transaction",p=a&&a.description,f=a&&a.parent_span_id,h=a&&a.status,S=a&&a.hash,v=a&&a.exclusive_time;if(!n||r.length<=0)return{op:u,childSpans:{},traceStartTimestamp:e.startTimestamp,traceEndTimestamp:e.endTimestamp,traceID:i,rootSpanID:l,rootSpanStatus:h,parentSpanID:f,spans:[],description:p,hash:S,exclusiveTime:v};const g=new Set(r.map((e=>e.span_id)));g.add(l);const _={op:u,childSpans:{},traceStartTimestamp:e.startTimestamp,traceEndTimestamp:e.endTimestamp,traceID:i,rootSpanID:l,rootSpanStatus:h,parentSpanID:f,spans:r,description:p,hash:S,exclusiveTime:v},y=r.reduce(((e,t)=>{var n;let r=t;const a=function(e){return T(e)?"gap-span":e.parent_span_id}(r),i=a&&g.has(a);var u;u=a,o()(u)&&u.length>0&&i||(r.parent_span_id=l,r={type:"orphan",...r}),(0,m.hu)(r.parent_span_id);const p=null!==(n=e.childSpans[r.parent_span_id])&&void 0!==n?n:[];p.push(r),c()(e.childSpans,r.parent_span_id,p),(!e.traceStartTimestamp||r.start_timestamp<e.traceStartTimestamp)&&(e.traceStartTimestamp=r.start_timestamp);const d=s()(r.timestamp);return e.traceEndTimestamp?d&&r.timestamp>e.traceEndTimestamp?(e.traceEndTimestamp=r.timestamp,e):(r.start_timestamp>e.traceEndTimestamp&&(e.traceEndTimestamp=r.start_timestamp),e):d?(e.traceEndTimestamp=r.timestamp,e):(e.traceEndTimestamp=r.start_timestamp,e)}),_);return Object.values(y.childSpans).forEach((e=>{e.sort(F)})),y}function F(e,t){return y(e)&&!y(t)?1:!y(e)&&y(t)||e.start_timestamp<t.start_timestamp?-1:e.start_timestamp===t.start_timestamp?0:1}function P(e){return"number"!=typeof e&&"orphan"===(null==e?void 0:e.type)}function x(e){return P(e)?e.depth:e}function C(e){var t;const n=null===(t=e.sdk)||void 0===t?void 0:t.name;return!!n&&["sentry.javascript.browser","sentry.javascript.react","sentry.javascript.gatsby","sentry.javascript.ember","sentry.javascript.vue","sentry.javascript.angular","sentry.javascript.nextjs"].includes(n.toLowerCase())}const I=["mark","paint"];function A(e){const t=Object.keys(e);return Object.values(f.r).filter((e=>t.includes(e.slug))).some((t=>{const n=e[t.slug];return"number"==typeof n&&"number"==typeof t.poorThreshold&&n>=t.poorThreshold}))}function q(e){if(!e.measurements)return new Map;const t=Object.keys(e.measurements).filter((e=>e.startsWith("mark."))).map((t=>{const n=t.slice("mark.".length),r=e.measurements[n];return{name:t,timestamp:e.measurements[t].value,value:r?r.value:void 0}})),n=new Map;return t.forEach((e=>{const t=e.name.slice("mark.".length),r=e.value;if(n.has(e.timestamp)){const a=n.get(e.timestamp);return a.marks={...a.marks,[t]:r},a.failedThreshold||(a.failedThreshold=A(a.marks)),void n.set(e.timestamp,a)}const a={[t]:r};n.set(e.timestamp,{marks:a,failedThreshold:A(a)})})),n}function D(e,t){const n=t({startTimestamp:e,endTimestamp:e});switch(n.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{warning:void 0,left:void 0,width:void 0,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_EQUAL":return{warning:void 0,left:n.start,width:1e-5,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{warning:void 0,left:n.start,width:n.end-n.start,isSpanVisibleInView:n.isSpanVisibleInView};default:return n}}function N(e,t,n){return a=>{a.preventDefault();const s="#span-".concat(e);t(s),r.browserHistory.push({...n,hash:s})}}},"./app/utils/performance/quickTrace/utils.tsx":(e,t,n)=>{n.d(t,{hp:()=>p,q2:()=>d,eW:()=>m,R8:()=>h,eF:()=>v,_Z:()=>g,$J:()=>_,S2:()=>T,xB:()=>y,y3:()=>E,Ci:()=>w}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/lodash/omit.js"),a=n.n(r),s=n("../node_modules/moment-timezone/index.js"),i=n.n(s),o=n("./app/components/events/interfaces/spans/utils.tsx"),l=n("./app/constants/globalSelectionHeader.tsx"),c=n("./app/utils/analytics.tsx"),u=n("./app/utils/discover/eventView.tsx");function p(e){return"transaction"===e.type}function d(e,t){return p(t)?e.event_id===t.id:void 0!==e.errors&&e.errors.some((e=>e.event_id===t.id))}function m(e,t){const n=[],r=[],a=[{event:t,path:[]}];for(;a.length;){const t=a.shift();if(d(t.event,e)){for(const e of t.path)n.push(e);r.push(t.event)}else{const e=[...t.path,f(t.event)];for(const n of t.event.children)a.push({event:n,path:e})}}if(!r.length)throw new Error("No relevant path exists!");for(;r.length;){const e=r.shift();for(const t of e.children)r.push(t);n.push(f(e))}return n}function f(e){return a()(e,["children"])}function h(e,t,n){var r,a,s;const{type:i,trace:o}=e;if("empty"===i||null===o)throw new Error("Current event not in trace navigator!");const l="full"===i,u=null!==(r=o.find((e=>d(e,t))))&&void 0!==r?r:null;if(null===u)throw new Error("Current event not in trace navigator!");const p=u.parent_event_id&&null!==(a=o.find((e=>e.event_id===u.parent_event_id)))&&void 0!==a?a:null,m=null!==(s=o.find((e=>e.event_id!==u.event_id&&e.event_id!==(null==p?void 0:p.event_id)&&0===e.generation)))&&void 0!==s?s:null,f=l?[]:null,h=[],v=l?[]:null,g=new Set;return o.forEach((e=>{g.add(e.project_id),(e=>e.parent_event_id===u.event_id)(e)?h.push(e):l&&((e=>null!==u.generation&&null!==e.generation&&e.generation>0&&u.generation-1>e.generation)(e)?null==f||f.push(e):(e=>null!==u.generation&&null!==e.generation&&u.generation+1<e.generation)(e)&&(null==v||v.push(e)))})),l&&g.size>1&&function(e,t){(0,c.ec)({eventKey:"quick_trace.connected_services",eventName:"Quick Trace: Connected Services",organization_id:parseInt(e.id,10),projects:t})}(n,g.size),{root:m,ancestors:null===f?null:S(f),parent:p,current:u,children:S(h),descendants:null===v?null:S(v)}}function S(e){return e.sort(((e,t)=>t["transaction.duration"]-e["transaction.duration"]))}function v({eventView:e,location:t}){return a()(e.getEventsAPIPayload(t),["field","sort","per_page"])}function g({start:e,end:t,statsPeriod:n}){return u.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[l.mP],query:"",environment:[],start:e,end:t,range:n})}function _(e){const t=p(e)?e.startTimestamp:i()(e.dateReceived?e.dateReceived:e.dateCreated).valueOf()/1e3,n=p(e)?e.endTimestamp:t;return(0,o.TC)({start:t,end:n})}function T(e,t,n){let r=n;const a=[e];for(;a.length;){const e=a.pop();for(const t of e.children)a.push(t);r=t(r,e)}return r}function y(e,t){return T(e,((e,n)=>(t(n)&&e.push(n),e)),[])}function E(e){return Boolean(e.event_id)}function w(e){return Boolean(e.event_id)}},"./app/utils/performance/vitals/constants.tsx":(e,t,n)=>{n.d(t,{r:()=>s,T:()=>i});var r=n("./app/locale.tsx"),a=n("./app/utils/discover/fields.tsx");const s={[a.Zl.FP]:{slug:"fp",name:(0,r.t)("First Paint"),acronym:"FP",description:(0,r.t)("Render time of the first pixel loaded in the viewport (may overlap with FCP)."),poorThreshold:3e3,type:(0,a.Cq)(a.Zl.FP)},[a.Zl.FCP]:{slug:"fcp",name:(0,r.t)("First Contentful Paint"),acronym:"FCP",description:(0,r.t)("Render time of the first image, text or other DOM node in the viewport."),poorThreshold:3e3,type:(0,a.Cq)(a.Zl.FCP)},[a.Zl.LCP]:{slug:"lcp",name:(0,r.t)("Largest Contentful Paint"),acronym:"LCP",description:(0,r.t)("Render time of the largest image, text or other DOM node in the viewport."),poorThreshold:4e3,type:(0,a.Cq)(a.Zl.LCP)},[a.Zl.FID]:{slug:"fid",name:(0,r.t)("First Input Delay"),acronym:"FID",description:(0,r.t)("Response time of the browser to a user interaction (clicking, tapping, etc)."),poorThreshold:300,type:(0,a.Cq)(a.Zl.FID)},[a.Zl.CLS]:{slug:"cls",name:(0,r.t)("Cumulative Layout Shift"),acronym:"CLS",description:(0,r.t)("Sum of layout shift scores that measure the visual stability of the page."),poorThreshold:.25,type:(0,a.Cq)(a.Zl.CLS)},[a.Zl.TTFB]:{slug:"ttfb",name:(0,r.t)("Time to First Byte"),acronym:"TTFB",description:(0,r.t)("The time that it takes for a user's browser to receive the first byte of page content."),poorThreshold:600,type:(0,a.Cq)(a.Zl.TTFB)},[a.Zl.RequestTime]:{slug:"ttfb.requesttime",name:(0,r.t)("Request Time"),acronym:"RT",description:(0,r.t)("Captures the time spent making the request and receiving the first byte of the response."),poorThreshold:600,type:(0,a.Cq)(a.Zl.RequestTime)}},i={[a.$n.AppStartCold]:{slug:"app_start_cold",name:(0,r.t)("App Start Cold"),description:(0,r.t)("Cold start is a measure of the application start up time from scratch."),type:(0,a.Cq)(a.$n.AppStartCold)},[a.$n.AppStartWarm]:{slug:"app_start_warm",name:(0,r.t)("App Start Warm"),description:(0,r.t)("Warm start is a measure of the application start up time while still in memory."),type:(0,a.Cq)(a.$n.AppStartWarm)},[a.$n.FramesTotal]:{slug:"frames_total",name:(0,r.t)("Total Frames"),description:(0,r.t)("Total frames is a count of the number of frames recorded within a transaction."),type:(0,a.Cq)(a.$n.FramesTotal)},[a.$n.FramesSlow]:{slug:"frames_slow",name:(0,r.t)("Slow Frames"),description:(0,r.t)("Slow frames is a count of the number of slow frames recorded within a transaction."),type:(0,a.Cq)(a.$n.FramesSlow)},[a.$n.FramesFrozen]:{slug:"frames_frozen",name:(0,r.t)("Frozen Frames"),description:(0,r.t)("Frozen frames is a count of the number of frozen frames recorded within a transaction."),type:(0,a.Cq)(a.$n.FramesFrozen)},[a.$n.FramesSlowRate]:{slug:"frames_slow_rate",name:(0,r.t)("Slow Frames Rate"),description:(0,r.t)("Slow Frames Rate is the percentage of frames recorded within a transaction that is considered slow."),type:(0,a.Cq)(a.$n.FramesSlowRate)},[a.$n.FramesFrozenRate]:{slug:"frames_frozen_rate",name:(0,r.t)("Frozen Frames Rate"),description:(0,r.t)("Frozen Frames Rate is the percentage of frames recorded within a transaction that is considered frozen."),type:(0,a.Cq)(a.$n.FramesFrozenRate)},[a.$n.StallCount]:{slug:"stall_count",name:(0,r.t)("Stalls"),description:(0,r.t)("Stalls is the number of times the application stalled within a transaction."),type:(0,a.Cq)(a.$n.StallCount)},[a.$n.StallTotalTime]:{slug:"stall_total_time",name:(0,r.t)("Total Stall Time"),description:(0,r.t)("Stall Total Time is the total amount of time the application is stalled within a transaction."),type:(0,a.Cq)(a.$n.StallTotalTime)},[a.$n.StallLongestTime]:{slug:"stall_longest_time",name:(0,r.t)("Longest Stall Time"),description:(0,r.t)("Stall Longest Time is the longest amount of time the application is stalled within a transaction."),type:(0,a.Cq)(a.$n.StallLongestTime)},[a.$n.StallPercentage]:{slug:"stall_percentage",name:(0,r.t)("Stall Percentage"),description:(0,r.t)("Stall Percentage is the percentage of the transaction duration the application was stalled."),type:(0,a.Cq)(a.$n.StallPercentage)}}},"./app/views/performance/traceDetails/utils.tsx":(e,t,n)=>{n.d(t,{YA:()=>s,Rg:()=>i,uM:()=>o}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("./app/constants/globalSelectionHeader.tsx"),a=n("./app/utils/performance/quickTrace/utils.tsx");function s(e,t,n,a){const{start:s,end:i,statsPeriod:o}=n;return{pathname:"/organizations/".concat(e.slug,"/performance/trace/").concat(t,"/"),query:{...a,statsPeriod:o,[r.V.PAGE_START]:s,[r.V.PAGE_END]:i}}}function i(e){const t={projects:new Set,errors:new Set,transactions:new Set,startTimestamp:Number.MAX_SAFE_INTEGER,endTimestamp:0,maxGeneration:0};return e.reduce(((e,t)=>(0,a.S2)(t,((e,t)=>{for(const r of null!==(n=t.errors)&&void 0!==n?n:[]){var n;e.errors.add(r.event_id)}return e.transactions.add(t.event_id),e.projects.add(t.project_slug),e.startTimestamp=Math.min(e.startTimestamp,t.start_timestamp),e.endTimestamp=Math.max(e.endTimestamp,t.timestamp),e.maxGeneration=Math.max(e.maxGeneration,t.generation),e}),e)),t)}function o(e){return null===e.parent_span_id}},"./app/views/performance/transactionSummary/utils.tsx":(e,t,n)=>{n.d(t,{K0:()=>c,e1:()=>u,Z6:()=>p,vd:()=>d,uI:()=>m});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("./app/styles/space.tsx"),s=n("./app/utils/discover/urls.tsx"),i=n("./app/utils/tokenizeSearch.tsx"),o=n("./app/views/performance/traceDetails/utils.tsx"),l=n("./app/views/performance/utils.tsx");let c;function u({orgSlug:e,transaction:t,projectID:n,query:r,unselectedSeries:a="p100()",display:s,trendFunction:o,trendColumn:l,showTransactions:c,additionalQuery:u}){const p=function({orgSlug:e}){return"/organizations/".concat(e,"/performance/summary/")}({orgSlug:e});let d;return d="string"==typeof r.query?function(e){const t=new i.MY(e);return t.removeFilter("transaction"),t.formatString()}(r.query):r.query,{pathname:p,query:{transaction:t,project:n,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:d,unselectedSeries:a,showTransactions:c,display:s,trendFunction:o,trendColumn:l,...u}}}function p(e){return(t,n,r)=>{const a="".concat(n.trace);return a?(0,o.YA)(t,a,e,{}):{}}}function d(e){return(t,n,r,a)=>{const i=(0,s.JE)(n);return(0,l.DD)(t,i,e,r,a)}}!function(e){e.FASTEST="fastest",e.SLOW="slow",e.OUTLIER="outlier",e.RECENT="recent"}(c||(c={}));const m=(0,r.Z)("div",{target:"e1radvp0"})("margin-top:",(0,a.Z)(3),";")},"./app/views/performance/trends/types.tsx":(e,t,n)=>{let r,a,s;n.d(t,{ER:()=>r,Z2:()=>a,A2:()=>s}),function(e){e.IMPROVED="improved",e.REGRESSION="regression"}(r||(r={})),function(e){e.P50="p50",e.P75="p75",e.P95="p95",e.P99="p99",e.AVG="avg"}(a||(a={})),function(e){e.DURATION="transaction.duration",e.LCP="measurements.lcp",e.FCP="measurements.fcp",e.FID="measurements.fid",e.CLS="measurements.cls",e.SPANS_DB="spans.db",e.SPANS_HTTP="spans.http",e.SPANS_BROWSER="spans.browser",e.SPANS_RESOURCE="spans.resource"}(s||(s={}))},"./app/views/performance/trends/utils.tsx":(e,t,n)=>{n.d(t,{_1:()=>m,bg:()=>f,T1:()=>h,cs:()=>S,es:()=>v,vt:()=>T,Ws:()=>y,CE:()=>E,IO:()=>w,ed:()=>b,Kt:()=>R,_H:()=>F,kM:()=>P,iF:()=>x,wx:()=>C,RP:()=>I,j_:()=>A,P4:()=>q,HF:()=>N,vq:()=>j}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/downsample/methods/ASAP.js"),a=n("../node_modules/moment/moment.js"),s=n.n(a),i=n("./app/components/charts/utils.tsx"),o=n("./app/locale.tsx"),l=n("./app/utils/discover/fields.tsx"),c=n("./app/utils/queryString.tsx"),u=n("./app/utils/theme.tsx"),p=n("./app/utils/tokenizeSearch.tsx"),d=n("./app/views/performance/trends/types.tsx");const m="14d",f="15min",h=[{label:"p50",field:d.Z2.P50,alias:"percentile_range",legendLabel:"p50"},{label:"p75",field:d.Z2.P75,alias:"percentile_range",legendLabel:"p75"},{label:"p95",field:d.Z2.P95,alias:"percentile_range",legendLabel:"p95"},{label:"p99",field:d.Z2.P99,alias:"percentile_range",legendLabel:"p99"},{label:"average",field:d.Z2.AVG,alias:"avg_range",legendLabel:"average"}],S=[{label:"Duration",column:d.A2.DURATION},{label:"LCP",column:d.A2.LCP},{label:"FCP",column:d.A2.FCP},{label:"FID",column:d.A2.FID},{label:"CLS",column:d.A2.CLS},{label:"Spans (http)",column:d.A2.SPANS_HTTP},{label:"Spans (db)",column:d.A2.SPANS_DB},{label:"Spans (browser)",column:d.A2.SPANS_BROWSER},{label:"Spans (resource)",column:d.A2.SPANS_RESOURCE}],v={[d.ER.IMPROVED]:{lighter:u.ZP.green200,default:u.ZP.green300},[d.ER.REGRESSION]:{lighter:u.ZP.red200,default:u.ZP.red300}},g={[d.ER.IMPROVED]:"improvedSelected",[d.ER.REGRESSION]:"regressionSelected"},_={[d.ER.IMPROVED]:"improvedUnselectedSeries",[d.ER.REGRESSION]:"regressionUnselectedSeries"},T={[d.ER.IMPROVED]:"improvedCursor",[d.ER.REGRESSION]:"regressionCursor"};function y(){const e={};return Object.values(T).forEach((t=>e[t]=void 0)),e}function E(e,t){var n;const r=null!=t?t:(0,c.ro)(null==e||null===(n=e.query)||void 0===n?void 0:n.trendFunction);return h.find((({field:e})=>e===r))||h[0]}function w(e){var t;const n=(0,c.ro)(null==e||null===(t=e.query)||void 0===t?void 0:t.trendParameter);return S.find((({label:e})=>e===n))||S[0]}function b(e,t){return(0,l.sN)({kind:"function",function:[e,t,void 0,void 0]})}function R(e,t){return{fromSeconds:e/1e3,toSeconds:t/1e3,showDigits:e>1e3||t>1e3||e<10||t<10}}function F(e,t){if(!e.project||!t)return;const n=t.find((t=>t.slug===e.project));return null==n?void 0:n.id}function P(e,t,n,r){const a=E(t),s=w(t),o=[...r?[]:["transaction"],"project"].map((e=>({field:e}))),l={field:"trend_percentage()",kind:"asc"};e.trendType=n,n===d.ER.REGRESSION&&(l.kind="desc"),a&&s&&(e.trendFunction=b(a.field,s.column)),e.query=function(e){const t=new p.MY(e);return t.hasFilter("count_percentage()")||t.addFilterValues("count_percentage()",[">0.25","<4"]),t.hasFilter("trend_percentage()")||t.addFilterValues("trend_percentage()",[">0%"]),t.hasFilter("confidence()")||t.addFilterValues("confidence()",[">6"]),t.formatString()}(e.query),e.interval=function(e,t){var n;const r=(0,c.ro)(null==e||null===(n=e.query)||void 0===n?void 0:n.interval),{start:a,end:s,statsPeriod:o}=t,l={start:a||null,end:s||null,period:o},u=(0,i.ZS)(l,"high");return r||u}(t,e),e.sorts=[l],e.fields=o}function x(e,t){const{query:n}=t,r=n.start&&n.end;return n.statsPeriod||r||(e.statsPeriod=m),e}function C(e,t){const n=Math.abs(e);return{seconds:n/1e3,fixedDigits:n>1e3||n<10?1:0,changeLabel:t===d.ER.REGRESSION?(0,o.t)("slower"):(0,o.t)("faster")}}function I(e){const t=s()();return e.map((e=>({...e,received_at:t,transaction:e.transaction})))}function A(e){return g[e]}function q(e){return _[e]}const D=(e,t=100)=>(0,r.Cl)(e,t),N=e=>["p50","p75"].find((t=>e.includes(t)));function j(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;if(!e)return{maxValue:r,minValue:n,smoothedResults:void 0};const a=[];for(const s of e){const e=s.data,i=[],o=D(e.map((({name:e,value:t})=>[Number(e),t])));for(let e=0;e<o.length;e++){const t=o[e],a=t.y;if(i.push({name:t.x,value:a}),!isNaN(a)){const e=Math.round(a);n=Math.min(e,n),r=Math.max(e,r)}}a.push({seriesName:t||s.seriesName||"Current",data:i,lineStyle:s.lineStyle,color:s.color})}return{minValue:n,maxValue:r,smoothedResults:a}}},"./app/views/performance/utils.tsx":(e,t,n)=>{n.d(t,{iy:()=>v,Bh:()=>y,C$:()=>E,Ik:()=>w,iL:()=>b,de:()=>R,Ws:()=>F,Ov:()=>P,R8:()=>x,al:()=>C,m_:()=>I,DD:()=>A,hp:()=>q,n4:()=>D,JY:()=>N,Xr:()=>j,YL:()=>V}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.trim.js");var r=n("../node_modules/react-router/es/index.js"),a=n("./app/components/duration.tsx"),s=n("./app/constants/globalSelectionHeader.tsx"),i=n("./app/data/platformCategories.tsx"),o=n("./app/utils.tsx"),l=n("./app/utils/analytics.tsx"),c=n("./app/utils/dates.tsx"),u=n("./app/utils/discover/fields.tsx"),p=n("./app/utils/formatters.tsx"),d=n("./app/utils/getCurrentSentryReactTransaction.tsx"),m=n("./app/utils/queryString.tsx"),f=n("./app/utils/tokenizeSearch.tsx"),h=n("./app/views/performance/trends/utils.tsx"),S=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let v;!function(e){e.ANY="any",e.FRONTEND="frontend",e.BACKEND="backend",e.FRONTEND_OTHER="frontend_other",e.MOBILE="mobile"}(v||(v={}));const g=[...i.tQ],_=[...i.y3],T=[...i.ai];function y(e,t){if(0===t.length||t[0]===s.mP)return v.ANY;const n=e.filter((e=>t.includes(parseInt("".concat(e.id),10))));return 0===n.length||n.some((e=>!e.platform))?v.ANY:n.every((e=>g.includes(e.platform)))?v.FRONTEND:n.every((e=>_.includes(e.platform)))?v.BACKEND:n.every((e=>T.includes(e.platform)))?v.MOBILE:v.ANY}function E(e,t){const n=y(e,t.project);return n===v.FRONTEND&&new f.MY(t.query).getFilterValues("!transaction.op").some((e=>"pageload"===e))?v.FRONTEND_OTHER:n}function w(e,t){return E(t,e)===v.FRONTEND}function b(e,t){return E(t,e)===v.FRONTEND||E(t,e)===v.FRONTEND_OTHER}function R(e){return"/organizations/".concat(e.slug,"/performance/")}function F(e){return"/organizations/".concat(e.slug,"/performance/trends/")}function P(e,t=""){return(0,m.ro)(e.query.query,t).trim()}function x({location:e,organization:t}){(0,l.ec)({eventKey:"performance_views.change_view",eventName:"Performance Views: Change View",organization_id:parseInt(t.id,10),view_name:"TRENDS"});const n=C({location:e,organization:t});r.browserHistory.push(n)}function C({location:e,organization:t,initialConditions:n,additionalQuery:r}){const a={...e.query,...r},s=(0,m.ro)(e.query.query,""),i=new f.MY(s),o=null!=n?n:new f.MY([]);return i.hasFilter("tpm()")?o.setFilterValues("tpm()",i.getFilterValues("tpm()")):o.setFilterValues("tpm()",[">0.01"]),i.hasFilter("transaction.duration")?o.setFilterValues("transaction.duration",i.getFilterValues("transaction.duration")):o.setFilterValues("transaction.duration",[">0","<".concat(h.bg)]),a.query=o.formatString(),{pathname:F(t),query:{...a}}}function I(e,t={excludeTagKeys:new Set(["event.type","project"])}){return e.getFilterKeys().forEach((n=>{const r=n.startsWith("!")?n.substr(1):n;(r.match(/\w+\(.*\)/)||u.J8.includes(r)||t.excludeTagKeys.has(r))&&e.removeFilter(n)})),e}function A(e,t,n,r,a){const s={pathname:"/organizations/".concat(e.slug,"/performance/").concat(t,"/"),query:{...r,transaction:n},hash:a};return(0,o.ri)(a)||delete s.hash,s}function q({organization:e,baselineEventSlug:t,regressionEventSlug:n,transaction:r,query:a}){return{pathname:"/organizations/".concat(e.slug,"/performance/compare/").concat(t,"/").concat(n,"/"),query:{...a,transaction:r}}}function D(e){const t=(0,d.Z)(),n=(0,c.Ri)(e.datetime.period,e.datetime.start,e.datetime.end),r=Math.floor(86400*n);null==t||t.setTag("query.period",r.toString());let a=">30d";r<=86400?a="<=1d":r<=604800?a="<=7d":r<=1209600?a="<=14d":r<=2592e3&&(a="<=30d"),null==t||t.setTag("query.period.grouped",a)}function N(e){const{transaction:t}=e.query;return(0,m.ro)(t)}function j(e){const t=(e=>(0,o.ri)(e.milliseconds))(e)?e.milliseconds/1e3:e.seconds;return(0,S.tZ)(a.Z,{abbreviation:e.abbreviation,seconds:t,fixedDigits:2})}function V(e){return(0,p.g9)(e/1e3,e>1e3?2:0,!0)}j.displayName="PerformanceDuration"}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_utils_tsx.58fc5d68f7d04bfcadeea56dfc2e4300.js.map