(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationIntegrations_sentryAppDetailedView_tsx"],{"./app/actionCreators/sentryAppInstallations.tsx":(t,e,s)=>{"use strict";s.d(e,{G:()=>a,W:()=>r});var n=s("./app/actionCreators/indicator.tsx"),i=s("./app/locale.tsx");function a(t,e,s){(0,n.E3)();const a=t.requestPromise("/organizations/".concat(e,"/sentry-app-installations/"),{method:"POST",data:{slug:s.slug}});return a.then((()=>(0,n.B8)()),(()=>(0,n.Iw)((0,i.t)("Unable to install ".concat(s.name))))),a}function r(t,e){(0,n.E3)();const s=t.requestPromise("/sentry-app-installations/".concat(e.uuid,"/"),{method:"DELETE"});return s.then((()=>{(0,n.S9)((0,i.t)("".concat(e.app.slug," successfully uninstalled.")))}),(()=>(0,n.B8)())),s}},"./app/utils/consolidatedScopes.tsx":(t,e,s)=>{"use strict";s.d(e,{A:()=>y,m:()=>m}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("../node_modules/lodash/groupBy.js"),i=s.n(n),a=s("../node_modules/lodash/invertBy.js"),r=s.n(a),o=s("../node_modules/lodash/pick.js"),l=s.n(o);const p={read:0,write:1,admin:2},c={project:"Project",team:"Team",release:"Release",event:"Event",org:"Organization",member:"Member"},d={Project:"no-access",Team:"no-access",Release:"no-access",Event:"no-access",Organization:"no-access",Member:"no-access"},u="project:releases",h=t=>{const e=t.split(":")[1];return p[e]},g=(t,e)=>h(t)-h(e);function m(t){const e={...d};let s=[...t];var n;return t.includes(u)&&(e.Release="admin",s=t.filter((t=>t!==u))),(n=s,Object.values(i()(n,(t=>t.split(":")[0]))).map((t=>t.sort(g))).map((t=>t.pop()))).forEach((t=>{if(t){const[s,n]=t.split(":");e[c[s]]=n}})),e}function y(t){const e=m(t);return{read:[],write:[],admin:[],...l()(r()(e),["read","write","admin"])}}},"./app/views/organizationIntegrations/sentryAppDetailedView.tsx":(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>E});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./app/actionCreators/indicator.tsx")),r=s("./app/actionCreators/modal.tsx"),o=s("./app/actionCreators/sentryAppInstallations.tsx"),l=s("./app/components/button.tsx"),p=s("./app/components/circleIndicator.tsx"),c=s("./app/components/confirm.tsx"),d=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),h=s("./app/styles/space.tsx"),g=s("./app/utils/consolidatedScopes.tsx"),m=s("./app/utils/integrationUtil.tsx"),y=s("./app/utils/queryString.tsx"),x=s("./app/utils/recordSentryAppInteraction.tsx"),Z=s("./app/utils/withOrganization.tsx"),b=s("./app/views/organizationIntegrations/abstractIntegrationDetailedView.tsx"),f=s("../node_modules/react/index.js"),v=s("./app/views/settings/components/forms/textCopyInput.tsx"),w=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class _ extends f.Component{constructor(...t){super(...t),(0,n.Z)(this,"onCopy",(async()=>await navigator.clipboard.writeText(this.props.installationId))),(0,n.Z)(this,"handleContinue",(()=>{this.onCopy(),(0,a.S9)("Copied to clipboard"),setTimeout((()=>{window.open("https://app.split.io/org/admin/integrations")}),2e3)}))}render(){const{installationId:t,closeModal:e}=this.props;return(0,w.BX)("div",{children:[(0,w.tZ)(I,{children:"Copy this Installation ID and click to continue. You will use it to finish setup on Split.io."}),(0,w.tZ)(I,{children:(0,w.tZ)(v.Z,{onCopy:this.onCopy,children:t})}),(0,w.BX)(A,{children:[(0,w.tZ)(l.ZP,{size:"small",onClick:e,children:"Close"}),(0,w.tZ)(l.ZP,{size:"small",priority:"primary",onClick:this.handleContinue,children:"Copy and Open Link"})]})]})}}_.displayName="SplitInstallationIdModal";const I=(0,i.Z)("div",{target:"e1xepmaa1"})({name:"13ubd8d",styles:"margin:10px"}),A=(0,i.Z)(I,{target:"e1xepmaa0"})({name:"99h030",styles:"text-align:right;& button{margin:5px;}"});class j extends b.Z{constructor(...t){super(...t),(0,n.Z)(this,"tabs",["overview"]),(0,n.Z)(this,"redirectUser",(t=>{const{organization:e}=this.props,{sentryApp:s}=this.state,n={installationId:t.uuid,code:t.code,orgSlug:e.slug};if(s.redirectUrl){const t=(0,y.Yi)(s.redirectUrl,n);window.location.assign(t)}})),(0,n.Z)(this,"handleInstall",(async()=>{const{organization:t}=this.props,{sentryApp:e}=this.state;this.trackIntegrationAnalytics("integrations.installation_start",{integration_status:e.status});const s=await(0,o.G)(this.api,t.slug,e);"installed"===s.status&&this.trackIntegrationAnalytics("integrations.installation_complete",{integration_status:e.status}),e.redirectUrl?this.redirectUser(s):((0,a.S9)((0,u.t)("".concat(e.slug," successfully installed."))),this.setState({appInstalls:[s,...this.state.appInstalls]}),["split","split-dev","split-testing"].includes(e.slug)&&(0,r.openModal)((({closeModal:t})=>(0,w.tZ)(_,{installationId:s.uuid,closeModal:t}))))})),(0,n.Z)(this,"handleUninstall",(async t=>{try{await(0,o.W)(this.api,t),this.trackIntegrationAnalytics("integrations.uninstall_completed",{integration_status:this.sentryApp.status});const e=this.state.appInstalls.filter((t=>t.app.slug!==this.sentryApp.slug));return this.setState({appInstalls:e})}catch(t){return(0,a.Iw)((0,u.t)("Unable to uninstall ".concat(this.sentryApp.name)))}})),(0,n.Z)(this,"recordUninstallClicked",(()=>{const t=this.sentryApp;this.trackIntegrationAnalytics("integrations.uninstall_clicked",{integration_status:t.status})}))}getEndpoints(){const{organization:t,params:{integrationSlug:e}}=this.props;return[["sentryApp","/sentry-apps/".concat(e,"/")],["featureData","/sentry-apps/".concat(e,"/features/")],["appInstalls","/organizations/".concat(t.slug,"/sentry-app-installations/")]]}onLoadAllEndpointsSuccess(){const{organization:t,params:{integrationSlug:e},router:s}=this.props;"internal"!==this.sentryApp.status?(super.onLoadAllEndpointsSuccess(),(0,x.E)(e,"sentry_app_viewed")):s.push("/settings/".concat(t.slug,"/developer-settings/").concat(e,"/"))}get integrationType(){return"sentry_app"}get sentryApp(){return this.state.sentryApp}get description(){return this.state.sentryApp.overview||""}get author(){return this.sentryApp.author}get resourceLinks(){return"published"!==this.sentryApp.status?[]:[{title:"Documentation",url:"https://docs.sentry.io/product/integrations/".concat(this.integrationSlug,"/")}]}get permissions(){return(0,g.A)(this.sentryApp.scopes)}get installationStatus(){return(0,m.Az)(this.install)}get integrationName(){return this.sentryApp.name}get featureData(){return this.state.featureData}get install(){return this.state.appInstalls.find((t=>t.app.slug===this.sentryApp.slug))}renderPermissions(){const t=this.permissions;return Object.keys(t).some((e=>t[e].length>0))?(0,w.BX)(S,{children:[(0,w.tZ)(z,{children:"Permissions"}),t.read.length>0&&(0,w.BX)(k,{children:[(0,w.tZ)(B,{}),(0,w.tZ)(C,{children:(0,u._N)("[read] access to [resources] resources",{read:(0,w.tZ)("strong",{children:"Read"}),resources:t.read.join(", ")})},"read")]}),t.write.length>0&&(0,w.BX)(k,{children:[(0,w.tZ)(B,{}),(0,w.tZ)(C,{children:(0,u._N)("[read] and [write] access to [resources] resources",{read:(0,w.tZ)("strong",{children:"Read"}),write:(0,w.tZ)("strong",{children:"Write"}),resources:t.write.join(", ")})},"write")]}),t.admin.length>0&&(0,w.BX)(k,{children:[(0,w.tZ)(B,{}),(0,w.tZ)(C,{children:(0,u._N)("[admin] access to [resources] resources",{admin:(0,w.tZ)("strong",{children:"Admin"}),resources:t.admin.join(", ")})},"admin")]})]}):null}renderTopButton(t,e){const s=this.install;return s?(0,w.tZ)(c.Z,{disabled:!e,message:(0,u._N)("Are you sure you want to remove the [slug] installation?",{slug:this.integrationSlug}),onConfirm:()=>this.handleUninstall(s),onConfirming:this.recordUninstallClicked,priority:"danger",children:(0,w.BX)(U,{size:"small","data-test-id":"sentry-app-uninstall",children:[(0,w.tZ)(d.JZ,{isCircled:!0,style:{marginRight:(0,h.Z)(.75)}}),(0,u.t)("Uninstall")]})}):e?(0,w.tZ)(P,{"data-test-id":"install-button",disabled:t,onClick:()=>this.handleInstall(),priority:"primary",size:"small",style:{marginLeft:(0,h.Z)(1)},children:(0,u.t)("Accept & Install")}):this.renderRequestIntegrationButton()}renderConfigurations(){return null}}const C=(0,i.Z)("p",{target:"ev1fx9x6"})({name:"1x9ekz7",styles:"margin:0px 6px"}),k=(0,i.Z)("div",{target:"ev1fx9x5"})({name:"zjik7",styles:"display:flex"}),S=(0,i.Z)("div",{target:"ev1fx9x4"})("padding-bottom:",(0,h.Z)(2),";"),z=(0,i.Z)("p",{target:"ev1fx9x3"})("margin-bottom:",(0,h.Z)(1),";font-weight:bold;"),B=(0,i.Z)((t=>(0,w.tZ)(p.Z,{size:7,...t})),{target:"ev1fx9x2"})("margin-top:3px;color:",(t=>t.theme.success),";"),P=(0,i.Z)(l.ZP,{target:"ev1fx9x1"})("margin-left:",(0,h.Z)(1),";"),U=(0,i.Z)(l.ZP,{target:"ev1fx9x0"})("color:",(t=>t.theme.gray300),";background:",(t=>t.theme.background),";border:",(t=>"1px solid ".concat(t.theme.gray300)),";box-sizing:border-box;box-shadow:0px 2px 1px rgba(0, 0, 0, 0.08);border-radius:4px;"),E=(0,Z.Z)(j)},"../node_modules/lodash/_baseInverter.js":(t,e,s)=>{var n=s("../node_modules/lodash/_baseForOwn.js");t.exports=function(t,e,s,i){return n(t,(function(t,n,a){e(i,s(t),n,a)})),i}},"../node_modules/lodash/_createInverter.js":(t,e,s)=>{var n=s("../node_modules/lodash/_baseInverter.js");t.exports=function(t,e){return function(s,i){return n(s,t,e(i),{})}}},"../node_modules/lodash/invertBy.js":(t,e,s)=>{var n=s("../node_modules/lodash/_baseIteratee.js"),i=s("../node_modules/lodash/_createInverter.js"),a=Object.prototype,r=a.hasOwnProperty,o=a.toString,l=i((function(t,e,s){null!=e&&"function"!=typeof e.toString&&(e=o.call(e)),r.call(t,e)?t[e].push(s):t[e]=[s]}),n);t.exports=l}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationIntegrations_sentryAppDetailedView_tsx.13f4f21b6307f46066543e54ea3cda04.js.map