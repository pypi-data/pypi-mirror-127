(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_traceDetails_index_tsx-node_modules_downsample_methods_ASAP_js-node_mod-c5af68"],{"./app/utils/performance/quickTrace/traceFullQuery.tsx":(t,e,r)=>{"use strict";r.d(e,{g:()=>p,H:()=>u});var n=r("../node_modules/react/index.js"),a=r("./app/utils/discover/genericDiscoverQuery.tsx"),o=r("./app/utils/performance/quickTrace/utils.tsx"),s=r("./app/utils/withApi.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c({detailed:t,eventId:e,...r}){const n=(0,o.eF)(r);return n.detailed=t?"1":"0",e&&(n.event_id=e),n}function l({children:t}){return(0,i.tZ)(n.Fragment,{children:t({isLoading:!1,error:null,traces:null,type:"full"})})}function d({traceId:t,start:e,end:r,statsPeriod:n,children:s,...d}){if(!t)return(0,i.tZ)(l,{children:s});const p=(0,o._Z)({start:e,end:r,statsPeriod:n});return(0,i.tZ)(a.ZP,{route:"events-trace/".concat(t),getRequestPayload:c,eventView:p,...d,children:({tableData:t,...e})=>s({traces:t||null,type:"full",...e})})}l.displayName="EmptyTrace",d.displayName="GenericTraceFullQuery";const p=(0,s.Z)((t=>(0,i.tZ)(d,{...t,detailed:!1}))),u=(0,s.Z)((t=>(0,i.tZ)(d,{...t,detailed:!0})))},"./app/utils/performance/quickTrace/traceMetaQuery.tsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>l});var n=r("../node_modules/react/index.js"),a=r("./app/utils/discover/genericDiscoverQuery.tsx"),o=r("./app/utils/performance/quickTrace/utils.tsx"),s=r("./app/utils/withApi.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c({traceId:t,start:e,end:r,statsPeriod:s,children:c,...l}){if(!t)return(0,i.tZ)(n.Fragment,{children:c({isLoading:!1,error:null,meta:null})});const d=(0,o._Z)({start:e,end:r,statsPeriod:s});return(0,i.tZ)(a.ZP,{route:"events-trace-meta/".concat(t),getRequestPayload:o.eF,eventView:d,...l,children:({tableData:t,...e})=>c({meta:t,...e})})}c.displayName="TraceMetaQuery";const l=(0,s.Z)(c)},"./app/views/performance/breadcrumb.tsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>f});var n=r("../node_modules/react/index.js"),a=r("./app/components/breadcrumbs.tsx"),o=r("./app/locale.tsx"),s=r("./app/utils/queryString.tsx"),i=r("./app/views/performance/transactionSummary/tabs.tsx"),c=r("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),l=r("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),d=r("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),p=r("./app/views/performance/transactionSummary/utils.tsx"),u=r("./app/views/performance/vitalDetail/utils.tsx"),h=r("./app/views/performance/utils.tsx"),m=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class g extends n.Component{getCrumbs(){const t=[],{organization:e,location:r,transaction:n,vitalName:a,eventSlug:m,traceSlug:g,transactionComparison:f,tab:v}=this.props,x={pathname:(0,h.de)(e),query:{...r.query,transaction:void 0}};if(t.push({to:x,label:(0,o.t)("Performance"),preserveGlobalSelection:!0}),a){const n=(0,u.i4)({orgSlug:e.slug,vitalName:"fcp",projectID:(0,s.ro)(r.query.project),query:r.query});t.push({to:n,label:(0,o.t)("Vital Detail"),preserveGlobalSelection:!0})}else if(n){const a={orgSlug:e.slug,transaction:n.name,projectID:n.project,query:r.query};switch(v){case i.Z.Tags:{const e=(0,l.vG)(a);t.push({to:e,label:(0,o.t)("Tags"),preserveGlobalSelection:!0});break}case i.Z.Events:{const e=(0,c.xr)(a);t.push({to:e,label:(0,o.t)("All Events"),preserveGlobalSelection:!0});break}case i.Z.WebVitals:{const e=(0,d.Pl)(a);t.push({to:e,label:(0,o.t)("Web Vitals"),preserveGlobalSelection:!0});break}case i.Z.TransactionSummary:default:{const e=(0,p.e1)(a);t.push({to:e,label:(0,o.t)("Transaction Summary"),preserveGlobalSelection:!0})}}}return n&&m?t.push({to:"",label:(0,o.t)("Event Details")}):f?t.push({to:"",label:(0,o.t)("Compare to Baseline")}):g&&t.push({to:"",label:(0,o.t)("Trace View")}),t}render(){return(0,m.tZ)(a.Z,{crumbs:this.getCrumbs()})}}g.displayName="Breadcrumb";const f=g},"./app/views/performance/traceDetails/index.tsx":(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>Xt});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/react/index.js")),o=r("./app/components/noProjectMessage.tsx"),s=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),i=r("./app/components/sentryDocumentTitle.tsx"),c=r("./app/constants/globalSelectionHeader.tsx"),l=r("./app/locale.tsx"),d=r("./app/styles/organization.tsx"),p=r("./app/utils/discover/eventView.tsx"),u=r("./app/utils/performance/quickTrace/traceFullQuery.tsx"),h=r("./app/utils/performance/quickTrace/traceMetaQuery.tsx"),m=r("./app/utils/queryString.tsx"),g=r("./app/utils/withApi.tsx"),f=r("./app/utils/withOrganization.tsx"),v=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),x=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.unscopables.flat-map.js"),r("../node_modules/@sentry/hub/esm/hub.js")),y=r("./app/components/alert.tsx"),Z=r("./app/components/assistant/guideAnchor.tsx"),b=r("./app/components/buttonBar.tsx"),w=r("./app/components/discover/discoverFeature.tsx"),T=r("./app/components/discoverButton.tsx"),S=r("./app/components/events/interfaces/spans/anchorLinkManager.tsx"),D=r("./app/components/events/interfaces/spans/dividerHandlerManager.tsx"),C=r("./app/components/events/interfaces/spans/scrollbarManager.tsx"),j=r("./app/components/layouts/thirds.tsx"),P=r("./app/components/links/externalLink.tsx"),_=r("./app/components/links/link.tsx"),I=r("./app/components/loadingError.tsx"),M=r("./app/components/loadingIndicator.tsx"),q=r("./app/components/performance/waterfall/messageRow.tsx"),k=r("./app/components/performance/waterfall/miniHeader.tsx"),z=r("./app/components/performance/waterfall/utils.tsx"),O=r("./app/components/timeSince.tsx"),A=r("./app/icons/index.tsx"),B=r("./app/utils/createFuzzySearch.tsx"),L=r("./app/utils/formatters.tsx"),F=r("./app/utils/getDynamicText.tsx"),E=r("./app/utils/performance/quickTrace/utils.tsx"),V=r("./app/views/performance/breadcrumb.tsx"),N=r("./app/views/performance/transactionDetails/styles.tsx"),X=r("./app/components/events/eventTags/eventTagsPill.tsx"),H=r("./app/components/events/interfaces/spans/header.tsx"),R=r("./app/components/panels/index.tsx"),G=r("./app/components/pills.tsx"),Q=r("./app/components/searchBar.tsx"),U=r("./app/styles/space.tsx"),W=r("./app/utils.tsx"),$=r("./app/views/performance/transactionSummary/utils.tsx"),K=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),Y=r("./app/components/events/interfaces/spans/spanDetail.tsx");const J=(0,n.Z)("div",{target:"euzgho58"})({name:"7whenc",styles:"display:flex;width:100%"}),tt=(0,n.Z)(Q.Z,{target:"euzgho57"})({name:"1ff36h2",styles:"flex-grow:1"}),et=(0,n.Z)(H.i,{target:"euzgho56"})("position:static;top:auto;border-top:none;border-bottom:1px solid ",(t=>t.theme.border),";"),rt=(0,n.Z)("div",{target:"euzgho55"})("display:grid;grid-template-columns:1fr;grid-gap:",(0,U.Z)(2),";margin-bottom:",(0,U.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints[1]),"){grid-template-columns:minmax(250px, 1fr) minmax(160px, 1fr) 6fr;grid-row-gap:0;}"),nt=(0,n.Z)("div",{target:"euzgho54"})("margin-top:",(0,U.Z)(2),";"),at=(0,n.Z)("div",{target:"euzgho53"})({name:"1wr20zt",styles:"overflow-x:hidden;border-bottom-left-radius:3px;border-bottom-right-radius:3px"}),ot=(0,n.Z)(R.s_,{target:"euzgho52"})({name:"d3v9zr",styles:"overflow:hidden"}),st=(0,n.Z)("span",{target:"euzgho51"})("margin-right:",(0,U.Z)(.75),";display:flex;flex-direction:column;justify-content:center;"),it=(0,n.Z)(G.Z,{target:"euzgho50"})("padding-top:",(0,U.Z)(1.5),";");function ct({location:t,organization:e,transaction:r}){const{tags:n}=r;if(!n||n.length<=0)return null;const a=e.slug,o="/organizations/".concat(a,"/releases/");return(0,K.BX)("tr",{children:[(0,K.tZ)("td",{className:"key",children:"Tags"}),(0,K.tZ)("td",{className:"value",children:(0,K.tZ)(it,{children:n.map(((n,s)=>{const{pathname:i,query:c}=(0,$.e1)({orgSlug:a,transaction:r.transaction,projectID:String(r.project_id),query:{...t.query,query:(0,m.os)(t.query.query,n.key,n.value)}});return(0,K.tZ)(X.Z,{tag:n,projectId:r.project_slug,organization:e,query:c,streamPath:i,releasesPath:o},(0,W.ri)(n.key)?n.key:"tag-pill-".concat(s))}))})})]})}ct.displayName="Tags";var lt=r("./app/components/count.tsx"),dt=r("./app/components/idBadge/projectBadge.tsx"),pt=r("./app/components/performance/waterfall/constants.tsx"),ut=r("./app/components/performance/waterfall/row.tsx"),ht=r("./app/components/performance/waterfall/rowBar.tsx"),mt=r("./app/components/performance/waterfall/rowDivider.tsx"),gt=r("./app/components/performance/waterfall/rowTitle.tsx"),ft=r("./app/components/performance/waterfall/treeConnector.tsx"),vt=r("./app/components/tooltip.tsx"),xt=r("./app/utils/projects.tsx"),yt=r("../node_modules/react-router/es/index.js"),Zt=r("../node_modules/lodash/omit.js"),bt=r.n(Zt),wt=r("./app/components/button.tsx"),Tt=r("./app/components/dateTime.tsx"),St=r("./app/components/performance/waterfall/rowDetails.tsx"),Dt=r("./app/components/quickTrace/utils.tsx"),Ct=r("./app/utils/discover/urls.tsx"),jt=r("./app/utils/performance/vitals/constants.tsx"),Pt=r("./app/views/performance/utils.tsx");class _t extends a.Component{constructor(...t){super(...t),(0,v.Z)(this,"scrollBarIntoView",(t=>e=>{e.preventDefault();const r="#txn-".concat(t);this.props.scrollToHash(r),yt.browserHistory.push({...this.props.location,hash:r})}))}renderTransactionErrors(){const{organization:t,transaction:e}=this.props,{errors:r}=e;return 0===r.length?null:(0,K.tZ)(y.Z,{system:!0,type:"error",icon:(0,K.tZ)(A.FC,{size:"md"}),expand:r.map((e=>(0,K.BX)(St.TV,{children:[(0,K.tZ)(St._U,{level:e.level}),(0,K.tZ)(St.wE,{children:e.level}),(0,K.tZ)(St.St,{children:(0,K.tZ)(_.Z,{to:(0,Dt.F7)(e,t),children:e.title})})]},e.event_id))),children:(0,K.tZ)(St.CM,{children:(0,l.tn)("An error event occurred in this transaction.","%s error events occurred in this transaction.",r.length)})})}renderGoToTransactionButton(){const{location:t,organization:e,transaction:r}=this.props,n=(0,Ct.JE)({id:r.event_id,project:r.project_slug}),a=(0,Pt.DD)(e,n,r.transaction,bt()(t.query,Object.values(c.V)));return(0,K.tZ)(qt,{size:"xsmall",to:a,children:(0,l.t)("View Transaction")})}renderGoToSummaryButton(){const{location:t,organization:e,transaction:r}=this.props,n=(0,$.e1)({orgSlug:e.slug,transaction:r.transaction,query:bt()(t.query,Object.values(c.V)),projectID:String(r.project_id)});return(0,K.tZ)(qt,{size:"xsmall",to:n,children:(0,l.t)("View Summary")})}renderMeasurements(){const{transaction:t}=this.props,{measurements:e={}}=t,r=Object.keys(e).filter((t=>Boolean(jt.r["measurements.".concat(t)]))).sort();return r.length<=0?null:(0,K.tZ)(a.Fragment,{children:r.map((t=>{var r;return(0,K.tZ)(Y.X2,{title:null===(r=jt.r["measurements.".concat(t)])||void 0===r?void 0:r.name,children:"".concat(Number(e[t].value.toFixed(3)).toLocaleString(),"ms")},t)}))})}renderTransactionDetail(){const{location:t,organization:e,transaction:r}=this.props,n=Math.min(r.start_timestamp,r.timestamp),o=Math.max(r.start_timestamp,r.timestamp),s="".concat(Number((1e3*(o-n)).toFixed(3)).toLocaleString(),"ms");return(0,K.tZ)(Y.iF,{children:(0,K.tZ)("table",{className:"table key-value",children:(0,K.BX)("tbody",{children:[(0,K.tZ)(Y.X2,{title:(0,K.BX)(It,{onClick:this.scrollBarIntoView(r.event_id),children:["Transaction ID",(0,K.tZ)(Mt,{})]}),extra:this.renderGoToTransactionButton(),children:r.event_id}),(0,K.tZ)(Y.X2,{title:"Transaction",extra:this.renderGoToSummaryButton(),children:r.transaction}),(0,K.tZ)(Y.X2,{title:"Transaction Status",children:r["transaction.status"]}),(0,K.tZ)(Y.X2,{title:"Span ID",children:r.span_id}),(0,K.tZ)(Y.X2,{title:"Project",children:r.project_slug}),(0,K.tZ)(Y.X2,{title:"Start Date",children:(0,F.Z)({fixed:"Mar 19, 2021 11:06:27 AM UTC",value:(0,K.BX)(a.Fragment,{children:[(0,K.tZ)(Tt.Z,{date:1e3*n})," (".concat(n,")")]})})}),(0,K.tZ)(Y.X2,{title:"End Date",children:(0,F.Z)({fixed:"Mar 19, 2021 11:06:28 AM UTC",value:(0,K.BX)(a.Fragment,{children:[(0,K.tZ)(Tt.Z,{date:1e3*o})," (".concat(o,")")]})})}),(0,K.tZ)(Y.X2,{title:"Duration",children:s}),(0,K.tZ)(Y.X2,{title:"Operation",children:r["transaction.op"]||""}),this.renderMeasurements(),(0,K.tZ)(ct,{location:t,organization:e,transaction:r})]})})})}render(){return(0,K.BX)(Y.wh,{onClick:t=>{t.stopPropagation()},children:[this.renderTransactionErrors(),this.renderTransactionDetail()]})}}_t.displayName="TransactionDetail";const It=(0,n.Z)("a",{target:"eykqe522"})("display:flex;color:",(t=>t.theme.textColor),";:hover{color:",(t=>t.theme.textColor),";}"),Mt=(0,n.Z)(A.rS,{target:"eykqe521"})("display:block;color:",(t=>t.theme.gray300),";margin-left:",(0,U.Z)(1),";"),qt=(0,n.Z)(wt.ZP,{target:"eykqe520"})("position:absolute;top:",(0,U.Z)(.75),";right:",(0,U.Z)(.5),";"),kt=_t;class zt extends a.Component{constructor(...t){super(...t),(0,v.Z)(this,"state",{showDetail:!1}),(0,v.Z)(this,"transactionRowDOMRef",a.createRef()),(0,v.Z)(this,"toggleDisplayDetail",(()=>{const{transaction:t}=this.props;(0,E.Ci)(t)&&this.setState((t=>({showDetail:!t.showDetail})))})),(0,v.Z)(this,"scrollIntoView",(()=>{const t=this.transactionRowDOMRef.current;if(!t)return;const e=t.getBoundingClientRect().top+window.scrollY;this.setState({showDetail:!0},(()=>window.scrollTo(0,e)))}))}getCurrentOffset(){const{transaction:t}=this.props,{generation:e}=t;return Ot(e)}renderConnector(t){const{continuingDepths:e,isExpanded:r,isOrphan:n,isLast:a,transaction:o}=this.props,{generation:s}=o,i=(0,E.Ci)(o)?o.event_id:o.traceSlug;if(0===s)return t?(0,K.tZ)(ft.UV,{style:{right:"16px",height:"10px",bottom:"-5px",top:"auto"},orphanBranch:!1}):null;const c=e.map((({depth:t,isOrphanDepth:e})=>{if(s-t<=1)return null;const r=-1*Ot(s-t-1)-1;return(0,K.tZ)(ft.UV,{style:{left:r},orphanBranch:e},"".concat(i,"-").concat(t))}));return t&&r&&c.push((0,K.tZ)(ft.UV,{style:{right:"16px",height:"10px",bottom:a?"-".concat(pt.d/2,"px"):"0",top:"auto"},orphanBranch:!1},"".concat(i,"-last"))),(0,K.tZ)(ft.DN,{isLast:a,hasToggler:t,orphanBranch:n,children:c})}renderToggle(t){const{isExpanded:e,transaction:r,toggleExpandedState:n}=this.props,{children:a,generation:o}=r,s=this.getCurrentOffset();if(a.length<=0)return(0,K.tZ)(ft.rw,{style:{left:"".concat(s,"px")},children:this.renderConnector(!1)});const i=0===o;return(0,K.BX)(ft.rw,{style:{left:"".concat(s,"px")},hasToggler:!0,children:[this.renderConnector(!0),(0,K.BX)(ft.U1,{disabled:i,isExpanded:e,errored:t,onClick:t=>{t.stopPropagation(),i||n()},children:[(0,K.tZ)(lt.Z,{value:a.length}),!i&&(0,K.tZ)("div",{children:(0,K.tZ)(ft.jd,{direction:e?"up":"down"})})]})]})}renderTitle(t){const{generateContentSpanBarRef:e}=t,{organization:r,transaction:n}=this.props,o=this.getCurrentOffset(),s=!!(0,E.Ci)(n)&&n.errors.length>0,i=(0,E.Ci)(n)?(0,K.BX)(a.Fragment,{children:[(0,K.tZ)(xt.Z,{orgId:r.slug,slugs:[n.project_slug],children:({projects:t})=>{const e=t.find((t=>t.slug===n.project_slug));return(0,K.tZ)(st,{children:(0,K.tZ)(vt.Z,{title:n.project_slug,children:(0,K.tZ)(dt.Z,{project:e||{slug:n.project_slug},avatarSize:16,hideName:!0})})})}}),(0,K.BX)(gt.rv,{errored:s,children:[(0,K.BX)("strong",{children:[n["transaction.op"]," — "]}),n.transaction]})]}):(0,K.BX)(gt.rv,{errored:!1,children:[(0,K.tZ)("strong",{children:"Trace — "}),n.traceSlug]});return(0,K.BX)(gt.mw,{ref:e(),children:[this.renderToggle(s),(0,K.tZ)(gt.Wh,{style:{left:"".concat(o,"px"),width:"100%"},children:i})]})}renderDivider(t){if(this.state.showDetail)return(0,K.tZ)(mt.xN,{showDetail:!0,style:{position:"absolute"}});const{addDividerLineRef:e}=t;return(0,K.tZ)(mt.xN,{ref:e(),style:{position:"absolute"},onMouseEnter:()=>{t.setHover(!0)},onMouseLeave:()=>{t.setHover(!1)},onMouseOver:()=>{t.setHover(!0)},onMouseDown:t.onDragStart,onClick:t=>{t.stopPropagation()}})}renderGhostDivider(t){const{dividerPosition:e,addGhostDividerLineRef:r}=t;return(0,K.tZ)(mt.Hr,{style:{width:"calc(".concat((0,z.yI)(e)," + 0.5px)"),display:"none"},children:(0,K.tZ)(mt.xN,{ref:r(),style:{right:0},className:"hovering",onClick:t=>{t.stopPropagation()}})})}renderErrorBadge(){const{transaction:t}=this.props;return(0,E.Ci)(t)&&t.errors.length?(0,K.tZ)(mt.cS,{}):null}renderRectangle(){const{transaction:t,traceInfo:e,barColor:r}=this.props,{showDetail:n}=this.state,a=Math.abs(e.endTimestamp-e.startTimestamp)||1,o=Math.abs(t.start_timestamp-e.startTimestamp)/a,s=Math.abs(t.timestamp-t.start_timestamp),i=s/a;return(0,K.tZ)(ht.e,{spanBarHatch:!1,style:{backgroundColor:r,left:"min(".concat((0,z.yI)(o||0),", calc(100% - 1px))"),width:(0,z.yI)(i||0)},children:(0,K.tZ)(ht.R,{durationDisplay:(0,z.ud)({left:o,width:i}),showDetail:n,spanBarHatch:!1,children:(0,z.bQ)(s)})})}renderHeader({dividerHandlerChildrenProps:t,scrollbarManagerChildrenProps:e}){const{hasGuideAnchor:r,index:n}=this.props,{showDetail:a}=this.state,{dividerPosition:o}=t;return(0,K.BX)(ut.Qc,{showDetail:a,children:[(0,K.tZ)(ut.E5,{"data-test-id":"transaction-row-title","data-type":"span-row-cell",style:{width:"calc(".concat((0,z.yI)(o)," - 0.5px)"),paddingTop:0},showDetail:a,onClick:this.toggleDisplayDetail,children:(0,K.tZ)(Z.Z,{target:"trace_view_guide_row",disabled:!r,children:this.renderTitle(e)})}),(0,K.BX)(mt.kP,{children:[this.renderDivider(t),this.renderErrorBadge()]}),(0,K.tZ)(ut.E5,{"data-test-id":"transaction-row-duration","data-type":"span-row-cell",showStriping:n%2!=0,style:{width:"calc(".concat((0,z.yI)(1-o)," - 0.5px)"),paddingTop:0},showDetail:a,onClick:this.toggleDisplayDetail,children:(0,K.tZ)(Z.Z,{target:"trace_view_guide_row_details",disabled:!r,children:this.renderRectangle()})}),!a&&this.renderGhostDivider(t)]})}renderDetail(){const{location:t,organization:e,isVisible:r,transaction:n}=this.props,{showDetail:a}=this.state;return(0,K.tZ)(S.$,{children:({registerScrollFn:o,scrollToHash:s})=>(0,E.Ci)(n)?(o("#txn-".concat(n.event_id),this.scrollIntoView),r&&a?(0,K.tZ)(kt,{location:t,organization:e,transaction:n,scrollToHash:s}):null):null})}render(){const{isVisible:t,transaction:e}=this.props,{showDetail:r}=this.state;return(0,K.BX)(ut.X2,{ref:this.transactionRowDOMRef,visible:t,showBorder:r,cursor:(0,E.Ci)(e)?"pointer":"default",children:[(0,K.tZ)(C.$6,{children:t=>(0,K.tZ)(D.$,{children:e=>this.renderHeader({dividerHandlerChildrenProps:e,scrollbarManagerChildrenProps:t})})}),this.renderDetail()]})}}function Ot(t){return t*(ft.Ll/2)+0}zt.displayName="TransactionBar";const At=zt;class Bt extends a.Component{constructor(...t){super(...t),(0,v.Z)(this,"state",{isExpanded:!0}),(0,v.Z)(this,"toggleExpandedState",(()=>{this.setState((({isExpanded:t})=>({isExpanded:!t})))}))}componentDidUpdate(t,e){e.isExpanded!==this.state.isExpanded&&this.props.updateScrollState()}render(){const{location:t,organization:e,transaction:r,traceInfo:n,continuingDepths:o,isOrphan:s,isLast:i,index:c,isVisible:l,hasGuideAnchor:d,renderedChildren:p,barColor:u}=this.props,{isExpanded:h}=this.state;return(0,K.BX)(a.Fragment,{children:[(0,K.tZ)(At,{location:t,organization:e,index:c,transaction:r,traceInfo:n,continuingDepths:o,isOrphan:s,isLast:i,isExpanded:h,toggleExpandedState:this.toggleExpandedState,isVisible:l,hasGuideAnchor:d,barColor:u}),h&&p]})}}Bt.displayName="TransactionGroup";const Lt=(0,C.Iw)(Bt);var Ft=r("./app/views/performance/traceDetails/utils.tsx");class Et extends a.Component{constructor(...t){super(...t),(0,v.Z)(this,"state",{searchQuery:void 0,filteredTransactionIds:void 0}),(0,v.Z)(this,"traceViewRef",a.createRef()),(0,v.Z)(this,"virtualScrollbarContainerRef",a.createRef()),(0,v.Z)(this,"handleTransactionFilter",(t=>{this.setState({searchQuery:t||void 0},this.filterTransactions)})),(0,v.Z)(this,"filterTransactions",(async()=>{const{traces:t}=this.props,{filteredTransactionIds:e,searchQuery:r}=this.state;if(!r||null===t||t.length<=0)return void(void 0!==e&&this.setState({filteredTransactionIds:void 0}));const n=t.flatMap((t=>(0,E.S2)(t,((t,e)=>{const r=[e["transaction.op"],e.transaction,e.project_slug];return t.push({transaction:e,indexed:r}),t}),[]))),a=(await(0,B.I)(n,{keys:["indexed"],includeMatches:!0,threshold:.6,location:0,distance:100,maxPatternLength:32})).search(r).filter((({matches:t})=>t.length)).map((({item:t})=>t.transaction.event_id)),o=t.flatMap((t=>(0,E.xB)(t,(({event_id:t,span_id:e})=>t.includes(r)||e.includes(r))))).map((t=>t.event_id));this.setState({filteredTransactionIds:new Set([...a,...o])})})),(0,v.Z)(this,"isTransactionVisible",(t=>{const{filteredTransactionIds:e}=this.state;return!e||e.has(t.event_id)}))}renderTraceLoading(){return(0,K.tZ)(M.Z,{})}renderTraceRequiresDateRangeSelection(){return(0,K.tZ)(I.Z,{message:(0,l.t)("Trace view requires a date range selection.")})}renderTraceNotFound(){var t,e;const{meta:r}=this.props,n=null!==(t=null==r?void 0:r.transactions)&&void 0!==t?t:0,a=null!==(e=null==r?void 0:r.errors)&&void 0!==e?e:0;return 0===n&&a>0?(0,K.tZ)(I.Z,{message:(0,l.t)("The trace you are looking contains only errors.")}):(0,K.tZ)(I.Z,{message:(0,l.t)("The trace you are looking for was not found.")})}renderSearchBar(){return(0,K.tZ)(J,{children:(0,K.tZ)(tt,{defaultQuery:"",query:this.state.searchQuery||"",placeholder:(0,l.t)("Search for transactions"),onSearch:this.handleTransactionFilter})})}renderTraceHeader(t){var e,r,n;const{meta:a}=this.props;return(0,K.BX)(rt,{children:[(0,K.tZ)(Z.Z,{target:"trace_view_guide_breakdown",children:(0,K.tZ)(N.U,{headingText:(0,l.t)("Event Breakdown"),tooltipText:(0,l.t)("The number of transactions and errors there are in this trace."),bodyText:(0,l._N)("[transactions]  |  [errors]",{transactions:(0,l.tn)("%s Transaction","%s Transactions",null!==(e=null==a?void 0:a.transactions)&&void 0!==e?e:t.transactions.size),errors:(0,l.tn)("%s Error","%s Errors",null!==(r=null==a?void 0:a.errors)&&void 0!==r?r:t.errors.size)}),subtext:(0,l.tn)("Across %s project","Across %s projects",null!==(n=null==a?void 0:a.projects)&&void 0!==n?n:t.projects.size)})}),(0,K.tZ)(N.U,{headingText:(0,l.t)("Total Duration"),tooltipText:(0,l.t)("The time elapsed between the start and end of this trace."),bodyText:(0,L.g9)(t.endTimestamp-t.startTimestamp,2,!0),subtext:(0,F.Z)({value:(0,K.tZ)(O.Z,{date:1e3*(t.endTimestamp||0)}),fixed:"5 days ago"})})]})}renderTraceWarnings(){const{traces:t}=this.props,{roots:e,orphans:r}=(null!=t?t:[]).reduce(((t,e)=>((0,Ft.uM)(e)?t.roots++:t.orphans++,t)),{roots:0,orphans:0});let n=null;return 0===e&&r>0?n=(0,K.tZ)(y.Z,{type:"info",icon:(0,K.tZ)(A.aU,{size:"sm"}),children:(0,K.tZ)(P.Z,{href:"https://docs.sentry.io/product/performance/trace-view/#orphan-traces-and-broken-subtraces",children:(0,l.t)("A root transaction is missing. Transactions linked by a dashed line have been orphaned and cannot be directly linked to the root.")})}):1===e&&r>0?n=(0,K.tZ)(y.Z,{type:"info",icon:(0,K.tZ)(A.aU,{size:"sm"}),children:(0,K.tZ)(P.Z,{href:"https://docs.sentry.io/product/performance/trace-view/#orphan-traces-and-broken-subtraces",children:(0,l.t)("This trace has broken subtraces. Transactions linked by a dashed line have been orphaned and cannot be directly linked to the root.")})}):e>1&&(n=(0,K.tZ)(y.Z,{type:"info",icon:(0,K.tZ)(A.aU,{size:"sm"}),children:(0,K.tZ)(P.Z,{href:"https://docs.sentry.io/product/performance/trace-view/#multiple-roots",children:(0,l.t)("Multiple root transactions have been found with this trace ID.")})})),n}renderInfoMessage({isVisible:t,numberOfHiddenTransactionsAbove:e}){const r=[];return t&&(1===e?r.push((0,K.tZ)("span",{children:(0,l._N)("[numOfTransaction] hidden transaction",{numOfTransaction:(0,K.tZ)("strong",{children:e})})},"stuff")):e>1&&r.push((0,K.tZ)("span",{children:(0,l._N)("[numOfTransaction] hidden transactions",{numOfTransaction:(0,K.tZ)("strong",{children:e})})},"stuff"))),r.length<=0?null:(0,K.tZ)(q.V,{children:r})}renderLimitExceededMessage(t){var e;const{traceEventView:r,organization:n,meta:a}=this.props,o=t.transactions.size,s=null!==(e=null==a?void 0:a.transactions)&&void 0!==e?e:o;if(null===s||o>=s)return null;const i=r.getResultsViewUrlTarget(n.slug);return(0,K.tZ)(q.V,{children:(0,l._N)("Limited to a view of [count] transactions. To view the full list, [discover].",{count:o,discover:(0,K.tZ)(w.Z,{children:({hasFeature:t})=>(0,K.tZ)(_.Z,{disabled:!t,to:i,children:"Open in Discover"})})})})}renderTransaction(t,{continuingDepths:e,isOrphan:r,isLast:n,index:o,numberOfHiddenTransactionsAbove:s,traceInfo:i,hasGuideAnchor:c}){const{location:l,organization:d}=this.props,{children:p,event_id:u}=t,h=t.generation+1,m=this.isTransactionVisible(t),g=p.reduce(((t,n,a)=>{const o=a===p.length-1,s=n.children.length>0,c=this.renderTransaction(n,{continuingDepths:!o&&s?[...e,{depth:h,isOrphanDepth:r}]:e,isOrphan:r,isLast:o,index:t.lastIndex+1,numberOfHiddenTransactionsAbove:t.numberOfHiddenTransactionsAbove,traceInfo:i,hasGuideAnchor:!1});return t.lastIndex=c.lastIndex,t.numberOfHiddenTransactionsAbove=c.numberOfHiddenTransactionsAbove,t.renderedChildren.push(c.transactionGroup),t}),{renderedChildren:[],lastIndex:o,numberOfHiddenTransactionsAbove:m?0:s+1});return{transactionGroup:(0,K.BX)(a.Fragment,{children:[this.renderInfoMessage({isVisible:m,numberOfHiddenTransactionsAbove:s}),(0,K.tZ)(Lt,{location:l,organization:d,traceInfo:i,transaction:{...t,generation:h},continuingDepths:e,isOrphan:r,isLast:n,index:o,isVisible:m,hasGuideAnchor:c,renderedChildren:g.renderedChildren,barColor:(0,z.hd)(t["transaction.op"])})]},u),lastIndex:g.lastIndex,numberOfHiddenTransactionsAbove:g.numberOfHiddenTransactionsAbove}}renderTraceView(t){var e;const r=null===(e=x.Gd().getScope())||void 0===e?void 0:e.getTransaction(),n=null==r?void 0:r.startChild({op:"trace.render",description:"trace-view-content"}),{location:a,organization:o,traces:s,traceSlug:i}=this.props;if(null===s||s.length<=0)return this.renderTraceNotFound();const c={index:1,numberOfHiddenTransactionsAbove:0,traceInfo:t,transactionGroups:[]},{transactionGroups:l,numberOfHiddenTransactionsAbove:d}=s.reduce(((t,e,r)=>{const n=r===s.length-1,a=e.children.length>0,o=!n&&null!==s[r+1].parent_span_id,i=this.renderTransaction(e,{...t,isOrphan:!(0,Ft.uM)(e),isLast:n,continuingDepths:!n&&a?[{depth:0,isOrphanDepth:o}]:[],hasGuideAnchor:0===r});return t.index=i.lastIndex+1,t.numberOfHiddenTransactionsAbove=i.numberOfHiddenTransactionsAbove,t.transactionGroups.push(i.transactionGroup),t}),c),p=(0,K.tZ)(nt,{children:(0,K.tZ)(D.z,{interactiveLayerRef:this.traceViewRef,children:(0,K.tZ)(D.$,{children:({dividerPosition:e})=>(0,K.tZ)(C.zt,{dividerPosition:e,interactiveLayerRef:this.virtualScrollbarContainerRef,children:(0,K.BX)(ot,{children:[(0,K.BX)(et,{children:[(0,K.tZ)(C.$6,{children:({virtualScrollbarRef:t,scrollBarAreaRef:r,onDragStart:n,onScroll:a})=>(0,K.BX)(k.cs,{ref:this.virtualScrollbarContainerRef,style:{width:"calc(".concat((0,z.yI)(e)," - 0.5px)")},onScroll:a,children:[(0,K.tZ)("div",{style:{width:0,height:"1px"},ref:r}),(0,K.tZ)(k.Qk,{"data-type":"virtual-scrollbar",ref:t,onMouseDown:n,children:(0,K.tZ)(k.v6,{})})]})}),(0,K.tZ)(k._i,{})]}),(0,K.BX)(at,{ref:this.traceViewRef,children:[(0,K.tZ)(S.z,{children:(0,K.tZ)(Lt,{location:a,organization:o,traceInfo:t,transaction:{traceSlug:i,generation:0,"transaction.duration":t.endTimestamp-t.startTimestamp,children:s,start_timestamp:t.startTimestamp,timestamp:t.endTimestamp},continuingDepths:[],isOrphan:!1,isLast:!1,index:0,isVisible:!0,hasGuideAnchor:!1,renderedChildren:l,barColor:(0,z.hd)("")})}),this.renderInfoMessage({isVisible:!0,numberOfHiddenTransactionsAbove:d}),this.renderLimitExceededMessage(t)]})]})})})})});return null==n||n.finish(),p}renderContent(){const{dateSelected:t,isLoading:e,error:r,traces:n}=this.props;if(!t)return this.renderTraceRequiresDateRangeSelection();if(e)return this.renderTraceLoading();if(null!==r||null===n||n.length<=0)return this.renderTraceNotFound();const o=(0,Ft.Rg)(n);return(0,K.BX)(a.Fragment,{children:[this.renderTraceWarnings(),this.renderTraceHeader(o),this.renderSearchBar(),this.renderTraceView(o)]})}render(){const{organization:t,location:e,traceEventView:r,traceSlug:n}=this.props;return(0,K.BX)(a.Fragment,{children:[(0,K.BX)(j.h4,{children:[(0,K.BX)(j.oB,{children:[(0,K.tZ)(V.Z,{organization:t,location:e,traceSlug:n}),(0,K.tZ)(j.Dx,{"data-test-id":"trace-header",children:(0,l.t)("Trace ID: %s",n)})]}),(0,K.tZ)(j.kP,{children:(0,K.tZ)(b.ZP,{gap:1,children:(0,K.tZ)(T.Z,{to:r.getResultsViewUrlTarget(t.slug),children:"Open in Discover"})})})]}),(0,K.tZ)(j.uT,{children:(0,K.tZ)(j.or,{fullWidth:!0,children:this.renderContent()})})]})}}Et.displayName="TraceDetailsContent";const Vt=Et;class Nt extends a.Component{getDocumentTitle(){return[(0,l.t)("Trace Details"),(0,l.t)("Performance")].join(" - ")}getTraceSlug(){const{traceSlug:t}=this.props.params;return"string"==typeof t?t.trim():""}getDateSelection(){const{location:t}=this.props,e=(0,s.Q)(t.query,{allowAbsolutePageDatetime:!0});return{start:(0,m.ro)(e.start),end:(0,m.ro)(e.end),statsPeriod:(0,m.ro)(e.statsPeriod)}}getTraceEventView(){const t=this.getTraceSlug(),{start:e,end:r,statsPeriod:n}=this.getDateSelection();return p.ZP.fromSavedQuery({id:void 0,name:"Events with Trace ID ".concat(t),fields:["title","event.type","project","timestamp"],orderby:"-timestamp",query:"trace:".concat(t),projects:[c.mP],version:2,start:e,end:r,range:n})}renderContent(){const{location:t,organization:e,params:r}=this.props,n=this.getTraceSlug(),{start:a,end:o,statsPeriod:s}=this.getDateSelection(),i=Boolean(s||a&&o),c=({isLoading:a,error:o,traces:s,meta:c})=>(0,K.tZ)(Vt,{location:t,organization:e,params:r,traceSlug:n,traceEventView:this.getTraceEventView(),dateSelected:i,isLoading:a,error:o,traces:s,meta:c});return i?(0,K.tZ)(u.H,{location:t,orgSlug:e.slug,traceId:n,start:a,end:o,statsPeriod:s,children:r=>(0,K.tZ)(h.Z,{location:t,orgSlug:e.slug,traceId:n,start:a,end:o,statsPeriod:s,children:t=>c({isLoading:r.isLoading||t.isLoading,error:r.error||t.error,traces:r.traces,meta:t.meta})})}):c({isLoading:!1,error:"date selection not specified",traces:null,meta:null})}render(){const{organization:t}=this.props;return(0,K.tZ)(i.Z,{title:this.getDocumentTitle(),orgSlug:t.slug,children:(0,K.tZ)(Ht,{children:(0,K.tZ)(o.Z,{organization:t,children:this.renderContent()})})})}}Nt.displayName="TraceSummary";const Xt=(0,f.Z)((0,g.Z)(Nt)),Ht=(0,n.Z)(d.JH,{target:"eqzhpg90"})({name:"1hcx8jb",styles:"padding:0"})},"./app/views/performance/transactionDetails/styles.tsx":(t,e,r)=>{"use strict";r.d(e,{U:()=>l});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/react/index.js"),r("./app/components/charts/styles.tsx")),o=r("./app/components/featureBadge.tsx"),s=r("./app/components/questionTooltip.tsx"),i=r("./app/styles/space.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l({headingText:t,tooltipText:e,bodyText:r,subtext:n,badge:a}){return(0,c.BX)(d,{children:[(0,c.BX)(p,{children:[t,(0,c.tZ)(s.Z,{position:"top",size:"sm",containerDisplayMode:"block",title:e}),a&&(0,c.tZ)(h,{type:a})]}),(0,c.tZ)(u,{children:r}),(0,c.tZ)(m,{children:n})]})}l.displayName="MetaData";const d=(0,n.Z)("div",{target:"eqz9f144"})({name:"4ks2md",styles:"height:78px"}),p=(0,n.Z)(a.OT,{target:"eqz9f143"})({name:"ti75j2",styles:"margin:0"}),u=(0,n.Z)("div",{target:"eqz9f142"})("font-size:",(t=>t.theme.fontSizeExtraLarge),";padding:",(0,i.Z)(.5)," 0;max-height:32px;"),h=(0,n.Z)(o.Z,{target:"eqz9f141"})({name:"ti75j2",styles:"margin:0"}),m=(0,n.Z)("div",{target:"eqz9f140"})("color:",(t=>"error"===t.type?t.theme.error:t.theme.subText),";font-size:",(t=>t.theme.fontSizeMedium),";")},"./app/views/performance/transactionSummary/tabs.tsx":(t,e,r)=>{"use strict";var n;r.d(e,{Z:()=>a}),function(t){t[t.TransactionSummary=0]="TransactionSummary",t[t.WebVitals=1]="WebVitals",t[t.Tags=2]="Tags",t[t.Events=3]="Events",t[t.Spans=4]="Spans"}(n||(n={}));const a=n},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(t,e,r)=>{"use strict";r.d(e,{q3:()=>i,_S:()=>c,xr:()=>l,tb:()=>d,qg:()=>p,Zq:()=>u});var n=r("./app/locale.tsx"),a=r("./app/utils/queryString.tsx"),o=r("./app/views/performance/transactionSummary/filter.tsx"),s=r("./app/views/performance/transactionSummary/utils.tsx");let i;function c(t,e){const{p99:r,p95:a,p75:s,p50:c}=e||{p99:0,p95:0,p75:0,p50:0};return{[i.p50]:{name:i.p50,query:c?[["transaction.duration","<=".concat(c.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,o.T$)(t)||"transaction.duration"},label:(0,n.t)("p50")},[i.p75]:{name:i.p75,query:s?[["transaction.duration","<=".concat(s.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,o.T$)(t)||"transaction.duration"},label:(0,n.t)("p75")},[i.p95]:{name:i.p95,query:a?[["transaction.duration","<=".concat(a.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,o.T$)(t)||"transaction.duration"},label:(0,n.t)("p95")},[i.p99]:{name:i.p99,query:r?[["transaction.duration","<=".concat(r.toFixed(0))]]:void 0,sort:{kind:"desc",field:(0,o.T$)(t)||"transaction.duration"},label:(0,n.t)("p99")},[i.p100]:{name:i.p100,label:(0,n.t)("p100")}}}function l({orgSlug:t,transaction:e,projectID:r,query:n}){return{pathname:"/organizations/".concat(t,"/performance/summary/events/"),query:{transaction:e,project:r,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query}}}function d(t){return e=(0,a.ro)(t.query.showTransactions,i.p100),Object.values(i).includes(e)?e:i.p100;var e}function p(t,e){var r,n;const a=c(e),o=null===(r=a[t].sort)||void 0===r?void 0:r.kind,s=null===(n=a[t].sort)||void 0===n?void 0:n.field,i={showTransactions:t};return o&&s&&(i.sort="".concat("desc"===o?"-":"").concat(s)),i}function u(t){switch(t){case s.K0.OUTLIER:return i.p100;case s.K0.SLOW:return i.p95;default:return}}!function(t){t.p50="p50",t.p75="p75",t.p95="p95",t.p99="p99",t.p100="p100"}(i||(i={}))},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(t,e,r)=>{"use strict";r.d(e,{Zn:()=>o,bZ:()=>s,vG:()=>i,oc:()=>c,oT:()=>l});var n=r("./app/utils/analytics.tsx"),a=r("./app/utils/queryString.tsx");function o(t){return(0,a.ro)(t.query.tagKey)}function s(t){(0,n.ec)({eventKey:"performance_views.tags.interaction",eventName:"Performance Views: Tag Page - Interaction",organization_id:parseInt(t.id,10)})}function i({orgSlug:t,transaction:e,projectID:r,query:n}){return{pathname:function({orgSlug:t}){return"/organizations/".concat(t,"/performance/summary/tags/")}({orgSlug:t}),query:{transaction:e,project:r,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query,tagKey:n.tagKey}}}function c(t){var e,r;let n=null!==(e=(0,a.ro)(null===(r=t.query)||void 0===r?void 0:r.tagSort))&&void 0!==e?e:"-frequency";return["sumdelta"].find((t=>{var e;return null===(e=n)||void 0===e?void 0:e.includes(t)}))&&(n="-frequency"),n}function l(t){const e=Object.keys(t).find((t=>t.includes("histogram")));if(!e)return;const r=e.split("_");return{histogramField:e,bucketSize:parseInt(r[r.length-3],10),offset:parseInt(r[r.length-2],10),multiplier:parseInt(r[r.length-1],10)}}},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(t,e,r)=>{"use strict";r.d(e,{Pl:()=>a,oZ:()=>o,eH:()=>s,L0:()=>i,jb:()=>c});var n=r("./app/utils/performance/histogram/utils.tsx");function a({orgSlug:t,transaction:e,projectID:r,query:n}){return{pathname:function({orgSlug:t}){return"/organizations/".concat(t,"/performance/summary/vitals/")}({orgSlug:t}),query:{transaction:e,project:r,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query}}}function o(t,e){const r=(0,n.te)(t);return!t.length||e>=t[t.length-1].bin+r?null:e<t[0].bin?-1:Math.floor((e-t[0].bin)/r)}function s(t){if(t.length<2)return null;for(let e=0;e<t.length;e++){const r=t[e];for(let n=e+1;n<t.length;n++){const a=t[n];if(r.bin!==a.bin&&r.count!==a.count)return{point1:{x:e,y:Math.min(r.count,a.count)},point2:{x:n,y:Math.max(r.count,a.count)}}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function i(t,e){const r=t.convertToPixel({xAxisIndex:0,yAxisIndex:0},[e.point1.x,e.point1.y]);if(isNaN(null==r?void 0:r[0])||isNaN(null==r?void 0:r[1]))return null;const n=t.convertToPixel({xAxisIndex:0,yAxisIndex:0},[e.point2.x,e.point2.y]);return isNaN(null==n?void 0:n[0])||isNaN(null==n?void 0:n[1])?null:{point1:{x:r[0],y:r[1]},point2:{x:n[0],y:n[1]}}}function c(t,e,r){if(e.point1.x===e.point2.x||e.point1.y===e.point2.y||r.point1.x===r.point2.x||r.point1.y===r.point2.y)return null;const n=(t.x-e.point1.x)/(e.point2.x-e.point1.x),a=(t.y-e.point1.y)/(e.point2.y-e.point1.y);return{x:r.point1.x+(r.point2.x-r.point1.x)*n,y:r.point1.y+(r.point2.y-r.point1.y)*a}}},"./app/views/performance/vitalDetail/utils.tsx":(t,e,r)=>{"use strict";r.d(e,{eE:()=>i,MN:()=>c,SP:()=>l,fL:()=>d,Np:()=>p,i4:()=>u,iF:()=>h,Ve:()=>m,q4:()=>g,jo:()=>f,il:()=>v,a7:()=>x,vk:()=>y}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js");var n=r("./app/icons/index.tsx"),a=r("./app/utils/discover/fields.tsx"),o=r("./app/utils/queryString.tsx"),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i={[a.Zl.FP]:3e3,[a.Zl.FCP]:3e3,[a.Zl.LCP]:4e3,[a.Zl.FID]:300,[a.Zl.CLS]:.25},c={[a.Zl.FP]:1e3,[a.Zl.FCP]:1e3,[a.Zl.LCP]:2500,[a.Zl.FID]:100,[a.Zl.CLS]:.1};let l;!function(t){t.POOR="Poor",t.MEH="Meh",t.GOOD="Good"}(l||(l={}));const d={[l.POOR]:"red300",[l.MEH]:"yellow300",[l.GOOD]:"green300"},p={[l.POOR]:(0,s.tZ)(n.zC,{color:d[l.POOR]}),[l.MEH]:(0,s.tZ)(n.FC,{color:d[l.MEH]}),[l.GOOD]:(0,s.tZ)(n.DL,{color:d[l.GOOD],isCircled:!0})};function u({orgSlug:t,vitalName:e,projectID:r,query:n}){return{pathname:function({orgSlug:t}){return"/organizations/".concat(t,"/performance/vitaldetail/")}({orgSlug:t}),query:{vitalName:e,project:r,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query}}}function h(t){const e=(0,o.ro)(t.query.vitalName);return Object.values(a.Zl).find((t=>t===e))||a.Zl.LCP}function m(t){const e=i[t];return"compare_numeric_aggregate(".concat((0,a.LY)("p75(".concat(t,")")),",greater,").concat(e,")")}function g(t){const e=c[t];return"compare_numeric_aggregate(".concat((0,a.LY)("p75(".concat(t,")")),",greater,").concat(e,")")}const f={[a.Zl.FCP]:"First Contentful Paint",[a.Zl.CLS]:"Cumulative Layout Shift",[a.Zl.FID]:"First Input Delay",[a.Zl.LCP]:"Largest Contentful Paint"},v={[a.Zl.FCP]:"First Contentful Paint (FCP) measures the amount of time the first content takes to render in the viewport. Like FP, this could also show up in any form from the document object model (DOM), such as images, SVGs, or text blocks.",[a.Zl.CLS]:"Cumulative Layout Shift (CLS) is the sum of individual layout shift scores for every unexpected element shift during the rendering process. Imagine navigating to an article and trying to click a link before the page finishes loading. Before your cursor even gets there, the link may have shifted down due to an image rendering. Rather than using duration for this Web Vital, the CLS score represents the degree of disruptive and visually unstable shifts.",[a.Zl.FID]:"First Input Delay measures the response time when the user tries to interact with the viewport. Actions maybe include clicking a button, link or other custom Javascript controller. It is key in helping the user determine if a page is usable or not.",[a.Zl.LCP]:"Largest Contentful Paint (LCP) measures the render time for the largest content to appear in the viewport. This may be in any form from the document object model (DOM), such as images, SVGs, or text blocks. It’s the largest pixel area in the viewport, thus most visually defining. LCP helps developers understand how long it takes to see the main content on the page."},x={[a.Zl.FCP]:"FCP",[a.Zl.CLS]:"CLS",[a.Zl.FID]:"FID",[a.Zl.LCP]:"LCP"};function y(t){let e=-1/0;for(const{data:r}of t)for(const t of r)e=Math.max(e,t.value);return e}},"../node_modules/downsample/methods/ASAP.js":(t,e)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var n={"PointValueExtractor<unknown>":t=>"function"==typeof t,XYDataPoint:t=>null!=t&&n.X(t.x)&&"number"==typeof t.y,X:t=>"number"==typeof t||t instanceof Date},a=t=>{for(var e=0,r=0;r<t.length;r+=1)e+=t[r];return e/t.length},o=(t,e)=>{for(var r=t.length,n=new Array(r),a=0;a<r;a++)n[a]=e(t[a],a);return n},s=t=>n["PointValueExtractor<unknown>"](t)?t:e=>e[t],i=(t,e)=>({x:t,y:e}),c=()=>({x:t=>{var e=n.XYDataPoint(t)?t.x:t[0];return e instanceof Date?e.getTime():e},y:t=>"y"in t?t.y:t[1],toPoint:i}),l=(t,e)=>new t.constructor(e),d=function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=[],a=0,o=0;o<e;o++)a+=t[o];for(var s=e;s<=t.length;s++)(s-e)%r==0&&n.push(a/e),a+=t[s]-t[s-e];return n},p=t=>{var e=s(t.x),r=s(t.y),n=t.toPoint;return function(t,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0===t.length)return t;for(var i,c=o(t,r),d=o(t,e),p=l(t,0),u=0,h=0;h<a;h++)u+=c[h];for(var m=a;m<=c.length;m++)(m-a)%s==0&&(i=n((d[m-a]+d[m-1])/2,u/a,m-a),p[p.length]=i),u+=c[m]-c[m-a];return p}};function u(t,e){if(t.length!=e.length)throw"Mismatched lengths";var r=t.length;0!=r&&(0==(r&r-1)?function(t,e){if(t.length!=e.length)throw"Mismatched lengths";var r=t.length;if(1!=r){for(var n=-1,a=0;a<32;a++)1<<a==r&&(n=a);if(-1==n)throw"Length is not a power of 2";for(var o=new Array(r/2),s=new Array(r/2),i=0;i<r/2;i++)o[i]=Math.cos(2*Math.PI*i/r),s[i]=Math.sin(2*Math.PI*i/r);for(var c=0;c<r;c++){var l=m(c,n);if(l>c){var d=t[c];t[c]=t[l],t[l]=d,d=e[c],e[c]=e[l],e[l]=d}}for(var p=2;p<=r;p*=2)for(var u=p/2,h=r/p,g=0;g<r;g+=p)for(var f=g,v=0;f<g+u;f++,v+=h){var x=t[f+u]*o[v]+e[f+u]*s[v],y=-t[f+u]*s[v]+e[f+u]*o[v];t[f+u]=t[f]-x,e[f+u]=e[f]-y,t[f]+=x,e[f]+=y}}}(t,e):function(t,e){if(t.length!=e.length)throw"Mismatched lengths";for(var r=t.length,n=1;n<2*r+1;)n*=2;for(var a=new Array(r),o=new Array(r),s=0;s<r;s++){var i=s*s%(2*r);a[s]=Math.cos(Math.PI*i/r),o[s]=Math.sin(Math.PI*i/r)}for(var c=new Array(n),l=new Array(n),d=0;d<r;d++)c[d]=t[d]*a[d]+e[d]*o[d],l[d]=-t[d]*o[d]+e[d]*a[d];for(var p=r;p<n;p++)c[p]=l[p]=0;var m=new Array(n),g=new Array(n);m[0]=a[0],g[0]=o[0];for(var f=1;f<r;f++)m[f]=m[n-f]=a[f],g[f]=g[n-f]=o[f];for(var v=r;v<=n-r;v++)m[v]=g[v]=0;var x=new Array(n),y=new Array(n);!function(t,e,r,n,a,o){if(t.length!=e.length||t.length!=r.length||r.length!=n.length||t.length!=a.length||a.length!=o.length)throw"Mismatched lengths";var s=t.length;t=t.slice(),e=e.slice(),r=r.slice(),n=n.slice(),u(t,e),u(r,n);for(var i=0;i<s;i++){var c=t[i]*r[i]-e[i]*n[i];e[i]=e[i]*r[i]+t[i]*n[i],t[i]=c}h(t,e);for(var l=0;l<s;l++)a[l]=t[l]/s,o[l]=e[l]/s}(c,l,m,g,x,y);for(var Z=0;Z<r;Z++)t[Z]=x[Z]*a[Z]+y[Z]*o[Z],e[Z]=-x[Z]*o[Z]+y[Z]*a[Z]}(t,e))}function h(t,e){u(e,t)}function m(t,e){for(var r=0,n=0;n<e;n++)r=r<<1|1&t,t>>>=1;return r}p(c());var g,f,v,x=t=>(t=>{for(var e=a(t),r=0,n=0;n<t.length;n+=1)r+=(t[n]-e)*(t[n]-e);return Math.sqrt(r/t.length)})((t=>{var e=t.length-1;if(e<1)return[];for(var r=new Array(e),n=0;n<e;n++)r[n]=t[n+1]-t[n];return r})(t)),y=t=>{for(var e,r,n=t.length,o=a(t),s=0,i=0,c=0;c<n;c++)s+=(r=(e=t[c]-o)*e)*r,i+=r;return n*s/(i*i)},Z=(g=c(),f=s(g.y),v=p(g),function t(e,n){if(0===e.length)return e;if(n<=0)throw new Error("Supplied non-positive resolution parameter to ASAP: ".concat(n));if(e.length>=2*n){var s=Math.trunc(e.length/n);return t(v(e,s,s),n)}for(var i=o(e,f),c=((t,e)=>{for(var n=t.length,o=a(t),s=Math.pow(2,Math.trunc(Math.log2(n))+1),i=new Array(s).fill(0),c=new Array(s).fill(0),l=0;l<n;l+=1)i[l]=t[l]-o;u(i,c);for(var d=0;d<i.length;d+=1)i[d]=Math.pow(i[d],2)+Math.pow(c[d],2),c[d]=0;h(i,c);for(var p=[],m=1;m<e;m++)p[m]=i[m]/i[0];var g=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,a=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==i.return||i.return()}finally{if(a)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,r=t.length;if(r<=1)return[[],0];var n=0,a=[];if(t.length>1)for(var o=t[1]>t[0],s=1,i=2;i<t.length;i+=1)!o&&t[i]>t[i-1]?(s=i,o=!o):o&&t[i]>t[s]?s=i:o&&t[i]<t[i-1]&&(s>1&&t[s]>e&&(a.push(s),t[s]>n&&(n=t[s])),o=!o);if(a.length<=1)for(var c=2;c<r;c+=1)a.push(c);return[a,n]}(p),2);return{correlations:p,peaks:g[0],maxCorrelation:g[1]}})(i,Math.round(i.length/10)),l=c.correlations,p=c.peaks,m=c.maxCorrelation,g=y(i),Z=x(i),b=1,w=1,T=-1,S=i.length/10,D=p.length-1;D>=0;D-=1){var C=p[D];if(C<w||1===C)break;if(!(Math.sqrt(1-l[C])*b>Math.sqrt(1-l[b])*C)){var j=d(i,C,1),P=y(j),_=x(j);P>=g&&(_<Z&&(Z=_,b=C),w=Math.round(Math.max(C*Math.sqrt((m-1)/(l[C]-1)),w)),T<0&&(T=D))}}return T>0&&(T<p.length-2&&(S=p[T+1]),w=Math.max(w,p[T]+1)),b=((t,e,r,n,a,o)=>{for(;t<=e;){var s=Math.round((t+e)/2),i=d(r,s,1);if(y(i)>=a){var c=x(i);c<n&&(o=s,n=c),t=s+1}else e=s-1}return o})(w,S,i,Z,g,b),v(e,b,1)});e.Cl=Z},"../node_modules/lodash/isFinite.js":(t,e,r)=>{var n=r("../node_modules/lodash/_root.js").isFinite;t.exports=function(t){return"number"==typeof t&&n(t)}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_traceDetails_index_tsx-node_modules_downsample_methods_ASAP_js-node_mod-c5af68.fb972f68206dd1fdabe33b9139fe16fd.js.map