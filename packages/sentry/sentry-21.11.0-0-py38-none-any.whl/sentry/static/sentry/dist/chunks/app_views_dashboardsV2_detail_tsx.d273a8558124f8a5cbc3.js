"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_dashboardsV2_detail_tsx"],{"./app/views/dashboardsV2/data.tsx":(t,e,a)=>{a.d(e,{R7:()=>d,L3:()=>s,GY:()=>o});var i=a("./app/locale.tsx");const d={id:"",dateCreated:"",createdBy:void 0,title:(0,i.t)("Untitled dashboard"),widgets:[]},s=[{label:(0,i.t)("Area Chart"),value:"area"},{label:(0,i.t)("Bar Chart"),value:"bar"},{label:(0,i.t)("Line Chart"),value:"line"},{label:(0,i.t)("Table"),value:"table"},{label:(0,i.t)("World Map"),value:"world_map"},{label:(0,i.t)("Big Number"),value:"big_number"},{label:(0,i.t)("Top 5 Events"),value:"top_n"}],o=((0,i.t)("1 Minute"),(0,i.t)("5 Minutes"),(0,i.t)("15 Minutes"),(0,i.t)("30 Minutes"),(0,i.t)("1 Hour"),(0,i.t)("1 Day"),"24h")},"./app/views/dashboardsV2/detail.tsx":(t,e,a)=>{a.d(e,{Z:()=>gt});var i=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/core-js/modules/es.string.replace.js"),a("../node_modules/react/index.js")),o=a("../node_modules/react-router/es/index.js"),n=a("../node_modules/lodash/isEqual.js"),r=a.n(n),l=a("./app/actionCreators/dashboards.tsx"),h=a("./app/actionCreators/indicator.tsx"),c=a("./app/actionCreators/modal.tsx"),p=a("./app/components/breadcrumbs.tsx"),u=a("./app/components/hookOrDefault.tsx"),g=a("./app/components/layouts/thirds.tsx"),b=a("./app/components/noProjectMessage.tsx"),m=a("./app/components/organizations/globalSelectionHeader/index.tsx"),D=a("./app/locale.tsx"),f=a("./app/styles/organization.tsx"),w=a("./app/styles/space.tsx"),y=a("./app/utils/analytics.tsx"),Z=a("./app/utils/withApi.tsx"),E=a("./app/utils/withOrganization.tsx"),v=a("./app/components/acl/feature.tsx"),x=a("./app/components/acl/featureDisabled.tsx"),S=a("./app/components/button.tsx"),W=a("./app/components/buttonBar.tsx"),z=a("./app/components/confirm.tsx"),C=a("./app/components/hovercard.tsx"),I=a("./app/icons/index.tsx"),T=a("./app/views/dashboardsV2/types.tsx"),B=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class k extends s.Component{render(){const{organization:t,dashboardState:e,dashboards:a,onEdit:i,onCancel:d,onCommit:o,onDelete:n,onAddWidget:r}=this.props,l=(0,B.tZ)(S.ZP,{"data-test-id":"dashboard-cancel",onClick:t=>{t.preventDefault(),d()},children:(0,D.t)("Cancel")});return[T.n3.EDIT,T.n3.PENDING_DELETE].includes(e)?(0,B.BX)(U,{gap:1,children:[l,(0,B.tZ)(z.Z,{priority:"danger",message:(0,D.t)("Are you sure you want to delete this dashboard?"),onConfirm:n,disabled:a.length<=1,children:(0,B.tZ)(S.ZP,{"data-test-id":"dashboard-delete",priority:"danger",children:(0,D.t)("Delete")})}),(0,B.tZ)(S.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),o()},priority:"primary",children:(0,D.t)("Save and Finish")})]},"edit-controls"):"create"===e?(0,B.BX)(U,{gap:1,children:[l,(0,B.tZ)(S.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),o()},priority:"primary",children:(0,D.t)("Save and Finish")})]},"create-controls"):(0,B.tZ)(U,{gap:1,children:(0,B.tZ)(N,{children:e=>(0,B.BX)(s.Fragment,{children:[(0,B.tZ)(S.ZP,{"data-test-id":"dashboard-edit",onClick:t=>{t.preventDefault(),i()},icon:(0,B.tZ)(I.yl,{size:"xs"}),disabled:!e,priority:t.features.includes("widget-library")?"default":"primary",children:(0,D.t)("Edit Dashboard")}),t.features.includes("widget-library")?(0,B.tZ)(S.ZP,{"data-test-id":"add-widget-library",priority:"primary",icon:(0,B.tZ)(I.N_,{isCircled:!0,size:"s"}),onClick:t=>{t.preventDefault(),r()},children:(0,D.t)("Add Widget")}):null]})})},"controls")}}k.displayName="Controls";const N=({children:t})=>{const e=(0,D.t)("Requires dashboard editing.");return(0,B.tZ)(v.Z,{hookName:"feature-disabled:dashboards-edit",features:["organizations:dashboards-edit"],renderDisabled:t=>(0,B.tZ)(C.ZP,{body:(0,B.tZ)(x.Z,{features:t.features,hideHelpToggle:!0,message:e,featureName:e}),children:t.children(t)}),children:({hasFeature:e})=>t(e)})};N.displayName="DashboardEditFeature";const U=(0,d.Z)(W.ZP,{target:"e78awt50"})("@media (max-width: ",(t=>t.theme.breakpoints[0]),"){grid-auto-flow:row;grid-row-gap:",(0,w.Z)(1),";width:100%;}"),_=k;var A=a("../node_modules/@dnd-kit/core/dist/core.esm.js"),q=a("../node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),R=a("./app/actionCreators/tags.tsx"),V=a("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),P=a("./app/utils/withGlobalSelection.tsx"),M=a("./app/views/dashboardsV2/widget/utils.tsx"),X=a("../node_modules/framer-motion/dist/es/render/dom/motion.js");const L=(0,d.Z)(X.E.div,{target:"ec3gecx0"})("position:relative;touch-action:manipulation;",(t=>{switch(t.displayType){case"big_number":return"\n          /* 2 cols */\n          grid-area: span 1 / span 2;\n\n          @media (min-width: ".concat(t.theme.breakpoints[0],") {\n            /* 4 cols */\n            grid-area: span 1 / span 1;\n          }\n\n          @media (min-width: ").concat(t.theme.breakpoints[3],") {\n            /* 6 and 8 cols */\n            grid-area: span 1 / span 2;\n          }\n        ");default:return"\n          /* 2, 4, 6 and 8 cols */\n          grid-area: span 2 / span 2;\n        "}}),";"),j="add-widget-button",Y={x:0,y:0,scaleX:1,scaleY:1};function H({onAddWidget:t,onOpenWidgetBuilder:e,orgFeatures:a}){const i=a.includes("metrics")?e:t,{setNodeRef:d,transform:s}=(0,q.nB)({disabled:!0,id:j,transition:null});return(0,B.tZ)(L,{ref:d,displayType:T.FO.BIG_NUMBER,layoutId:j,style:{originX:0,originY:0},animate:s?{x:s.x,y:s.y,scaleX:null!=s&&s.scaleX&&s.scaleX<=1?s.scaleX:1,scaleY:null!=s&&s.scaleY&&s.scaleY<=1?s.scaleY:1}:Y,transition:{duration:.25},children:(0,B.tZ)(O,{onClick:i,children:(0,B.tZ)(G,{"data-test-id":"widget-add",onClick:i,icon:(0,B.tZ)(I.N_,{size:"lg",isCircled:!0,color:"inactive"})})})},"add")}H.displayName="AddWidget";const F=H,G=(0,d.Z)(S.ZP,{target:"e1sxcph31"})({name:"6ayxgl",styles:"border:none;&,&:focus,&:active,&:hover{background:transparent;box-shadow:none;}"}),O=(0,d.Z)("div",{target:"e1sxcph30"})("width:100%;height:110px;border:2px dashed ",(t=>t.theme.border),";border-radius:",(t=>t.theme.borderRadius),";display:flex;align-items:center;justify-content:center;cursor:",(t=>t.onClick?"pointer":""),";");var K=a("./app/utils/theme.tsx"),J=a("./app/views/dashboardsV2/widgetCard.tsx");const Q={zIndex:"auto"};function $(t){const{widget:e,dragId:a,isEditing:i,onDelete:d,onEdit:o}=t,{attributes:n,listeners:r,setNodeRef:l,transform:h,isDragging:c,isSorting:p}=(0,q.nB)({id:a,transition:null});return(0,s.useEffect)((()=>{if(c)return document.body.style.cursor="grabbing",function(){document.body.style.cursor=""}}),[c]),(0,B.tZ)(L,{ref:l,displayType:e.displayType,layoutId:a,style:{originX:c?1:0,originY:0,boxShadow:c?K.ZP.dropShadowHeavy:"none",borderRadius:c?K.ZP.borderRadius:void 0},animate:h?{x:h.x,y:h.y,scaleX:null!=h&&h.scaleX&&h.scaleX<=1?h.scaleX:1,scaleY:null!=h&&h.scaleY&&h.scaleY<=1?h.scaleY:1,zIndex:c?K.ZP.zIndex.modal:"auto"}:Q,transformTemplate:(t,e)=>i&&h?e:"none",transition:{duration:c?0:.25,easings:{type:"spring"}},children:(0,B.tZ)(J.Z,{widget:e,isEditing:i,onDelete:d,onEdit:o,isSorting:p,hideToolbar:p,currentWidgetDragging:c,draggableProps:{attributes:n,listeners:r},showContextMenu:!0})})}$.displayName="SortableWidget";const tt=$;class et extends s.Component{constructor(...t){super(...t),(0,i.Z)(this,"handleStartAdd",(()=>{const{organization:t,dashboard:e,selection:a}=this.props;(0,V.Z)("dashboards_views.add_widget_modal.opened",{organization:t}),(0,c.openAddDashboardWidgetModal)({organization:t,dashboard:e,selection:a,onAddWidget:this.handleAddComplete})})),(0,i.Z)(this,"handleOpenWidgetBuilder",(()=>{const{router:t,paramDashboardId:e,organization:a,location:i}=this.props;e?t.push({pathname:"/organizations/".concat(a.slug,"/dashboard/").concat(e,"/widget/new/"),query:{...i.query,dataSet:M.qg.EVENTS}}):t.push({pathname:"/organizations/".concat(a.slug,"/dashboards/new/widget/new/"),query:{...i.query,dataSet:M.qg.EVENTS}})})),(0,i.Z)(this,"handleAddComplete",(t=>{this.props.onUpdate([...this.props.dashboard.widgets,t])})),(0,i.Z)(this,"handleUpdateComplete",(t=>e=>{const a=[...this.props.dashboard.widgets];a[t]=e,this.props.onUpdate(a)})),(0,i.Z)(this,"handleDeleteWidget",(t=>()=>{const e=[...this.props.dashboard.widgets];e.splice(t,1),this.props.onUpdate(e)})),(0,i.Z)(this,"handleEditWidget",((t,e)=>()=>{const{organization:a,dashboard:i,selection:d,router:s,location:o,paramDashboardId:n,onSetWidgetToBeUpdated:r}=this.props;if(a.features.includes("metrics")){if(r(t),n)return void s.push({pathname:"/organizations/".concat(a.slug,"/dashboard/").concat(n,"/widget/").concat(e,"/edit/"),query:{...o.query,dataSet:M.qg.EVENTS}});s.push({pathname:"/organizations/".concat(a.slug,"/dashboards/new/widget/").concat(e,"/edit/"),query:{...o.query,dataSet:M.qg.EVENTS}})}(0,V.Z)("dashboards_views.edit_widget_modal.opened",{organization:a}),(0,c.openAddDashboardWidgetModal)({organization:a,dashboard:i,widget:t,selection:d,onAddWidget:this.handleAddComplete,onUpdateWidget:this.handleUpdateComplete(e)})}))}async componentDidMount(){const{isEditing:t}=this.props;t&&this.fetchTags(),this.addNewWidget()}async componentDidUpdate(t){const{isEditing:e,newWidget:a}=this.props;t.isEditing!==e&&e&&this.fetchTags(),a!==t.newWidget&&this.addNewWidget()}async addNewWidget(){const{api:t,organization:e,newWidget:a}=this.props;if(a)try{await(0,l.QL)(t,e.slug,a),this.handleAddComplete(a)}catch(t){(0,h.Iw)(t)}}fetchTags(){const{api:t,organization:e,selection:a}=this.props;(0,R.QK)(t,e.slug,a)}getWidgetIds(){return[...this.props.dashboard.widgets.map(((t,e)=>dt(t,e))),j]}renderWidget(t,e){const{isEditing:a}=this.props,i=dt(t,e),d=i;return(0,B.tZ)(tt,{widget:t,dragId:d,isEditing:a,onDelete:this.handleDeleteWidget(e),onEdit:this.handleEditWidget(t,e)},i)}render(){const{isEditing:t,onUpdate:e,dashboard:{widgets:a},organization:i}=this.props,d=this.getWidgetIds();return(0,B.tZ)(A.LB,{collisionDetection:A.pE,onDragEnd:({over:t,active:i})=>{const s=i.id,o=d.indexOf.bind(d),n=s?o(s):-1;if(t&&t.id!==j){const i=o(t.id);n!==i&&e((0,q.Rp)(a,n,i))}},children:(0,B.tZ)(it,{children:(0,B.BX)(q.Fo,{items:d,strategy:q.U2,children:[a.map(((t,e)=>this.renderWidget(t,e))),t&&a.length<T.ZU&&(0,B.tZ)(F,{orgFeatures:i.features,onAddWidget:this.handleStartAdd,onOpenWidgetBuilder:this.handleOpenWidgetBuilder})]})})})}}et.displayName="Dashboard";const at=(0,Z.Z)((0,P.Z)(et)),it=(0,d.Z)("div",{target:"e1wa3gzn0"})("display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));grid-auto-flow:row dense;grid-gap:",(0,w.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints[1]),"){grid-template-columns:repeat(4, minmax(0, 1fr));}@media (min-width: ",(t=>t.theme.breakpoints[3]),"){grid-template-columns:repeat(6, minmax(0, 1fr));}@media (min-width: ",(t=>t.theme.breakpoints[4]),"){grid-template-columns:repeat(8, minmax(0, 1fr));}");function dt(t,e){return t.id?"".concat(t.id,"-index-").concat(e):"index-".concat(e)}var st=a("./app/views/dashboardsV2/data.tsx"),ot=a("./app/components/editableText.tsx");function nt({dashboard:t,isEditing:e,organization:a,onUpdate:i}){return(0,B.tZ)("div",{children:t?(0,B.tZ)(ot.Z,{isDisabled:!e,value:a.features.includes("dashboards-edit")&&"default-overview"===t.id?"Default Dashboard":t.title,onChange:e=>i({...t,title:e}),errorMessage:(0,D.t)("Please set a title for this dashboard"),successMessage:(0,D.t)("Dashboard title updated successfully")}):(0,D.t)("Dashboards")})}nt.displayName="DashboardTitle";const rt=(0,E.Z)(nt);var lt=a("./app/views/dashboardsV2/utils.tsx");const ht=(0,D.t)("You have unsaved changes, are you sure you want to leave?"),ct=(0,u.Z)({hookName:"component:dashboards-header"});class pt extends s.Component{constructor(...t){super(...t),(0,i.Z)(this,"state",{dashboardState:this.props.initialState,modifiedDashboard:this.updateModifiedDashboard(this.props.initialState)}),(0,i.Z)(this,"onEdit",(()=>{const{dashboard:t}=this.props;(0,y.ec)({eventKey:"dashboards2.edit.start",eventName:"Dashboards2: Edit start",organization_id:parseInt(this.props.organization.id,10)}),this.setState({dashboardState:T.n3.EDIT,modifiedDashboard:(0,lt.qk)(t)})})),(0,i.Z)(this,"onRouteLeave",(()=>{if(![T.n3.VIEW,T.n3.PENDING_DELETE].includes(this.state.dashboardState))return ht})),(0,i.Z)(this,"onUnload",(t=>{[T.n3.VIEW,T.n3.PENDING_DELETE].includes(this.state.dashboardState)||(t.preventDefault(),t.returnValue=ht)})),(0,i.Z)(this,"onDelete",(t=>()=>{const{api:e,organization:a,location:i}=this.props;if(null==t||!t.id)return;const d=this.state.dashboardState;this.setState({dashboardState:T.n3.PENDING_DELETE},(()=>{(0,l.iM)(e,a.slug,t.id).then((()=>{(0,h.S9)((0,D.t)("Dashboard deleted")),(0,y.ec)({eventKey:"dashboards2.delete",eventName:"Dashboards2: Delete",organization_id:parseInt(this.props.organization.id,10)}),o.browserHistory.replace({pathname:"/organizations/".concat(a.slug,"/dashboards/"),query:i.query})})).catch((()=>{this.setState({dashboardState:d})}))}))})),(0,i.Z)(this,"onCancel",(()=>{const{organization:t,location:e,params:a}=this.props;if(a.dashboardId)return(0,y.ec)({eventKey:"dashboards2.edit.cancel",eventName:"Dashboards2: Edit cancel",organization_id:parseInt(this.props.organization.id,10)}),void this.setState({dashboardState:T.n3.VIEW,modifiedDashboard:null});(0,y.ec)({eventKey:"dashboards2.create.cancel",eventName:"Dashboards2: Create cancel",organization_id:parseInt(this.props.organization.id,10)}),o.browserHistory.replace({pathname:"/organizations/".concat(t.slug,"/dashboards/"),query:e.query})})),(0,i.Z)(this,"onAddWidget",(()=>{const{organization:t,dashboard:e,api:a,reloadData:i,location:d}=this.props;this.setState({modifiedDashboard:(0,lt.qk)(e)}),(0,c.openDashboardWidgetLibraryModal)({organization:t,dashboard:e,onAddWidget:s=>{const n={...(0,lt.qk)(e),widgets:s};(0,l.Y)(a,t.slug,n).then((a=>{(0,h.S9)((0,D.t)("Dashboard updated")),i&&i(),e&&a.id!==e.id&&o.browserHistory.replace({pathname:"/organizations/".concat(t.slug,"/dashboard/").concat(a.id,"/"),query:{...d.query}})}),(()=>{}))}})})),(0,i.Z)(this,"onCommit",(()=>{const{api:t,organization:e,location:a,dashboard:i,reloadData:d}=this.props,{modifiedDashboard:s,dashboardState:n}=this.state;switch(n){case T.n3.CREATE:s&&(0,l.JR)(t,e.slug,s).then((t=>{(0,h.S9)((0,D.t)("Dashboard created")),(0,y.ec)({eventKey:"dashboards2.create.complete",eventName:"Dashboards2: Create complete",organization_id:parseInt(e.id,10)}),this.setState({dashboardState:T.n3.VIEW,modifiedDashboard:null}),o.browserHistory.replace({pathname:"/organizations/".concat(e.slug,"/dashboard/").concat(t.id,"/"),query:{...a.query}})}),(()=>{}));break;case T.n3.EDIT:if(s)return r()(i,s)?void this.setState({dashboardState:T.n3.VIEW,modifiedDashboard:null}):void(0,l.Y)(t,e.slug,s).then((t=>{(0,h.S9)((0,D.t)("Dashboard updated")),(0,y.ec)({eventKey:"dashboards2.edit.complete",eventName:"Dashboards2: Edit complete",organization_id:parseInt(e.id,10)}),this.setState({dashboardState:T.n3.VIEW,modifiedDashboard:null}),d&&d(),i&&t.id!==i.id&&o.browserHistory.replace({pathname:"/organizations/".concat(e.slug,"/dashboard/").concat(t.id,"/"),query:{...a.query}})}),(()=>{}));this.setState({dashboardState:T.n3.VIEW,modifiedDashboard:null});break;case T.n3.VIEW:default:this.setState({dashboardState:T.n3.VIEW,modifiedDashboard:null})}})),(0,i.Z)(this,"setModifiedDashboard",(t=>{this.setState({modifiedDashboard:t})})),(0,i.Z)(this,"onSetWidgetToBeUpdated",(t=>{this.setState({widgetToBeUpdated:t})})),(0,i.Z)(this,"onUpdateWidget",(t=>{const{modifiedDashboard:e}=this.state;null!==e&&this.setState((e=>({...e,widgetToBeUpdated:void 0,modifiedDashboard:{...e.modifiedDashboard,widgets:t}})),this.updateRouteAfterSavingWidget)}))}componentDidMount(){const{route:t,router:e}=this.props;this.checkStateRoute(),e.setRouteLeaveHook(t,this.onRouteLeave),window.addEventListener("beforeunload",this.onUnload)}componentDidUpdate(t){t.location.pathname!==this.props.location.pathname&&this.checkStateRoute()}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}checkStateRoute(){const{router:t,organization:e,params:a}=this.props,{dashboardId:i}=a,d="/organizations/".concat(e.slug,"/dashboard/").concat(i,"/");this.isWidgetBuilderRouter&&!this.isEditing&&t.replace(d),location.pathname===d&&this.state.widgetToBeUpdated&&this.onSetWidgetToBeUpdated(void 0)}updateRouteAfterSavingWidget(){if(this.isWidgetBuilderRouter){const{router:t,organization:e,params:a}=this.props,{dashboardId:i}=a;if(i)return void t.replace("/organizations/".concat(e.slug,"/dashboard/").concat(i,"/"));t.replace("/organizations/".concat(e.slug,"/dashboards/new/"))}}updateModifiedDashboard(t){const{dashboard:e}=this.props;switch(t){case T.n3.CREATE:return(0,lt.qk)(st.R7);case T.n3.EDIT:return(0,lt.qk)(e);default:return null}}get isEditing(){const{dashboardState:t}=this.state;return[T.n3.EDIT,T.n3.CREATE,T.n3.PENDING_DELETE].includes(t)}get isWidgetBuilderRouter(){const{location:t,params:e,organization:a}=this.props,{dashboardId:i}=e;return["/organizations/".concat(a.slug,"/dashboards/new/widget/new/"),"/organizations/".concat(a.slug,"/dashboard/").concat(i,"/widget/new/")].includes(t.pathname)||this.isWidgetBuilderEditRouter}get isWidgetBuilderEditRouter(){const{location:t,params:e,organization:a}=this.props,{dashboardId:i,widgetId:d}=e;return["/organizations/".concat(a.slug,"/dashboards/new/widget/").concat(d,"/edit/"),"/organizations/".concat(a.slug,"/dashboard/").concat(i,"/widget/").concat(d,"/edit/")].includes(t.pathname)}get dashboardTitle(){const{dashboard:t}=this.props,{modifiedDashboard:e}=this.state;return e?e.title:t.title}renderWidgetBuilder(t){const{children:e}=this.props,{modifiedDashboard:a,widgetToBeUpdated:i}=this.state;return(0,s.isValidElement)(e)?(0,s.cloneElement)(e,{dashboard:null!=a?a:t,onSave:this.onUpdateWidget,widget:i}):e}renderDefaultDashboardDetail(){const{organization:t,dashboard:e,dashboards:a,params:i,router:d,location:s}=this.props,{modifiedDashboard:o,dashboardState:n}=this.state,{dashboardId:r}=i;return(0,B.tZ)(m.Z,{skipLoadLastUsed:t.features.includes("global-views"),defaultSelection:{datetime:{start:null,end:null,utc:!1,period:st.GY}},children:(0,B.tZ)(f.JH,{children:(0,B.BX)(b.Z,{organization:t,children:[(0,B.BX)(ut,{children:[(0,B.tZ)(rt,{dashboard:null!=o?o:e,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing}),(0,B.tZ)(_,{organization:t,dashboards:a,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onAddWidget:this.onAddWidget,onDelete:this.onDelete(e),dashboardState:n})]}),(0,B.tZ)(ct,{organization:t}),(0,B.tZ)(at,{paramDashboardId:r,dashboard:null!=o?o:e,organization:t,isEditing:this.isEditing,onUpdate:this.onUpdateWidget,onSetWidgetToBeUpdated:this.onSetWidgetToBeUpdated,router:d,location:s})]})})})}renderDashboardDetail(){const{organization:t,dashboard:e,dashboards:a,params:i,router:d,location:s,newWidget:o}=this.props,{modifiedDashboard:n,dashboardState:r}=this.state,{dashboardId:l}=i;return(0,B.tZ)(m.Z,{skipLoadLastUsed:t.features.includes("global-views"),defaultSelection:{datetime:{start:null,end:null,utc:!1,period:st.GY}},children:(0,B.BX)(b.Z,{organization:t,children:[(0,B.BX)(g.h4,{children:[(0,B.BX)(g.oB,{children:[(0,B.tZ)(p.Z,{crumbs:[{label:(0,D.t)("Dashboards"),to:"/organizations/".concat(t.slug,"/dashboards/")},{label:r===T.n3.CREATE?(0,D.t)("Create Dashboard"):t.features.includes("dashboards-edit")&&"default-overview"===e.id?"Default Dashboard":this.dashboardTitle}]}),(0,B.tZ)(g.Dx,{children:(0,B.tZ)(rt,{dashboard:null!=n?n:e,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing})})]}),(0,B.tZ)(g.kP,{children:(0,B.tZ)(_,{organization:t,dashboards:a,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onAddWidget:this.onAddWidget,onDelete:this.onDelete(e),dashboardState:r})})]}),(0,B.tZ)(g.uT,{children:(0,B.tZ)(g.or,{fullWidth:!0,children:(0,B.tZ)(at,{paramDashboardId:l,dashboard:null!=n?n:e,organization:t,isEditing:this.isEditing,onUpdate:this.onUpdateWidget,onSetWidgetToBeUpdated:this.onSetWidgetToBeUpdated,router:d,location:s,newWidget:o})})})]})})}render(){const{organization:t,dashboard:e}=this.props;return this.isEditing&&this.isWidgetBuilderRouter?this.renderWidgetBuilder(e):t.features.includes("dashboards-edit")?this.renderDashboardDetail():this.renderDefaultDashboardDetail()}}pt.displayName="DashboardDetail";const ut=(0,d.Z)("div",{target:"e1anno2f0"})("display:grid;grid-template-columns:minmax(0, 1fr);grid-row-gap:",(0,w.Z)(2),";align-items:center;font-size:",(t=>t.theme.headerFontSize),";color:",(t=>t.theme.textColor),";margin-bottom:",(0,w.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints[1]),"){grid-template-columns:minmax(0, 1fr) max-content;grid-column-gap:",(0,w.Z)(2),";height:40px;}"),gt=(0,Z.Z)((0,E.Z)(pt))}}]);
//# sourceMappingURL=../sourcemaps/app_views_dashboardsV2_detail_tsx.5cba11136394b4a0950fb84d901d3e94.js.map