"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationIntegrations_integrationListDirectory_tsx","app_components_sentryDocumentTitle_tsx"],{"./app/components/sentryDocumentTitle.tsx":(t,e,n)=>{n.d(e,{Z:()=>r}),n("../node_modules/react/index.js");var s=n("../node_modules/react-document-title/index.js"),i=n.n(s),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o({title:t,orgSlug:e,projectSlug:n,children:s}){const o=e||n?e&&n?"".concat(t," - ").concat(e," - ").concat(n):e?"".concat(t," - ").concat(e):"".concat(t," - ").concat(n):t;return(0,a.tZ)(i(),{title:"".concat(o," - Sentry"),children:s})}o.displayName="SentryDocumentTitle";const r=o},"./app/utils/createFuzzySearch.tsx":(t,e,n)=>{n.d(e,{I:()=>i}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=n("./app/constants/index.tsx");async function i(t,e){if(!e.keys)throw new Error("You need to define `options.keys`");const{default:i}=await n.e("node_modules_fuse_js_dist_fuse_js").then(n.t.bind(n,"../node_modules/fuse.js/dist/fuse.js",23));return new i(t,{...s.UT,...e})}},"./app/views/organizationIntegrations/integrationListDirectory.tsx":(t,e,n)=>{n.r(e),n.d(e,{IntegrationListDirectory:()=>st,default:()=>lt});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/web.url.js"),n("../node_modules/react/index.js")),o=n("../node_modules/react-router/es/index.js"),r=n("../node_modules/lodash/debounce.js"),l=n.n(r),c=n("../node_modules/lodash/flatten.js"),p=n.n(c),d=n("../node_modules/lodash/groupBy.js"),g=n.n(d),u=n("../node_modules/lodash/startCase.js"),h=n.n(u),m=n("../node_modules/lodash/uniq.js"),y=n.n(m),Z=n("../node_modules/query-string/index.js"),x=n("./app/components/asyncComponent.tsx"),f=n("./app/components/forms/selectControl.tsx"),v=n("./app/components/links/externalLink.tsx"),b=n("./app/components/panels/index.tsx"),w=n("./app/components/searchBar.tsx"),j=n("./app/components/sentryDocumentTitle.tsx"),_=n("./app/locale.tsx"),I=n("./app/styles/space.tsx"),z=n("./app/utils/createFuzzySearch.tsx"),k=n("./app/utils/integrationUtil.tsx"),S=n("./app/utils/withOrganization.tsx"),A=n("./app/views/settings/components/settingsPageHeader.tsx"),C=n("./app/views/settings/organization/permissionAlert.tsx"),D=n("./app/views/organizationIntegrations/constants.tsx"),P=n("./app/components/alert.tsx"),L=n("./app/components/button.tsx"),N=n("./app/components/links/link.tsx"),B=n("./app/icons/index.tsx"),T=n("./app/plugins/components/pluginIcon.tsx"),F=n("./app/views/organizationIntegrations/integrationStatus.tsx"),O=n("./app/views/organizationIntegrations/pluginDeprecationAlert.tsx"),X=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const U={plugin:"plugins",firstParty:"integrations",sentryApp:"sentry-apps",documentIntegration:"document-integrations"},q=t=>{const{organization:e,type:n,slug:s,displayName:i,status:a,publishStatus:o,configurations:r,categories:l,alertText:c,resolveText:p,plugin:d}=t,g="internal"===o?"/settings/".concat(e.slug,"/developer-settings/").concat(s,"/"):"/settings/".concat(e.slug,"/").concat(U[n],"/").concat(s,"/");return(0,X.BX)(V,{noPadding:!0,"data-test-id":s,children:[(0,X.BX)(E,{children:[(0,X.tZ)(T.ZP,{size:36,pluginId:s}),(0,X.BX)(H,{children:[(0,X.tZ)(Q,{to:g,children:i}),(0,X.BX)(W,{children:[a?(0,X.tZ)(F.Z,{status:a}):(0,X.tZ)(Y,{to:g,children:(0,_.t)("Learn More")}),"sentryApp"===n?"published"!==o&&(0,X.tZ)(J,{status:o}):r>0?(0,X.tZ)(M,{to:"".concat(g,"?tab=configurations"),children:"".concat(r," Configuration").concat(r>1?"s":"")}):null]})]}),(0,X.tZ)(G,{children:null==l?void 0:l.map((t=>(0,X.tZ)(K,{category:h()(t),priority:t===o},t)))})]}),c&&(0,X.tZ)(tt,{children:(0,X.BX)(P.Z,{type:"warning",icon:(0,X.tZ)(B.FC,{size:"sm"}),children:[(0,X.tZ)("span",{children:c}),(0,X.tZ)($,{href:"".concat(g,"?tab=configurations&referrer=directory_resolve_now"),size:"xsmall",onClick:()=>(0,k.Db)("integrations.resolve_now_clicked",{integration_type:(0,k.ts)(n),integration:s,organization:e}),children:p||(0,_.t)("Resolve Now")})]})}),(null==d?void 0:d.deprecationDate)&&(0,X.tZ)(R,{children:(0,X.tZ)(O.Z,{organization:e,plugin:d})})]})};q.displayName="IntegrationRow";const R=(0,i.Z)("div",{target:"ejka4t012"})("padding:0px ",(0,I.Z)(3)," 0px 68px;"),V=(0,i.Z)(b.Lv,{target:"ejka4t011"})({name:"qdeacm",styles:"flex-direction:column"}),E=(0,i.Z)("div",{target:"ejka4t010"})("display:flex;align-items:center;padding:",(0,I.Z)(2),";"),G=(0,i.Z)(E,{target:"ejka4t09"})("padding:0 ",(0,I.Z)(2),";"),H=(0,i.Z)("div",{target:"ejka4t08"})({name:"1uy7vsb",styles:"flex:1;padding:0 16px"}),Q=(0,i.Z)(N.Z,{target:"ejka4t07"})({name:"1efi8gv",styles:"font-weight:bold"}),W=(0,i.Z)("div",{target:"ejka4t06"})({name:"4xwio5",styles:"display:flex;align-items:center;margin-top:6px;font-size:0.8em"}),M=(0,i.Z)(N.Z,{target:"ejka4t05"})("color:",(t=>t.theme.gray300),";&:before{content:'|';color:",(t=>t.theme.gray200),";margin-right:",(0,I.Z)(.75),";font-weight:normal;}"),Y=(0,i.Z)(N.Z,{target:"ejka4t04"})("color:",(t=>t.theme.gray300),";"),J=(0,i.Z)((({status:t,...e})=>(0,X.tZ)("div",{...e,children:(0,_.t)("".concat(t))})),{target:"ejka4t03"})("color:",(t=>"published"===t.status?t.theme.success:t.theme.gray300),";font-weight:light;margin-right:",(0,I.Z)(.75),";text-transform:capitalize;&:before{content:'|';color:",(t=>t.theme.gray200),";margin-right:",(0,I.Z)(.75),";font-weight:normal;}"),K=(0,i.Z)((({priority:t,category:e,...n})=>(0,X.tZ)("div",{...n,children:e})),{target:"ejka4t02"})("display:flex;flex-direction:row;padding:1px 10px;background:",(t=>t.priority?t.theme.purple200:t.theme.gray100),";border-radius:20px;font-size:",(0,I.Z)(1.5),";margin-right:",(0,I.Z)(1),";line-height:",(0,I.Z)(3),";text-align:center;color:",(t=>t.priority?t.theme.white:t.theme.gray500),";"),$=(0,i.Z)(L.ZP,{target:"ejka4t01"})("color:",(t=>t.theme.subText),";float:right;"),tt=(0,i.Z)("div",{target:"ejka4t00"})("padding:0px ",(0,I.Z)(3)," 0px 68px;"),et=q,nt={threshold:.3,location:0,distance:100,includeScore:!0,keys:["slug","key","name","id"]};class st extends x.Z{constructor(...t){super(...t),(0,s.Z)(this,"shouldReload",!0),(0,s.Z)(this,"reloadOnVisible",!0),(0,s.Z)(this,"shouldReloadOnVisible",!0),(0,s.Z)(this,"getAppInstall",(t=>{var e;return null===(e=this.state.appInstalls)||void 0===e?void 0:e.find((e=>e.app.slug===t.slug))})),(0,s.Z)(this,"getPopularityWeight",(t=>{var e;return null!==(e=D.ek[t.slug])&&void 0!==e?e:1})),(0,s.Z)(this,"sortByName",((t,e)=>t.slug.localeCompare(e.slug))),(0,s.Z)(this,"sortByPopularity",((t,e)=>{const n=this.getPopularityWeight(t);return this.getPopularityWeight(e)-n})),(0,s.Z)(this,"sortByInstalled",((t,e)=>this.getInstallValue(e)-this.getInstallValue(t))),(0,s.Z)(this,"debouncedTrackIntegrationSearch",l()(((t,e)=>{(0,k.Db)("integrations.directory_item_searched",{view:"integrations_directory",search_term:t,num_results:e,organization:this.props.organization})}),1e3)),(0,s.Z)(this,"getFilterParameters",(()=>{const{category:t,search:e}=Z.parse(this.props.location.search),n=Array.isArray(t)?t[0]:t||"";return{searchInput:Array.isArray(e)?e[0]:e||"",selectedCategory:n}})),(0,s.Z)(this,"updateQueryString",(()=>{const{searchInput:t,selectedCategory:e}=this.state,n=Z.stringify({...Z.parse(this.props.location.search),search:t||void 0,category:e||void 0});o.browserHistory.replace({pathname:this.props.location.pathname,search:n?"?".concat(n):void 0})})),(0,s.Z)(this,"updateDisplayedList",(()=>{const{fuzzy:t,list:e,searchInput:n,selectedCategory:s}=this.state;let i=e;if(n&&t){const e=t.search(n);i=this.sortIntegrations(e.map((t=>t.item)))}return s&&(i=i.filter((t=>(0,k.G2)(t).includes(s)))),this.setState({displayedList:i}),i})),(0,s.Z)(this,"handleSearchChange",(async t=>{this.setState({searchInput:t},(()=>{this.updateQueryString();const e=this.updateDisplayedList();t&&this.debouncedTrackIntegrationSearch(t,e.length)}))})),(0,s.Z)(this,"onCategorySelect",(({value:t})=>{this.setState({selectedCategory:t},(()=>{this.updateQueryString(),this.updateDisplayedList(),t&&(0,k.Db)("integrations.directory_category_selected",{view:"integrations_directory",category:t,organization:this.props.organization})}))})),(0,s.Z)(this,"renderProvider",(t=>{var e,n;const{organization:s}=this.props,i=null!==(e=null===(n=this.state.integrations)||void 0===n?void 0:n.filter((e=>e.provider.key===t.key)))&&void 0!==e?e:[];return(0,X.tZ)(et,{"data-test-id":"integration-row",organization:s,type:"firstParty",slug:t.slug,displayName:t.name,status:i.length?"Installed":"Not Installed",publishStatus:"published",configurations:i.length,categories:(0,k.G2)(t),alertText:(0,k.Sv)(i),resolveText:(0,_.t)("Update Now")},"row-".concat(t.key))})),(0,s.Z)(this,"renderPlugin",(t=>{const{organization:e}=this.props,n=t.isHidden,s="".concat(t.name," ").concat(n?"(Legacy)":"");return n&&!t.projectList.length?null:(0,X.tZ)(et,{"data-test-id":"integration-row",organization:e,type:"plugin",slug:t.slug,displayName:s,status:t.projectList.length?"Installed":"Not Installed",publishStatus:"published",configurations:t.projectList.length,categories:(0,k.G2)(t),plugin:t},"row-plugin-".concat(t.id))})),(0,s.Z)(this,"renderSentryApp",(t=>{const{organization:e}=this.props,n=(0,k.Az)(this.getAppInstall(t)),s=(0,k.G2)(t);return(0,X.tZ)(et,{"data-test-id":"integration-row",organization:e,type:"sentryApp",slug:t.slug,displayName:t.name,status:n,publishStatus:t.status,configurations:0,categories:s},"sentry-app-row-".concat(t.slug))})),(0,s.Z)(this,"renderDocumentIntegration",(t=>{const{organization:e}=this.props;return(0,X.tZ)(et,{organization:e,type:"documentIntegration",slug:t.slug,displayName:t.name,publishStatus:"published",configurations:0,categories:(0,k.G2)(t)},"doc-int-".concat(t.slug))})),(0,s.Z)(this,"renderIntegration",(t=>(0,k.OI)(t)?this.renderSentryApp(t):(0,k.vg)(t)?this.renderPlugin(t):(0,k.jn)(t)?this.renderDocumentIntegration(t):this.renderProvider(t)))}getDefaultState(){return{...super.getDefaultState(),list:[],displayedList:[],selectedCategory:""}}onLoadAllEndpointsSuccess(){const{publishedApps:t,orgOwnedApps:e,extraApp:n,plugins:s}=this.state,i=t||[];null!==e&&n&&e.push(n);const a=null==e?void 0:e.filter((t=>!i.find((e=>e.slug===t.slug)))),o=[].concat(i).concat(null!=a?a:[]).concat(this.providers).concat(null!=s?s:[]).concat(Object.values(D.Uc)),r=this.sortIntegrations(o),{searchInput:l,selectedCategory:c}=this.getFilterParameters();this.setState({list:r,searchInput:l,selectedCategory:c},(()=>{this.updateDisplayedList(),this.trackPageViewed()}))}trackPageViewed(){const{integrations:t,publishedApps:e,plugins:n}=this.state,s=new Set;null==t||t.forEach((t=>{s.add(t.provider.key)})),null==e||e.filter(this.getAppInstall).forEach((t=>{s.add(t.slug)})),null==n||n.forEach((t=>{t.projectList.length&&s.add(t.slug)})),(0,k.Db)("integrations.index_viewed",{integrations_installed:s.size,view:"integrations_directory",organization:this.props.organization},{startSession:!0})}getEndpoints(){const{orgId:t}=this.props.params,e=[["config","/organizations/".concat(t,"/config/integrations/")],["integrations","/organizations/".concat(t,"/integrations/"),{query:{includeConfig:0}}],["orgOwnedApps","/organizations/".concat(t,"/sentry-apps/")],["publishedApps","/sentry-apps/",{query:{status:"published"}}],["appInstalls","/organizations/".concat(t,"/sentry-app-installations/")],["plugins","/organizations/".concat(t,"/plugins/configs/")]],n=new URLSearchParams(this.props.location.search).get("extra_app");return n&&e.push(["extraApp","/sentry-apps/".concat(n,"/")]),e}get unmigratableReposByOrg(){return g()(this.state.unmigratableRepos,(t=>t.name.split("/")[0]))}get providers(){var t,e;return null!==(t=null===(e=this.state.config)||void 0===e?void 0:e.providers)&&void 0!==t?t:[]}getInstallValue(t){const{integrations:e}=this.state;if((0,k.vg)(t))return t.projectList.length>0?2:0;if((0,k.OI)(t)){const e=this.getAppInstall(t);return e?"pending"===e.status?1:2:0}return(0,k.jn)(t)?0:null!=e&&e.find((e=>e.provider.key===t.key))?2:0}sortIntegrations(t){return t.sort(((t,e)=>{const n=this.sortByInstalled(t,e);if(0!==n)return n;const s=this.sortByPopularity(t,e);return 0!==s?s:this.sortByName(t,e)}))}async componentDidUpdate(t,e){this.state.list.length!==e.list.length&&await this.createSearch()}async createSearch(){const{list:t}=this.state;this.setState({fuzzy:await(0,z.I)(t||[],nt)})}renderBody(){const{orgId:t}=this.props.params,{displayedList:e,list:n,searchInput:s,selectedCategory:i}=this.state,o=(0,_.t)("Integrations"),r=y()(p()(n.map(k.G2))).sort();return(0,X.BX)(a.Fragment,{children:[(0,X.tZ)(j.Z,{title:o,orgSlug:t}),!this.props.hideHeader&&(0,X.tZ)(A.Z,{title:o,action:(0,X.BX)(it,{children:[(0,X.tZ)(f.Z,{name:"select-categories",onChange:this.onCategorySelect,value:i,options:[{value:"",label:(0,_.t)("All Categories")},...r.map((t=>({value:t,label:h()(t)})))]}),(0,X.tZ)(w.Z,{query:s||"",onChange:this.handleSearchChange,placeholder:(0,_.t)("Filter Integrations..."),width:"25em"})]})}),(0,X.tZ)(C.Z,{access:["org:integrations"]}),(0,X.tZ)(b.s_,{children:(0,X.tZ)(b.N,{children:e.length?e.map(this.renderIntegration):(0,X.BX)(at,{children:[(0,X.tZ)(ot,{children:(0,_._N)('No Integrations found for "[searchTerm]".',{searchTerm:s})}),(0,X.tZ)(rt,{children:(0,_.t)("Not seeing what you're looking for?")}),(0,X.tZ)(ot,{children:(0,_._N)("[link:Build it on the Sentry Integration Platform.]",{link:(0,X.tZ)(v.Z,{href:"https://docs.sentry.io/product/integrations/integration-platform/"})})})]})})})]})}}const it=(0,i.Z)("div",{target:"e623bgk3"})("display:grid;grid-template-columns:240px max-content;grid-gap:",(0,I.Z)(2),";"),at=(0,i.Z)("div",{target:"e623bgk2"})({name:"1nm5mqn",styles:"height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center"}),ot=(0,i.Z)("div",{target:"e623bgk1"})("font-size:16px;line-height:28px;color:",(t=>t.theme.gray300),";padding-bottom:",(0,I.Z)(2),";"),rt=(0,i.Z)(ot,{target:"e623bgk0"})({name:"1efi8gv",styles:"font-weight:bold"}),lt=(0,S.Z)(st)},"./app/views/organizationIntegrations/pluginDeprecationAlert.tsx":(t,e,n)=>{n.d(e,{Z:()=>u});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=n("../node_modules/react/index.js"),a=n("./app/components/alert.tsx"),o=n("./app/components/button.tsx"),r=n("./app/icons/index.tsx"),l=n("./app/locale.tsx"),c=n("./app/utils/integrationUtil.tsx"),p=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends i.Component{render(){const{organization:t,plugin:e}=this.props;if(!e.deprecationDate)return(0,p.tZ)(i.Fragment,{});const n=e.altIsSentryApp?"sentry-apps":"integrations",s="/settings/".concat(t.slug,"/").concat(n,"/").concat(e.firstPartyAlternative,"/"),o="?".concat(e.altIsSentryApp?"":"tab=configurations&","referrer=directory_upgrade_now");return(0,p.tZ)("div",{children:(0,p.BX)(a.Z,{type:"warning",icon:(0,p.tZ)(r.FC,{size:"sm"}),children:[(0,p.tZ)("span",{children:"This integration is being deprecated on ".concat(e.deprecationDate,". Please upgrade to avoid any disruption.")}),(0,p.tZ)(g,{href:"".concat(s).concat(o),size:"xsmall",onClick:()=>(0,c.Db)("integrations.resolve_now_clicked",{integration_type:"plugin",integration:e.slug,organization:t}),children:(0,l.t)("Upgrade Now")})]})})}}d.displayName="PluginDeprecationAlert";const g=(0,s.Z)(o.ZP,{target:"e1otf8d90"})("color:",(t=>t.theme.subText),";float:right;"),u=d},"./app/views/settings/organization/permissionAlert.tsx":(t,e,n)=>{n.d(e,{Z:()=>c}),n("../node_modules/react/index.js");var s=n("./app/components/acl/access.tsx"),i=n("./app/components/alert.tsx"),a=n("./app/icons/index.tsx"),o=n("./app/locale.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=({access:t=["org:write"],...e})=>(0,r.tZ)(s.Z,{access:t,children:({hasAccess:t})=>!t&&(0,r.tZ)(i.Z,{type:"warning",icon:(0,r.tZ)(a.FC,{size:"sm"}),...e,children:(0,o.t)("These settings can only be edited by users with the organization owner or manager role.")})});l.displayName="PermissionAlert";const c=l}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationIntegrations_integrationListDirectory_tsx.59ed4745966050e88d7810f0426afbe6.js.map