"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationAuth_index_tsx"],{"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=function(e,t,s=!0,r){const i="".concat(e," - ").concat(t),n=r?"".concat(i," - ").concat(r):i;return s?"".concat(n," - Sentry"):n}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>a}),s("../node_modules/react/index.js");var r=s("../node_modules/react-document-title/index.js"),i=s.n(r),n=s("./app/components/asyncComponent.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends n.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,o.tZ)(i(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/settings/organization/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>c}),s("../node_modules/react/index.js");var r=s("./app/components/acl/access.tsx"),i=s("./app/components/alert.tsx"),n=s("./app/icons/index.tsx"),o=s("./app/locale.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=({access:e=["org:write"],...t})=>(0,a.tZ)(r.Z,{access:e,children:({hasAccess:e})=>!e&&(0,a.tZ)(i.Z,{type:"warning",icon:(0,a.tZ)(n.FC,{size:"sm"}),...t,children:(0,o.t)("These settings can only be edited by users with the organization owner or manager role.")})});d.displayName="PermissionAlert";const c=d},"./app/views/settings/organizationAuth/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>X});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./app/actionCreators/indicator.tsx")),n=s("./app/locale.tsx"),o=s("./app/utils/routeTitle.tsx"),a=s("./app/utils/withOrganization.tsx"),d=s("./app/views/asyncView.tsx"),c=s("./app/components/links/externalLink.tsx"),l=s("./app/components/panels/index.tsx"),p=s("./app/utils.tsx"),u=s("./app/utils/getCsrfToken.tsx"),h=s("./app/views/settings/components/emptyMessage.tsx"),m=s("./app/views/settings/components/settingsPageHeader.tsx"),g=s("./app/views/settings/organization/permissionAlert.tsx"),v=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),Z=(s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js"),s("./app/components/acl/access.tsx")),y=s("./app/components/acl/feature.tsx"),x=s("./app/components/acl/featureDisabled.tsx"),b=s("./app/components/button.tsx"),f=s("./app/components/hovercard.tsx"),w=s("./app/components/tag.tsx"),k=s("./app/icons/index.tsx"),z=s("./app/styles/space.tsx"),S=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const _=({provider:e,active:t,onConfigure:s})=>{const r=t=>{null==s||s(e.key,t)},i=e=>(0,S.tZ)(B,{provider:e.provider,features:e.features}),o=({hasFeature:t})=>(0,S.tZ)(Z.Z,{access:["org:write"],children:({hasAccess:s})=>(0,S.tZ)(b.ZP,{type:"submit",name:"provider",size:"small",value:e.key,disabled:!t||!s,onClick:r,children:(0,n.t)("Configure")})}),a=e.requiredFeature,d=a?"feature-disabled:".concat((0,p.E7)(a)):null,c=d?{hookName:d}:{};return(0,S.tZ)(y.Z,{...c,features:[a].filter((e=>e)),renderDisabled:({children:e,...t})=>"function"==typeof e&&e({...t,renderDisabled:i}),children:({hasFeature:s,features:r,renderDisabled:i,renderInstallButton:a})=>{return(0,S.BX)(l.Lv,{center:!0,children:[(0,S.BX)(j,{children:[(0,S.tZ)(N,{className:"provider-logo ".concat(e.name.replace(/\s/g,"-").toLowerCase())}),(0,S.BX)("div",{children:[(0,S.tZ)(C,{children:e.name}),(0,S.tZ)(L,{children:(0,n.t)("Enable your organization to sign in with %s.",(d=e.name,"SAML2"===d?(0,n.t)("your preferred SAML2 compliant provider like Ping Identity, Google SAML, Keycloak, or VMware Identity Manager"):"Google"===d?(0,n.t)("Google (OAuth)"):d))})]})]}),(0,S.tZ)(P,{children:!s&&i({provider:e,features:r})}),(0,S.tZ)("div",{children:t?(0,S.tZ)(F,{}):(null!=a?a:o)({provider:e,hasFeature:s})})]});var d}})};_.displayName="ProviderItem";const A=_,j=(0,v.Z)("div",{target:"ehb8hzc6"})("flex:1;display:grid;grid-template-columns:max-content 1fr;grid-gap:",(0,z.Z)(2),";"),N=(0,v.Z)("div",{target:"ehb8hzc5"})({name:"182h23h",styles:"height:36px;width:36px;border-radius:3px;margin-right:0;top:auto"}),C=(0,v.Z)("div",{target:"ehb8hzc4"})({name:"1efi8gv",styles:"font-weight:bold"}),L=(0,v.Z)("div",{target:"ehb8hzc3"})("margin-top:",(0,z.Z)(.75),";font-size:0.8em;"),P=(0,v.Z)("div",{target:"ehb8hzc2"})({name:"82a6rk",styles:"flex:1"}),F=(0,v.Z)("div",{target:"ehb8hzc1"})("background:",(e=>e.theme.green300),";color:",(e=>e.theme.white),";padding:",(0,z.Z)(1)," ",(0,z.Z)(1.5),";border-radius:2px;font-size:0.8em;");F.defaultProps={children:(0,n.t)("Active")};const T=(0,v.Z)(f.ZP,{target:"ehb8hzc0"})({name:"lee4ct",styles:"width:350px"}),B=({provider:e,features:t,className:s})=>(0,S.tZ)(T,{containerClassName:s,body:(0,S.tZ)(x.Z,{features:t,hideHelpToggle:!0,message:(0,n.t)("%s SSO is disabled.",e.name),featureName:(0,n.t)("SSO Auth")}),children:(0,S.tZ)(w.Z,{icon:(0,S.tZ)(k._V,{}),children:(0,n.t)("disabled")})});B.displayName="LockedFeature";const I={google:0,github:1,okta:2,"active-directory":3,saml2:4,onelogin:5,rippling:6,auth0:7},E=({organization:e,providerList:t,activeProvider:s})=>{const r=e.features,i=(null!=t?t:[]).sort(((e,t)=>e.key in I?t.key in I?I[e.key]===I[t.key]?0:I[e.key]>I[t.key]?1:-1:1:-1)).sort(((e,t)=>{const s=r.includes((0,p.E7)(e.requiredFeature));return s===r.includes((0,p.E7)(t.requiredFeature))?0:s?-1:1})),o=e.require2FA&&i.some((({requiredFeature:e})=>r.includes((0,p.E7)(e))));return(0,S.BX)("div",{className:"sso",children:[(0,S.tZ)(m.Z,{title:"Authentication"}),(0,S.tZ)(g.Z,{}),(0,S.BX)(l.s_,{children:[(0,S.tZ)(l.V9,{children:(0,n.t)("Choose a provider")}),(0,S.BX)(l.N,{children:[!s&&(0,S.tZ)(l.aU,{type:"info",children:(0,n._N)("Get started with Single Sign-on for your organization by selecting a provider. Read more in our [link:SSO documentation].",{link:(0,S.tZ)(c.Z,{href:"https://docs.sentry.io/product/accounts/sso/"})})}),o&&(0,S.tZ)(l.aU,{type:"warning",children:(0,n.t)("Require 2FA will be disabled if you enable SSO.")}),(0,S.BX)("form",{action:"/organizations/".concat(e.slug,"/auth/configure/"),method:"POST",children:[(0,S.tZ)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:(0,u.Z)()}),(0,S.tZ)("input",{type:"hidden",name:"init",value:"1"}),i.map((e=>(0,S.tZ)(A,{provider:e,active:!!s&&e.key===s.key},e.key))),0===i.length&&(0,S.tZ)(h.Z,{children:(0,n.t)("No authentication providers are available.")})]})]})]})]})};E.displayName="OrganizationAuthList";const O=(0,a.Z)(E);class q extends d.Z{constructor(...e){super(...e),(0,r.Z)(this,"handleSendReminders",(e=>{this.setState({sendRemindersBusy:!0}),this.api.request("/organizations/".concat(this.props.params.orgId,"/auth-provider/send-reminders/"),{method:"POST",data:{},success:()=>(0,i.S9)((0,n.t)("Sent reminders to members")),error:()=>(0,i.Iw)((0,n.t)("Failed to send reminders")),complete:()=>this.setState({sendRemindersBusy:!1})})})),(0,r.Z)(this,"handleConfigure",(e=>{this.setState({busy:!0}),this.api.request("/organizations/".concat(this.props.params.orgId,"/auth-provider/"),{method:"POST",data:{provider:e,init:!0},success:e=>{e&&e.auth_url&&(window.location.href=e.auth_url)},error:()=>{this.setState({busy:!1})}})})),(0,r.Z)(this,"handleDisableProvider",(e=>{this.setState({busy:!0}),this.api.request("/organizations/".concat(this.props.params.orgId,"/auth-provider/"),{method:"DELETE",data:{provider:e},success:()=>{this.setState({provider:null,busy:!1})},error:()=>{this.setState({busy:!1})}})}))}UNSAFE_componentWillUpdate(e,t){const s=this.props.organization.access;t.provider&&s.includes("org:write")&&window.location.assign("/organizations/".concat(this.props.params.orgId,"/auth/configure/"))}getEndpoints(){return[["providerList","/organizations/".concat(this.props.params.orgId,"/auth-providers/")],["provider","/organizations/".concat(this.props.params.orgId,"/auth-provider/")]]}getTitle(){return(0,o.Z)((0,n.t)("Auth Settings"),this.props.organization.slug,!1)}renderBody(){const{providerList:e,provider:t}=this.state;if(null===e)return null;if(this.props.organization.access.includes("org:write")&&t)return this.renderLoading();const s=null==e?void 0:e.find((e=>e.key===(null==t?void 0:t.key)));return(0,S.tZ)(O,{activeProvider:s,providerList:e})}}const X=(0,a.Z)(q)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationAuth_index_tsx.bf5267d9b67cad806a3abbc90a629eb7.js.map