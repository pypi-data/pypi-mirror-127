"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupActivity_tsx"],{"./app/components/commitLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>u}),s("../node_modules/react/index.js");var n=s("./app/components/button.tsx"),r=s("./app/components/links/externalLink.tsx"),o=s("./app/icons/index.tsx"),i=s("./app/locale.tsx"),a=s("./app/utils.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const c=[{icon:(0,d.tZ)(o.Uv,{size:"xs"}),providerIds:["github","integrations:github","integrations:github_enterprise"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commit/").concat(t)},{icon:(0,d.tZ)(o.Ub,{size:"xs"}),providerIds:["bitbucket","integrations:bitbucket"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commits/").concat(t)},{icon:(0,d.tZ)(o.mT,{size:"xs"}),providerIds:["visualstudio","integrations:vsts"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commit/").concat(t)},{icon:(0,d.tZ)(o.Et,{size:"xs"}),providerIds:["gitlab","integrations:gitlab"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commit/").concat(t)}],u=function({inline:e,commitId:t,repository:s}){if(!t||!s)return(0,d.tZ)("span",{children:(0,i.t)("Unknown Commit")});const o=(0,a.e4)(t),u=c.find((e=>!!s.provider&&e.providerIds.includes(s.provider.id)));if(void 0===u)return(0,d.tZ)("span",{children:o});const l=s.url&&u.commitUrl({commitId:t,baseUrl:s.url});return e?(0,d.BX)(r.Z,{className:"inline-commit",href:l,children:[u.icon," "+o]}):(0,d.tZ)(n.ZP,{external:!0,href:l,size:"small",icon:u.icon,children:o})}},"./app/components/links/linkWithConfirmation.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var n=s("../node_modules/react/index.js"),r=s("../node_modules/classnames/index.js"),o=s.n(r),i=s("./app/components/confirm.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends n.PureComponent{render(){const{className:e,disabled:t,title:s,children:n,...r}=this.props;return(0,a.tZ)(i.Z,{...r,disabled:t,children:(0,a.tZ)("a",{href:"#",className:o()(e||"",{disabled:t}),title:s,children:n})})}}d.displayName="LinkWithConfirmation";const c=d},"./app/components/pullRequestLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var n=s("./app/components/links/externalLink.tsx"),r=s("./app/icons/index.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){if(!e.provider)return null;const{id:t}=e.provider;switch(t.includes(":")?t.split(":").pop():t){case"github":return(0,o.tZ)(r.Uv,{size:"xs"});case"gitlab":return(0,o.tZ)(r.Et,{size:"xs"});case"bitbucket":return(0,o.tZ)(r.Ub,{size:"xs"});default:return null}}const a=({pullRequest:e,repository:t,inline:s})=>{const r="".concat(t.name," #").concat(e.id,": ").concat(e.title);return e.externalUrl?(0,o.BX)(n.Z,{className:s?"inline-commit":"btn btn-default btn-sm",href:e.externalUrl,children:[i(t),s?"":" ",r]}):(0,o.tZ)("span",{children:r})}},"./app/components/reprocessedBox.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/components/events/styles.tsx"),a=s("./app/components/links/link.tsx"),d=s("./app/icons/index.tsx"),c=s("./app/locale.tsx"),u=s("./app/styles/space.tsx"),l=s("./app/utils/localStorage.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class h extends o.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{isBannerHidden:"true"===l.Z.getItem(this.getBannerUniqueId())}),(0,n.Z)(this,"handleBannerDismiss",(()=>{l.Z.setItem(this.getBannerUniqueId(),"true"),this.setState({isBannerHidden:!0})}))}getBannerUniqueId(){const{reprocessActivity:e}=this.props,{id:t}=e;return"reprocessed-activity-".concat(t,"-banner-dismissed")}renderMessage(){const{orgSlug:e,reprocessActivity:t,groupCount:s,groupId:n}=this.props,{data:r}=t,{eventCount:o,oldGroupId:i,newGroupId:d}=r,u="/organizations/".concat(e,"/issues/?query=reprocessing.original_issue_id:").concat(i);return 0===s?(0,c._N)("All events in this issue were moved during reprocessing. [link]",{link:(0,p.tZ)(a.Z,{to:u,children:(0,c.tn)("See %s new event","See %s new events",o)})}):(0,c._N)("Events in this issue were successfully reprocessed. [link]",{link:(0,p.tZ)(a.Z,{to:u,children:d===Number(n)?(0,c.tn)("See %s reprocessed event","See %s reprocessed events",o):(0,c.tn)("See %s new event","See %s new events",o)})})}render(){const{isBannerHidden:e}=this.state;if(e)return null;const{className:t}=this.props;return(0,p.tZ)(i.UP,{priority:"success",className:t,children:(0,p.BX)(g,{children:[(0,p.tZ)(d.DL,{color:"green300",isCircled:!0}),(0,p.tZ)("span",{children:this.renderMessage()}),(0,p.tZ)(b,{color:"green300","aria-label":(0,c.t)("Dismiss"),isCircled:!0,onClick:this.handleBannerDismiss})]})})}}h.displayName="ReprocessedBox";const m=h,g=(0,r.Z)(i._B,{target:"e17keqf51"})("&>svg:last-child{margin-right:0;margin-left:",(0,u.Z)(1),";}"),b=(0,r.Z)(d.bM,{target:"e17keqf50"})({name:"e0dnmk",styles:"cursor:pointer"})},"./app/views/organizationGroupDetails/groupActivity.tsx":(e,t,s)=>{s.r(t),s.d(t,{GroupActivity:()=>Ie,default:()=>je});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/actionCreators/group.tsx"),a=s("./app/actionCreators/indicator.tsx"),d=s("./app/components/activity/author.tsx"),c=s("./app/components/activity/item/index.tsx"),u=s("./app/styles/space.tsx"),l=s("./app/utils/marked.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const h=({className:e,text:t})=>(0,p.tZ)("div",{className:e,"data-test-id":"activity-note-body",dangerouslySetInnerHTML:{__html:(0,l.Z)(t)}});h.displayName="NoteBody";const m=h,g=(0,r.Z)("span",{target:"el2wm7k0"})({name:"eivff4",styles:"display:none"});var b=s("./app/components/links/linkWithConfirmation.tsx"),f=s("./app/components/tooltip.tsx"),x=s("./app/locale.tsx"),v=s("./app/stores/configStore.tsx");const Z=({authorName:e,user:t,onEdit:s,onDelete:n})=>{const r=v.Z.get("user"),o=r&&(r.isSuperuser||(null==t?void 0:t.id)===r.id);return(0,p.BX)("div",{children:[(0,p.tZ)(d.Z,{children:e}),o&&(0,p.BX)(g,{children:[(0,p.tZ)(f.Z,{title:(0,x.t)("You can edit this comment due to your superuser status"),disabled:!r.isSuperuser,children:(0,p.tZ)(S,{onClick:s,children:(0,x.t)("Edit")})}),(0,p.tZ)(f.Z,{title:(0,x.t)("You can delete this comment due to your superuser status"),disabled:!r.isSuperuser,children:(0,p.tZ)(b.Z,{title:(0,x.t)("Remove"),message:(0,x.t)("Are you sure you wish to delete this comment?"),onConfirm:n,children:(0,p.tZ)(_,{children:(0,x.t)("Remove")})})})]})]})};Z.displayName="NoteHeader";const y=e=>"\n  padding: 0 7px;\n  color: ".concat(e.theme.gray200,";\n  font-weight: normal;\n"),S=(0,r.Z)("a",{target:"e1u67hq51"})(y,";margin-left:7px;&:hover{color:",(e=>e.theme.gray300),";}"),_=(0,r.Z)("span",{target:"e1u67hq50"})(y,";border-left:1px solid ",(e=>e.theme.border),";&:hover{color:",(e=>e.theme.error),";}"),w=Z;s("../node_modules/core-js/modules/es.string.trim.js"),s("../node_modules/core-js/modules/es.string.replace.js");var N=s("../node_modules/react-mentions/dist/react-mentions.esm.js"),E=s("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),k=s("./app/components/button.tsx"),C=s("./app/components/navTabs.tsx"),I=s("./app/icons/index.tsx"),j=s("./app/styles/text.tsx"),T=s("../node_modules/lodash/uniqBy.js"),R=s.n(T),U=s("./app/stores/memberListStore.tsx"),D=s("./app/utils/callIfFunction.tsx"),A=s("./app/utils/isRenderFunc.tsx"),B=s("./app/utils/projects.tsx"),O=s("./app/utils/withOrganization.tsx");class M extends o.PureComponent{constructor(...e){super(...e),(0,n.Z)(this,"state",{members:U.Z.getAll()}),(0,n.Z)(this,"listeners",[U.Z.listen((e=>{this.handleMemberListUpdate(e)}),void 0)]),(0,n.Z)(this,"handleMemberListUpdate",(e=>{e!==this.state.members&&this.setState({members:e})})),(0,n.Z)(this,"renderChildren",(({projects:e})=>{const{children:t,me:s}=this.props;return(0,A.l)(t)?t({members:this.getMemberList(this.state.members,s),teams:this.getTeams(e)}):null}))}componentWillUnmount(){this.listeners.forEach(D.g)}getMemberList(e,t){return R()(e,(({id:e})=>e)).filter((({id:e})=>!t||t.id!==e)).map((e=>{return{id:(t=e.id,"user:".concat(t)),display:e.name,email:e.email};var t}))}getTeams(e){return R()(e.map((({teams:e})=>e)).reduce(((e,t)=>e.concat(t||[])),[]),"id").map((e=>{return{id:(t=e.id,"team:".concat(t)),display:"#".concat(e.slug),email:e.id};var t}))}render(){const{organization:e,projectSlugs:t}=this.props;return t&&t.length?(0,p.tZ)(B.Z,{slugs:t,orgId:e.slug,children:this.renderChildren}):this.renderChildren({projects:[]})}}M.displayName="Mentionables";const L=(0,O.Z)(M);function z({theme:e,minHeight:t}){return{control:{backgroundColor:"".concat(e.background),fontSize:15,fontWeight:"normal"},input:{margin:0},"&singleLine":{control:{display:"inline-block",width:130},highlighter:{padding:1,border:"2px inset transparent"},input:{padding:1,border:"2px inset"}},"&multiLine":{control:{fontFamily:"Rubik, Avenir Next, Helvetica Neue, sans-serif",minHeight:t},highlighter:{padding:20,minHeight:t},input:{padding:"".concat((0,u.Z)(1.5)," ").concat((0,u.Z)(2)," 0"),minHeight:t,overflow:"auto",outline:0,border:0}},suggestions:{list:{maxHeight:150,overflow:"auto",backgroundColor:"".concat(e.background),border:"1px solid rgba(0,0,0,0.15)",fontSize:12},item:{padding:"5px 15px",borderBottom:"1px solid rgba(0,0,0,0.15)","&focused":{backgroundColor:"".concat(e.backgroundSecondary)}}}}}const P={placeholder:(0,x.t)("Add a comment.\nTag users with @, or teams with #"),minHeight:140,busy:!1};class H extends o.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{preview:!1,value:this.props.text||"",memberMentions:[],teamMentions:[]}),(0,n.Z)(this,"handleToggleEdit",(()=>{this.setState({preview:!1})})),(0,n.Z)(this,"handleTogglePreview",(()=>{this.setState({preview:!0})})),(0,n.Z)(this,"handleSubmit",(e=>{e.preventDefault(),this.submitForm()})),(0,n.Z)(this,"handleChange",(e=>{this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e,{updating:!!this.props.modelId})})),(0,n.Z)(this,"handleKeyDown",(e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&this.canSubmit&&this.submitForm()})),(0,n.Z)(this,"handleCancel",(e=>{e.preventDefault(),this.finish()})),(0,n.Z)(this,"handleAddMember",((e,t)=>{this.setState((({memberMentions:s})=>({memberMentions:[...s,["".concat(e),t]]})))})),(0,n.Z)(this,"handleAddTeam",((e,t)=>{this.setState((({teamMentions:s})=>({teamMentions:[...s,["".concat(e),t]]})))}))}get canSubmit(){return""!==this.state.value.trim()}cleanMarkdown(e){return e.replace(/\[sentry\.strip:member\]/g,"@").replace(/\[sentry\.strip:team\]/g,"")}submitForm(){this.props.modelId?this.update():this.create()}create(){const{onCreate:e}=this.props;e&&e({text:this.cleanMarkdown(this.state.value),mentions:this.finalizeMentions()})}update(){const{onUpdate:e}=this.props;e&&e({text:this.cleanMarkdown(this.state.value),mentions:this.finalizeMentions()})}finish(){this.props.onEditFinish&&this.props.onEditFinish()}finalizeMentions(){const{memberMentions:e,teamMentions:t}=this.state;return[...e,...t].filter((e=>-1!==this.state.value.indexOf(e[1]))).map((e=>e[0]))}render(){const{preview:e,value:t}=this.state,{modelId:s,busy:n,placeholder:r,minHeight:o,errorJSON:i,memberList:a,teams:d,theme:c}=this.props,u=!!s,h=u?(0,x.t)("Save Comment"):(0,x.t)("Post Comment"),m=i&&("string"==typeof i.detail?i.detail:i.detail&&i.detail.message||(0,x.t)("Unable to post comment"))||null;return(0,p.BX)(F,{"data-test-id":"note-input-form",noValidate:!0,onSubmit:this.handleSubmit,children:[(0,p.BX)(Y,{children:[(0,p.tZ)(J,{className:e?"":"active",children:(0,p.tZ)(Q,{onClick:this.handleToggleEdit,children:u?(0,x.t)("Edit"):(0,x.t)("Write")})}),(0,p.tZ)(J,{className:e?"active":"",children:(0,p.tZ)(Q,{onClick:this.handleTogglePreview,children:(0,x.t)("Preview")})}),(0,p.BX)(ee,{children:[(0,p.tZ)(I.kh,{}),(0,p.tZ)(te,{children:(0,x.t)("Markdown supported")})]})]}),(0,p.tZ)($,{children:e?(0,p.tZ)(se,{minHeight:o,dangerouslySetInnerHTML:{__html:(0,l.Z)(this.cleanMarkdown(t))}}):(0,p.BX)(N.r,{style:z({theme:c,minHeight:o}),placeholder:r,onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:t,required:!0,autoFocus:!0,children:[(0,p.tZ)(N.p,{trigger:"@",data:a,onAdd:this.handleAddMember,displayTransform:(e,t)=>"@".concat(t),markup:"**[sentry.strip:member]__display__**",appendSpaceOnAdd:!0}),(0,p.tZ)(N.p,{trigger:"#",data:d,onAdd:this.handleAddTeam,markup:"**[sentry.strip:team]__display__**",appendSpaceOnAdd:!0})]})}),(0,p.BX)(K,{children:[(0,p.tZ)("div",{children:m&&(0,p.tZ)(W,{children:m})}),(0,p.BX)("div",{children:[u&&(0,p.tZ)(X,{priority:"danger",type:"button",onClick:this.handleCancel,children:(0,x.t)("Cancel")}),(0,p.tZ)(X,{error:m,type:"submit",disabled:n||!this.canSubmit,children:h})]})]})]})}}H.displayName="NoteInputComponent";const q=(0,E.b)(H);class G extends o.Component{constructor(...e){super(...e),(0,n.Z)(this,"renderInput",(({members:e,teams:t})=>{const{projectSlugs:s,...n}=this.props;return(0,p.tZ)(q,{memberList:e,teams:t,...n})}))}render(){const{projectSlugs:e}=this.props,t=v.Z.get("user");return(0,p.tZ)(L,{me:t,projectSlugs:e,children:this.renderInput})}}G.displayName="NoteInputContainer",(0,n.Z)(G,"defaultProps",P);const V=G,F=(0,r.Z)("form",{target:"ewxfxsb10"})("font-size:15px;line-height:22px;transition:padding 0.2s ease-in-out;",(e=>(e=>e.error?"\n  color: ".concat(e.theme.error,";\n  margin: -1px;\n  border: 1px solid ").concat(e.theme.error,";\n  border-radius: ").concat(e.theme.borderRadius,";\n\n    &:before {\n      display: block;\n      content: '';\n      width: 0;\n      height: 0;\n      border-top: 7px solid transparent;\n      border-bottom: 7px solid transparent;\n      border-right: 7px solid ").concat(e.theme.red300,";\n      position: absolute;\n      left: -7px;\n      top: 12px;\n    }\n\n    &:after {\n      display: block;\n      content: '';\n      width: 0;\n      height: 0;\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-right: 6px solid #fff;\n      position: absolute;\n      left: -5px;\n      top: 12px;\n    }\n  "):"")(e)),";"),$=(0,r.Z)("div",{target:"ewxfxsb9"})(j.Z,";"),K=(0,r.Z)("div",{target:"ewxfxsb8"})("display:flex;border-top:1px solid ",(e=>e.theme.border),";justify-content:space-between;transition:opacity 0.2s ease-in-out;padding-left:",(0,u.Z)(1.5),";"),X=(0,r.Z)(k.ZP,{target:"ewxfxsb7"})("font-size:13px;margin:-1px -1px -1px;border-radius:0 0 ",(e=>e.theme.borderRadius),";",(e=>e.error&&"\n  &, &:active, &:focus, &:hover {\n  border-bottom-color: ".concat(e.theme.error,";\n  border-right-color: ").concat(e.theme.error,";\n  }\n  ")),";"),W=(0,r.Z)("span",{target:"ewxfxsb6"})("display:flex;align-items:center;height:100%;color:",(e=>e.theme.error),";font-size:0.9em;"),Y=(0,r.Z)(C.Z,{target:"ewxfxsb5"})("padding:",(0,u.Z)(1)," ",(0,u.Z)(2)," 0;border-bottom:1px solid ",(e=>e.theme.border),";margin-bottom:0;"),J=(0,r.Z)("li",{target:"ewxfxsb4"})({name:"1uwyn4z",styles:"margin-right:13px"}),Q=(0,r.Z)("a",{target:"ewxfxsb3"})({name:"k7xpx9",styles:".nav-tabs>li>&{font-size:15px;padding-bottom:5px;}"}),ee=(0,r.Z)(J,{target:"ewxfxsb2"})(".nav-tabs>&{display:flex;align-items:center;margin-right:0;color:",(e=>e.theme.subText),";float:right;}"),te=(0,r.Z)("span",{target:"ewxfxsb1"})("margin-left:",(0,u.Z)(.5),";font-size:14px;"),se=(0,r.Z)("div",{target:"ewxfxsb0"})((e=>(e=>{const{minHeight:t,padding:s,overflow:n,border:r}=z(e)["&multiLine"].input;return"\n  max-height: 1000px;\n  max-width: 100%;\n  ".concat(t&&"min-height: ".concat(t,"px")||"",";\n  padding: ").concat(s,";\n  overflow: ").concat(n,";\n  border: ").concat(r,";\n")})(e)),";padding-bottom:",(0,u.Z)(1),";");function ne(e){const[t,s]=(0,o.useState)(!1),{modelId:n,user:r,dateCreated:i,text:a,authorName:d,hideDate:c,minHeight:u,showTime:l,projectSlugs:h,onDelete:g,onCreate:b,onUpdate:f}=e,x={hideDate:c,showTime:l,id:"activity-item-".concat(n),author:{type:"user",user:r},date:i};if(!t){const t=(0,p.tZ)(w,{authorName:d,user:r,onEdit:()=>s(!0),onDelete:()=>g(e)});return(0,p.tZ)(oe,{...x,header:t,children:(0,p.tZ)(m,{text:a})})}return(0,p.tZ)(re,{...x,children:()=>(0,p.tZ)(V,{modelId:n,minHeight:u,text:a,projectSlugs:h,onEditFinish:()=>s(!1),onUpdate:t=>{f(t,e),s(!1)},onCreate:e=>null==b?void 0:b(e)})})}ne.displayName="Note";const re=(0,r.Z)(c.Z,{target:"e1hfgqls1"})("ul{list-style:disc;}h1,h2,h3,h4,p,ul:not(.nav),ol,pre,hr,blockquote{margin-bottom:",(0,u.Z)(2),";}ul:not(.nav),ol{padding-left:20px;}p{a{word-wrap:break-word;}}blockquote{font-size:15px;border-left:5px solid ",(e=>e.theme.innerBorder),";padding-left:",(0,u.Z)(1),";margin-left:0;}"),oe=(0,r.Z)(re,{target:"e1hfgqls0"})("&:hover{",g,"{display:inline-block;}}"),ie=ne;var ae=s("../node_modules/@sentry/minimal/esm/index.js"),de=s("../node_modules/lodash/debounce.js"),ce=s.n(de),ue=s("./app/utils/localStorage.tsx");class le extends o.Component{constructor(...e){super(...e),(0,n.Z)(this,"save",ce()((e=>{const{itemKey:t,onSave:s}=this.props,n=this.fetchFromStorage()||{};this.saveToStorage({...n,[t]:s(e)})}),150)),(0,n.Z)(this,"handleChange",((e,t={})=>{const{onChange:s}=this.props;s&&s(e,t),t.updating||this.save(e.target.value)})),(0,n.Z)(this,"handleCreate",(e=>{const{itemKey:t,onCreate:s}=this.props;s&&s(e);const n=this.fetchFromStorage()||{};if(!n.hasOwnProperty(t))return;const{[t]:r,...o}=n;this.saveToStorage(o)}))}fetchFromStorage(){const{storageKey:e}=this.props,t=ue.Z.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(e){return ae.$e((s=>{s.setExtra("storage",t),ae.Tb(e)})),null}}saveToStorage(e){const{storageKey:t}=this.props;try{ue.Z.setItem(t,JSON.stringify(e))}catch(t){ae.Tb(t),ae.$e((s=>{s.setExtra("storage",e),ae.Tb(t)}))}}getValue(){const{itemKey:e,text:t,onLoad:s}=this.props;if(t)return t;const n=this.fetchFromStorage();return n&&n.hasOwnProperty(e)?s?s(n[e]):n[e]:""}render(){return(0,p.tZ)(V,{...this.props,text:this.getValue(),onCreate:this.handleCreate,onChange:this.handleChange})}}le.displayName="NoteInputWithStorage",(0,n.Z)(le,"defaultProps",{onLoad:e=>e,onSave:e=>e});const pe=le;var he=s("./app/components/errorBoundary.tsx"),me=s("./app/components/reprocessedBox.tsx"),ge=s("./app/constants/index.tsx"),be=s("./app/types/index.tsx"),fe=s("./app/utils/guid.tsx"),xe=s("./app/utils/withApi.tsx"),ve=s("./app/components/commitLink.tsx"),Ze=s("./app/components/duration.tsx"),ye=s("./app/components/links/externalLink.tsx"),Se=s("./app/components/links/link.tsx"),_e=s("./app/components/pullRequestLink.tsx"),we=s("./app/components/version.tsx"),Ne=s("./app/stores/teamStore.tsx");function Ee({activity:e,orgSlug:t,projectId:s,author:n}){const r="/organizations/".concat(t,"/issues/");return(0,p.tZ)(o.Fragment,{children:function(){switch(e.type){case be.fc.NOTE:return(0,x._N)("[author] left a comment",{author:n});case be.fc.SET_RESOLVED:return(0,x._N)("[author] marked this issue as resolved",{author:n});case be.fc.SET_RESOLVED_BY_AGE:return(0,x._N)("[author] marked this issue as resolved due to inactivity",{author:n});case be.fc.SET_RESOLVED_IN_RELEASE:const{current_release_version:o,version:i}=e.data;return o?(0,x._N)("[author] marked this issue as resolved in releases greater than [version]",{author:n,version:(0,p.tZ)(we.Z,{version:o,projectId:s,tooltipRawVersion:!0})}):i?(0,x._N)("[author] marked this issue as resolved in [version]",{author:n,version:(0,p.tZ)(we.Z,{version:i,projectId:s,tooltipRawVersion:!0})}):(0,x._N)("[author] marked this issue as resolved in the upcoming release",{author:n});case be.fc.SET_RESOLVED_IN_COMMIT:return(0,x._N)("[author] marked this issue as resolved in [version]",{author:n,version:(0,p.tZ)(ve.Z,{inline:!0,commitId:e.data.commit.id,repository:e.data.commit.repository})});case be.fc.SET_RESOLVED_IN_PULL_REQUEST:{const{data:t}=e,{pullRequest:s}=t;return(0,x._N)("[author] marked this issue as resolved in [version]",{author:n,version:(0,p.tZ)(_e.Z,{inline:!0,pullRequest:s,repository:s.repository})})}case be.fc.SET_UNRESOLVED:return(0,x._N)("[author] marked this issue as unresolved",{author:n});case be.fc.SET_IGNORED:{const{data:t}=e;return function(e){return e.ignoreDuration?(0,x._N)("[author] ignored this issue for [duration]",{author:n,duration:(0,p.tZ)(Ze.Z,{seconds:60*e.ignoreDuration})}):e.ignoreCount&&e.ignoreWindow?(0,x._N)("[author] ignored this issue until it happens [count] time(s) in [duration]",{author:n,count:e.ignoreCount,duration:(0,p.tZ)(Ze.Z,{seconds:60*e.ignoreWindow})}):e.ignoreCount?(0,x._N)("[author] ignored this issue until it happens [count] time(s)",{author:n,count:e.ignoreCount}):e.ignoreUserCount&&e.ignoreUserWindow?(0,x._N)("[author] ignored this issue until it affects [count] user(s) in [duration]",{author:n,count:e.ignoreUserCount,duration:(0,p.tZ)(Ze.Z,{seconds:60*e.ignoreUserWindow})}):e.ignoreUserCount?(0,x._N)("[author] ignored this issue until it affects [count] user(s)",{author:n,count:e.ignoreUserCount}):(0,x._N)("[author] ignored this issue",{author:n})}(t)}case be.fc.SET_PUBLIC:return(0,x._N)("[author] made this issue public",{author:n});case be.fc.SET_PRIVATE:return(0,x._N)("[author] made this issue private",{author:n});case be.fc.SET_REGRESSION:{const{data:t}=e;return t.version?(0,x._N)("[author] marked this issue as a regression in [version]",{author:n,version:(0,p.tZ)(we.Z,{version:t.version,projectId:s,tooltipRawVersion:!0})}):(0,x._N)("[author] marked this issue as a regression",{author:n})}case be.fc.CREATE_ISSUE:{const{data:t}=e;return(0,x._N)("[author] created an issue on [provider] titled [title]",{author:n,provider:t.provider,title:(0,p.tZ)(ye.Z,{href:t.location,children:t.title})})}case be.fc.UNMERGE_SOURCE:{const{data:t}=e,{destination:s,fingerprints:o}=t;return(0,x.tn)("%2$s migrated %1$s fingerprint to %3$s","%2$s migrated %1$s fingerprints to %3$s",o.length,n,s?(0,p.tZ)(Se.Z,{to:"".concat(r).concat(s.id),children:s.shortId}):(0,x.t)("a group"))}case be.fc.UNMERGE_DESTINATION:{const{data:t}=e,{source:s,fingerprints:o}=t;return(0,x.tn)("%2$s migrated %1$s fingerprint from %3$s","%2$s migrated %1$s fingerprints from %3$s",o.length,n,s?(0,p.tZ)(Se.Z,{to:"".concat(r).concat(s.id),children:s.shortId}):(0,x.t)("a group"))}case be.fc.FIRST_SEEN:return(0,x._N)("[author] first saw this issue",{author:n});case be.fc.ASSIGNED:{const{data:t}=e;return function(t){var s;let r;if("team"===t.assigneeType){const e=Ne.Z.getById(t.assignee);return r=e?e.slug:"<unknown-team>",(0,x._N)("[author] assigned this issue to #[assignee]",{author:n,assignee:r})}return e.user&&e.assignee===e.user.id?(0,x._N)("[author] assigned this issue to themselves",{author:n}):(r=U.Z.getById(t.assignee),"object"==typeof r&&null!==(s=r)&&void 0!==s&&s.email?(0,x._N)("[author] assigned this issue to [assignee]",{author:n,assignee:r.email}):(0,x._N)("[author] assigned this issue to an unknown user",{author:n}))}(t)}case be.fc.UNASSIGNED:return(0,x._N)("[author] unassigned this issue",{author:n});case be.fc.MERGE:return(0,x.tn)("%2$s merged %1$s issue into this issue","%2$s merged %1$s issues into this issue",e.data.issues.length,n);case be.fc.REPROCESS:{const{data:s}=e,{oldGroupId:r,eventCount:o}=s;return(0,x._N)("[author] reprocessed the events in this issue. [new-events]",{author:n,"new-events":(0,p.tZ)(Se.Z,{to:"/organizations/".concat(t,"/issues/?query=reprocessing.original_issue_id:").concat(r),children:(0,x.tn)("See %s new event","See %s new events",o)})})}case be.fc.MARK_REVIEWED:return(0,x._N)("[author] marked this issue as reviewed",{author:n});default:return""}}()})}Ee.displayName="GroupActivityItem";const ke=Ee;var Ce=s("./app/views/organizationGroupDetails/utils.tsx");class Ie extends o.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{createBusy:!1,error:!1,errorJSON:null,inputId:(0,fe.E)()}),(0,n.Z)(this,"handleNoteDelete",(async({modelId:e,text:t})=>{const{api:s,group:n}=this.props;(0,a.E3)((0,x.t)("Removing comment..."));try{await(0,i.f_)(s,n,e,t),(0,a.B8)()}catch(e){(0,a.Iw)((0,x.t)("Failed to delete comment"))}})),(0,n.Z)(this,"handleNoteCreate",(async e=>{const{api:t,group:s}=this.props;this.setState({createBusy:!0}),(0,a.E3)((0,x.t)("Posting comment..."));try{await(0,i.kT)(t,s,e),this.setState({createBusy:!1,inputId:(0,fe.E)()}),(0,a.B8)()}catch(e){this.setState({createBusy:!1,error:!0,errorJSON:e.responseJSON||ge.N7}),(0,a.Iw)((0,x.t)("Unable to post comment"))}})),(0,n.Z)(this,"handleNoteUpdate",(async(e,{modelId:t,text:s})=>{const{api:n,group:r}=this.props;(0,a.E3)((0,x.t)("Updating comment..."));try{await(0,i.Qk)(n,r,e,t,s),(0,a.B8)()}catch(e){this.setState({error:!0,errorJSON:e.responseJSON||ge.N7}),(0,a.Iw)((0,x.t)("Unable to update comment"))}}))}render(){const{group:e,organization:t}=this.props,{activity:s,count:n,id:r}=e,i=Number(n),a=(0,Ce.Ad)(s),u=(0,Ce.M3)(e,a),l=v.Z.get("user"),h=e&&e.project?[e.project.slug]:[],m={minHeight:140,group:e,projectSlugs:h,placeholder:(0,x.t)("Add details or updates to this event. \nTag users with @, or teams with #")};return(0,p.BX)(o.Fragment,{children:[(u===Ce.m7.REPROCESSED_AND_HASNT_EVENT||u===Ce.m7.REPROCESSED_AND_HAS_EVENT)&&(0,p.tZ)(Te,{reprocessActivity:a,groupCount:i,orgSlug:t.slug,groupId:r}),(0,p.tZ)("div",{className:"row",children:(0,p.tZ)("div",{className:"col-md-9",children:(0,p.BX)("div",{children:[(0,p.tZ)(c.Z,{author:{type:"user",user:l},children:()=>(0,p.tZ)(pe,{storageKey:"groupinput:latest",itemKey:e.id,onCreate:this.handleNoteCreate,busy:this.state.createBusy,error:this.state.error,errorJSON:this.state.errorJSON,...m},this.state.inputId)}),e.activity.map((t=>{var s;const n=t.user?t.user.name:"Sentry";return t.type===be.fc.NOTE?(0,p.tZ)(he.Z,{mini:!0,children:(0,p.tZ)(ie,{showTime:!1,text:t.data.text,modelId:t.id,user:t.user,dateCreated:t.dateCreated,authorName:n,onDelete:this.handleNoteDelete,onUpdate:this.handleNoteUpdate,...m})},"note-".concat(t.id)):(0,p.tZ)(he.Z,{mini:!0,children:(0,p.tZ)(c.Z,{author:{type:t.user?"user":"system",user:null!==(s=t.user)&&void 0!==s?s:void 0},date:t.dateCreated,header:(0,p.tZ)(ke,{author:(0,p.tZ)(d.Z,{children:n}),activity:t,orgSlug:this.props.params.orgId,projectId:e.project.id})})},"item-".concat(t.id))}))]})})})]})}}Ie.displayName="GroupActivity";const je=(0,xe.Z)((0,O.Z)(Ie)),Te=(0,r.Z)(me.Z,{target:"e1emkr30"})("margin:-",(0,u.Z)(3)," -",(0,u.Z)(4)," ",(0,u.Z)(4)," -",(0,u.Z)(4),";z-index:1;")},"./app/views/organizationGroupDetails/utils.tsx":(e,t,s)=>{s.d(t,{MN:()=>c,V7:()=>u,g5:()=>l,dG:()=>p,sC:()=>m,Ad:()=>g,m7:()=>b,M3:()=>f}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("../node_modules/lodash/orderBy.js"),r=s.n(n),o=s("./app/actionCreators/group.tsx"),i=s("./app/api.tsx"),a=s("./app/locale.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");async function c(e,t,s,n,r,o){const i="latest"===n||"oldest"===n?"/issues/".concat(s,"/events/").concat(n,"/"):"/projects/".concat(t,"/").concat(o,"/events/").concat(n,"/"),a={};return 0!==r.length&&(a.environment=r),await e.requestPromise(i,{query:a})}function u(e,t,s,n){(0,o.Gv)(e,{orgId:t,projectId:s,itemIds:[n],failSilently:!0,data:{hasSeen:!0}},{})}function l(e,t){return(new i.KU).requestPromise("/issues/".concat(e,"/user-reports/"),{includeAllArgs:!0,query:t})}function p(e){const t=e.tags.find((({key:e})=>"environment"===e));return t?t.value:null}const h={commented:(0,a.t)("You're receiving workflow notifications because you have commented on this issue."),assigned:(0,a.t)("You're receiving workflow notifications because you were assigned to this issue."),bookmarked:(0,a.t)("You're receiving workflow notifications because you have bookmarked this issue."),changed_status:(0,a.t)("You're receiving workflow notifications because you have changed the status of this issue."),mentioned:(0,a.t)("You're receiving workflow notifications because you have been mentioned in this issue.")};function m(e,t=!1){if(e.subscriptionDetails&&e.subscriptionDetails.disabled)return(0,a._N)("You have [link:disabled workflow notifications] for this project.",{link:t?(0,d.tZ)("span",{}):(0,d.tZ)("a",{href:"/account/settings/notifications/"})});if(!e.isSubscribed)return(0,a.t)("Subscribe to workflow notifications for this issue");if(e.subscriptionDetails){const{reason:t}=e.subscriptionDetails;if("unknown"===t)return(0,a.t)("You're receiving workflow notifications because you are subscribed to this issue.");if(t&&h.hasOwnProperty(t))return h[t]}return(0,a._N)("You're receiving updates because you are [link:subscribed to workflow notifications] for this project.",{link:t?(0,d.tZ)("span",{}):(0,d.tZ)("a",{href:"/account/settings/notifications/"})})}function g(e){return r()([...e],(({dateCreated:e})=>new Date(e)),["desc"])[0]}let b;function f(e,t){const{status:s,count:n,activity:r}=e,o=Number(n);switch(s){case"reprocessing":return b.REPROCESSING;case"unresolved":{const e=null!=t?t:g(r);return"reprocess"===(null==e?void 0:e.type)?0===o?b.REPROCESSED_AND_HASNT_EVENT:b.REPROCESSED_AND_HAS_EVENT:b.NO_STATUS}default:return b.NO_STATUS}}!function(e){e.REPROCESSED_AND_HASNT_EVENT="reprocessed_and_hasnt_event",e.REPROCESSED_AND_HAS_EVENT="reprocessed_and_has_event",e.REPROCESSING="reprocessing",e.NO_STATUS="no_status"}(b||(b={}))}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupActivity_tsx.93a76f149025d716e539a9f5e72b01a3.js.map