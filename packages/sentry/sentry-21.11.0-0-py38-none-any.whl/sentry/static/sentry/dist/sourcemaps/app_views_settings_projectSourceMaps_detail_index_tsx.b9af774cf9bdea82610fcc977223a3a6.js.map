{"version":3,"file":"chunks/app_views_settings_projectSourceMaps_detail_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/acl/role.tsx","webpack:///./app/components/fileSize.tsx","webpack:///./app/utils/isActiveSuperuser.tsx","webpack:///./app/utils/routeTitle.tsx","webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/projectSourceMaps/detail/sourceMapsArtifactRow.tsx","webpack:///./app/views/settings/projectSourceMaps/detail/index.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport ConfigStore from 'app/stores/configStore';\nimport {Organization} from 'app/types';\nimport {isActiveSuperuser} from 'app/utils/isActiveSuperuser';\nimport {isRenderFunc} from 'app/utils/isRenderFunc';\nimport withOrganization from 'app/utils/withOrganization';\n\ntype RoleRenderProps = {\n  hasRole: boolean;\n};\n\ntype ChildrenRenderFn = (props: RoleRenderProps) => React.ReactNode;\n\ntype Props = {\n  /**\n   * Minimum required role\n   */\n  role: string;\n  /**\n   * Current Organization\n   */\n  organization: Organization;\n  /**\n   * If children is a function then will be treated as a render prop and\n   * passed RoleRenderProps.\n   *\n   * The other interface is more simple, only show `children` if user has\n   * the minimum required role.\n   */\n  children: React.ReactNode | ChildrenRenderFn;\n};\n\nclass Role extends React.Component<Props> {\n  hasRole() {\n    const user = ConfigStore.get('user');\n    const {organization, role} = this.props;\n    const {availableRoles} = organization;\n\n    const currentRole = organization.role ?? '';\n\n    if (!user) {\n      return false;\n    }\n\n    if (isActiveSuperuser()) {\n      return true;\n    }\n\n    if (!Array.isArray(availableRoles)) {\n      return false;\n    }\n\n    const roleIds = availableRoles.map(r => r.id);\n\n    if (!roleIds.includes(role) || !roleIds.includes(currentRole)) {\n      return false;\n    }\n\n    const requiredIndex = roleIds.indexOf(role);\n    const currentIndex = roleIds.indexOf(currentRole);\n    return currentIndex >= requiredIndex;\n  }\n\n  render() {\n    const {children} = this.props;\n    const hasRole = this.hasRole();\n\n    if (isRenderFunc<ChildrenRenderFn>(children)) {\n      return children({hasRole});\n    }\n\n    return hasRole && children ? children : null;\n  }\n}\n\nexport default withOrganization(Role);\n","import styled from '@emotion/styled';\n\nimport {formatBytesBase2} from 'app/utils';\nimport getDynamicText from 'app/utils/getDynamicText';\n\ntype Props = {\n  className?: string;\n  bytes: number;\n};\n\nfunction FileSize(props: Props) {\n  const {className, bytes} = props;\n\n  return (\n    <Span className={className}>\n      {getDynamicText({value: formatBytesBase2(bytes), fixed: 'xx KB'})}\n    </Span>\n  );\n}\n\nconst Span = styled('span')`\n  font-variant-numeric: tabular-nums;\n`;\n\nexport default FileSize;\n","import Cookies from 'js-cookie';\n\nimport ConfigStore from 'app/stores/configStore';\n\nconst SUPERUSER_COOKIE_NAME = 'su';\n\n/**\n * Checking for just isSuperuser on a config object may not be enough as backend often checks for *active* superuser.\n * We therefore check both isSuperuser flag AND superuser session cookie.\n */\nexport function isActiveSuperuser() {\n  const {isSuperuser} = ConfigStore.get('user') || {};\n\n  if (isSuperuser) {\n    /**\n     * Superuser cookie cannot be checked for existence as it is HttpOnly.\n     * As a workaround, we try to change it to something else and if that fails we can assume that it's being present.\n     * There may be an edgecase where it's present and expired but for current usage it's not a big deal.\n     */\n    Cookies.set(SUPERUSER_COOKIE_NAME, 'test');\n\n    if (Cookies.get(SUPERUSER_COOKIE_NAME) === undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","function routeTitleGen(\n  routeName: string,\n  orgSlug: string,\n  withSentry: boolean = true,\n  projectSlug?: string\n): string {\n  const tmplBase = `${routeName} - ${orgSlug}`;\n  const tmpl = projectSlug ? `${tmplBase} - ${projectSlug}` : tmplBase;\n\n  return withSentry ? `${tmpl} - Sentry` : tmpl;\n}\n\nexport default routeTitleGen;\n","import * as React from 'react';\nimport DocumentTitle from 'react-document-title';\n\nimport AsyncComponent from 'app/components/asyncComponent';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    const title = this.getTitle();\n    return (\n      <DocumentTitle title={`${title ? `${title} - ` : ''}Sentry`}>\n        {this.renderComponent() as React.ReactChild}\n      </DocumentTitle>\n    );\n  }\n}\n","import {Fragment} from 'react';\nimport styled from '@emotion/styled';\n\nimport Access from 'app/components/acl/access';\nimport Role from 'app/components/acl/role';\nimport Button from 'app/components/button';\nimport ButtonBar from 'app/components/buttonBar';\nimport Confirm from 'app/components/confirm';\nimport FileSize from 'app/components/fileSize';\nimport Tag from 'app/components/tag';\nimport TimeSince from 'app/components/timeSince';\nimport Tooltip from 'app/components/tooltip';\nimport {IconClock, IconDelete, IconDownload} from 'app/icons';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {Artifact} from 'app/types';\n\ntype Props = {\n  artifact: Artifact;\n  onDelete: (id: string) => void;\n  downloadUrl: string;\n  downloadRole: string;\n};\n\nconst SourceMapsArtifactRow = ({\n  artifact,\n  onDelete,\n  downloadUrl,\n  downloadRole,\n}: Props) => {\n  const {name, size, dateCreated, id, dist} = artifact;\n\n  const handleDeleteClick = () => {\n    onDelete(id);\n  };\n\n  return (\n    <Fragment>\n      <NameColumn>\n        <Name>{name || `(${t('empty')})`}</Name>\n        <TimeAndDistWrapper>\n          <TimeWrapper>\n            <IconClock size=\"sm\" />\n            <TimeSince date={dateCreated} />\n          </TimeWrapper>\n          <StyledTag\n            type={dist ? 'info' : undefined}\n            tooltipText={dist ? undefined : t('No distribution set')}\n          >\n            {dist ?? t('none')}\n          </StyledTag>\n        </TimeAndDistWrapper>\n      </NameColumn>\n      <SizeColumn>\n        <FileSize bytes={size} />\n      </SizeColumn>\n      <ActionsColumn>\n        <ButtonBar gap={0.5}>\n          <Role role={downloadRole}>\n            {({hasRole}) => (\n              <Tooltip\n                title={t('You do not have permission to download artifacts.')}\n                disabled={hasRole}\n              >\n                <Button\n                  size=\"small\"\n                  icon={<IconDownload size=\"sm\" />}\n                  disabled={!hasRole}\n                  href={downloadUrl}\n                  title={hasRole ? t('Download Artifact') : undefined}\n                />\n              </Tooltip>\n            )}\n          </Role>\n\n          <Access access={['project:releases']}>\n            {({hasAccess}) => (\n              <Tooltip\n                disabled={hasAccess}\n                title={t('You do not have permission to delete artifacts.')}\n              >\n                <Confirm\n                  message={t('Are you sure you want to remove this artifact?')}\n                  onConfirm={handleDeleteClick}\n                  disabled={!hasAccess}\n                >\n                  <Button\n                    size=\"small\"\n                    icon={<IconDelete size=\"sm\" />}\n                    title={hasAccess ? t('Remove Artifact') : undefined}\n                    label={t('Remove Artifact')}\n                    disabled={!hasAccess}\n                  />\n                </Confirm>\n              </Tooltip>\n            )}\n          </Access>\n        </ButtonBar>\n      </ActionsColumn>\n    </Fragment>\n  );\n};\n\nconst NameColumn = styled('div')`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n`;\n\nconst SizeColumn = styled('div')`\n  display: flex;\n  justify-content: flex-end;\n  text-align: right;\n  align-items: center;\n`;\n\nconst ActionsColumn = styled(SizeColumn)``;\n\nconst Name = styled('div')`\n  padding-right: ${space(4)};\n  overflow-wrap: break-word;\n  word-break: break-all;\n`;\n\nconst TimeAndDistWrapper = styled('div')`\n  width: 100%;\n  display: flex;\n  margin-top: ${space(1)};\n  align-items: center;\n`;\n\nconst TimeWrapper = styled('div')`\n  display: grid;\n  grid-gap: ${space(0.5)};\n  grid-template-columns: min-content 1fr;\n  font-size: ${p => p.theme.fontSizeMedium};\n  align-items: center;\n  color: ${p => p.theme.subText};\n`;\n\nconst StyledTag = styled(Tag)`\n  margin-left: ${space(1)};\n`;\n\nexport default SourceMapsArtifactRow;\n","import {Fragment} from 'react';\nimport {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {\n  addErrorMessage,\n  addLoadingMessage,\n  addSuccessMessage,\n} from 'app/actionCreators/indicator';\nimport Access from 'app/components/acl/access';\nimport Button from 'app/components/button';\nimport ButtonBar from 'app/components/buttonBar';\nimport Confirm from 'app/components/confirm';\nimport Pagination from 'app/components/pagination';\nimport {PanelTable} from 'app/components/panels';\nimport SearchBar from 'app/components/searchBar';\nimport TextOverflow from 'app/components/textOverflow';\nimport Tooltip from 'app/components/tooltip';\nimport Version from 'app/components/version';\nimport {IconDelete} from 'app/icons';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {Artifact, Organization, Project} from 'app/types';\nimport {formatVersion} from 'app/utils/formatters';\nimport {decodeScalar} from 'app/utils/queryString';\nimport routeTitleGen from 'app/utils/routeTitle';\nimport AsyncView from 'app/views/asyncView';\nimport SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';\n\nimport SourceMapsArtifactRow from './sourceMapsArtifactRow';\n\ntype RouteParams = {orgId: string; projectId: string; name: string};\n\ntype Props = RouteComponentProps<RouteParams, {}> & {\n  organization: Organization;\n  project: Project;\n};\n\ntype State = AsyncView['state'] & {\n  artifacts: Artifact[];\n};\n\nclass ProjectSourceMapsDetail extends AsyncView<Props, State> {\n  getTitle() {\n    const {projectId, name} = this.props.params;\n\n    return routeTitleGen(t('Archive %s', formatVersion(name)), projectId, false);\n  }\n\n  getDefaultState(): State {\n    return {\n      ...super.getDefaultState(),\n      artifacts: [],\n    };\n  }\n\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    return [['artifacts', this.getArtifactsUrl(), {query: {query: this.getQuery()}}]];\n  }\n\n  getArtifactsUrl() {\n    const {orgId, projectId, name} = this.props.params;\n\n    return `/projects/${orgId}/${projectId}/releases/${encodeURIComponent(name)}/files/`;\n  }\n\n  handleSearch = (query: string) => {\n    const {location, router} = this.props;\n\n    router.push({\n      ...location,\n      query: {...location.query, cursor: undefined, query},\n    });\n  };\n\n  handleArtifactDelete = async (id: string) => {\n    addLoadingMessage(t('Removing artifact\\u2026'));\n\n    try {\n      await this.api.requestPromise(`${this.getArtifactsUrl()}${id}/`, {\n        method: 'DELETE',\n      });\n      this.fetchData();\n      addSuccessMessage(t('Artifact removed.'));\n    } catch {\n      addErrorMessage(t('Unable to remove artifact. Please try again.'));\n    }\n  };\n\n  handleArchiveDelete = async () => {\n    const {orgId, projectId, name} = this.props.params;\n\n    addLoadingMessage(t('Removing artifacts\\u2026'));\n\n    try {\n      await this.api.requestPromise(\n        `/projects/${orgId}/${projectId}/files/source-maps/`,\n        {\n          method: 'DELETE',\n          query: {name},\n        }\n      );\n      this.fetchData();\n      addSuccessMessage(t('Artifacts removed.'));\n    } catch {\n      addErrorMessage(t('Unable to remove artifacts. Please try again.'));\n    }\n  };\n\n  getQuery() {\n    const {query} = this.props.location.query;\n\n    return decodeScalar(query);\n  }\n\n  getEmptyMessage() {\n    if (this.getQuery()) {\n      return t('There are no artifacts that match your search.');\n    }\n\n    return t('There are no artifacts in this archive.');\n  }\n\n  renderLoading() {\n    return this.renderBody();\n  }\n\n  renderArtifacts() {\n    const {organization} = this.props;\n    const {artifacts} = this.state;\n    const artifactApiUrl = this.api.baseUrl + this.getArtifactsUrl();\n\n    if (!artifacts.length) {\n      return null;\n    }\n\n    return artifacts.map(artifact => {\n      return (\n        <SourceMapsArtifactRow\n          key={artifact.id}\n          artifact={artifact}\n          onDelete={this.handleArtifactDelete}\n          downloadUrl={`${artifactApiUrl}${artifact.id}/?download=1`}\n          downloadRole={organization.debugFilesRole}\n        />\n      );\n    });\n  }\n\n  renderBody() {\n    const {loading, artifacts, artifactsPageLinks} = this.state;\n    const {name, orgId} = this.props.params;\n    const {project} = this.props;\n\n    return (\n      <Fragment>\n        <StyledSettingsPageHeader\n          title={\n            <Title>\n              {t('Archive')}&nbsp;\n              <TextOverflow>\n                <Version version={name} tooltipRawVersion anchor={false} truncate />\n              </TextOverflow>\n            </Title>\n          }\n          action={\n            <StyledButtonBar gap={1}>\n              <ReleaseButton\n                to={`/organizations/${orgId}/releases/${encodeURIComponent(\n                  name\n                )}/?project=${project.id}`}\n              >\n                {t('Go to Release')}\n              </ReleaseButton>\n              <Access access={['project:releases']}>\n                {({hasAccess}) => (\n                  <Tooltip\n                    disabled={hasAccess}\n                    title={t('You do not have permission to delete artifacts.')}\n                  >\n                    <Confirm\n                      message={t(\n                        'Are you sure you want to remove all artifacts in this archive?'\n                      )}\n                      onConfirm={this.handleArchiveDelete}\n                      disabled={!hasAccess}\n                    >\n                      <Button\n                        icon={<IconDelete size=\"sm\" />}\n                        title={t('Remove All Artifacts')}\n                        label={t('Remove All Artifacts')}\n                        disabled={!hasAccess}\n                      />\n                    </Confirm>\n                  </Tooltip>\n                )}\n              </Access>\n\n              <SearchBar\n                placeholder={t('Filter artifacts')}\n                onSearch={this.handleSearch}\n                query={this.getQuery()}\n              />\n            </StyledButtonBar>\n          }\n        />\n\n        <StyledPanelTable\n          headers={[\n            t('Artifact'),\n            <SizeColumn key=\"size\">{t('File Size')}</SizeColumn>,\n            '',\n          ]}\n          emptyMessage={this.getEmptyMessage()}\n          isEmpty={artifacts.length === 0}\n          isLoading={loading}\n        >\n          {this.renderArtifacts()}\n        </StyledPanelTable>\n        <Pagination pageLinks={artifactsPageLinks} />\n      </Fragment>\n    );\n  }\n}\n\nconst StyledSettingsPageHeader = styled(SettingsPageHeader)`\n  /*\n    ugly selector to make header work on mobile\n    we can refactor this once we start making other settings more responsive\n  */\n  > div {\n    @media (max-width: ${p => p.theme.breakpoints[2]}) {\n      display: block;\n    }\n    > div {\n      min-width: 0;\n      @media (max-width: ${p => p.theme.breakpoints[2]}) {\n        margin-bottom: ${space(2)};\n      }\n    }\n  }\n`;\n\nconst Title = styled('div')`\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledButtonBar = styled(ButtonBar)`\n  justify-content: flex-start;\n`;\n\nconst StyledPanelTable = styled(PanelTable)`\n  grid-template-columns: minmax(220px, 1fr) max-content 120px;\n`;\n\nconst ReleaseButton = styled(Button)`\n  white-space: nowrap;\n`;\n\nconst SizeColumn = styled('div')`\n  text-align: right;\n`;\n\nexport default ProjectSourceMapsDetail;\n"],"names":["Role","React","hasRole","user","ConfigStore","organization","role","this","props","availableRoles","currentRole","isActiveSuperuser","Array","isArray","roleIds","map","r","id","includes","requiredIndex","indexOf","render","children","isRenderFunc","withOrganization","FileSize","className","bytes","Span","getDynamicText","value","formatBytesBase2","fixed","isSuperuser","Cookies","undefined","routeName","orgSlug","withSentry","projectSlug","tmplBase","tmpl","AsyncView","AsyncComponent","getTitle","title","renderComponent","SourceMapsArtifactRow","artifact","onDelete","downloadUrl","downloadRole","name","size","dateCreated","dist","handleDeleteClick","Fragment","NameColumn","Name","t","TimeAndDistWrapper","TimeWrapper","date","StyledTag","type","tooltipText","SizeColumn","ActionsColumn","gap","disabled","icon","href","access","hasAccess","message","onConfirm","label","space","p","theme","fontSizeMedium","subText","Tag","ProjectSourceMapsDetail","query","location","router","push","cursor","async","addLoadingMessage","api","requestPromise","getArtifactsUrl","method","fetchData","addSuccessMessage","addErrorMessage","orgId","projectId","params","routeTitleGen","formatVersion","getDefaultState","super","artifacts","getEndpoints","getQuery","encodeURIComponent","decodeScalar","getEmptyMessage","renderLoading","renderBody","renderArtifacts","state","artifactApiUrl","baseUrl","length","handleArtifactDelete","debugFilesRole","loading","artifactsPageLinks","project","StyledSettingsPageHeader","Title","version","tooltipRawVersion","anchor","truncate","action","StyledButtonBar","ReleaseButton","to","handleArchiveDelete","placeholder","onSearch","handleSearch","StyledPanelTable","headers","emptyMessage","isEmpty","isLoading","pageLinks","SettingsPageHeader","breakpoints","ButtonBar","PanelTable","Button"],"sourceRoot":""}