{"version":3,"file":"chunks/app_views_projectInstall_overview_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"6ZAWA,SAASA,GAAoB,MAACC,EAAD,QAAQC,EAAR,YAAiBC,EAAjB,SAA8BC,IAiBzD,MAAMC,EAfCH,GAAYC,EAIbD,GAAWC,EACb,UAAUF,EAAV,cAAqBC,EAArB,cAAkCC,GAGhCD,EACF,UAAUD,EAAV,cAAqBC,GAGvB,UAAUD,EAAV,cAAqBE,GAXZF,EAgBX,OACE,QAAC,IAAD,CAAeA,MAAK,UAAKI,EAAL,aAApB,SACGD,IArBEJ,EAAAA,YAAAA,sBA0BT,W,kKCRe,SAASM,EACtBC,EACAC,GACQ,QACR,MAAM,OAACC,EAAD,OAASC,EAAT,SAAiBC,EAAjB,SAA2BC,GAAYJ,EACvCK,EAAQJ,EAAOK,KAAI,EAAEC,KAAAA,KAAUA,GAAQ,KAC7C,IAAIC,EACAC,EAGc,iBAAPV,GACTU,EAAaR,EAAOS,QAAQX,GAAM,EAClCS,EAAgBG,GAAAA,CAAcN,EAAMO,MAAM,EAAGH,IAAaF,GAAoB,MAAZA,EAAK,MAEvEC,EAAgBG,GAAAA,CAAcN,GAAOE,GAAoB,MAAZA,EAAK,KAGpD,IAAIM,EAAYR,EAAMO,MAAMJ,EAAeC,QAEnB,IAAbL,IACTS,EAAYA,EAAUD,MAAM,EAAGR,IAGjC,MAAMU,EAAM,UAAGX,MAAAA,OAAH,EAAGA,EAAUW,cAAb,QAAuB,GAC7BC,EAAI,UAAGZ,MAAAA,OAAH,EAAGA,EAAUY,YAAb,QAAqB,GAEzBC,EAAY,GAAH,OAAMH,EAAUI,KAAK,KAArB,OACC,iBAAPlB,EAAkB,GAAKA,GADjB,OAEZe,GAFY,OAEHC,GAEZ,OAAOG,EAAAA,EAAAA,GAAoBF,EAAWd,K,m8BChCxC,MAAMiB,UAA+BC,EAAAA,EAA6B,6DAU9CC,IAChB,MAAM,MAACC,EAAD,UAAQC,GAAaC,KAAKC,MAAMvB,OAEhCwB,EAAaF,KAAKG,iBAAL,yBACGL,EADH,qBACqBC,EADrB,4BACkDF,EADlD,MAEfvB,EAAAA,EAAAA,GAAc,GAAD,OAAIuB,EAAJ,KAAiB,IACzBG,KAAKC,MACRrB,UAAW,IAGjBwB,EAAAA,eAAAA,KAAoBF,OApB0C,yBAuBpD,KACVF,KAAKK,UAASC,IAAS,CAAEC,SAAUD,EAAMC,eAvBvB,uBAClB,OAAOC,OAAO7B,SAAS8B,KAAKvB,QAAQ,mBAAqB,EAG3DwB,eACE,MAAM,MAACZ,EAAD,UAAQC,GAAaC,KAAKC,MAAMvB,OACtC,MAAO,CAAC,CAAC,UAAD,oBAAyBoB,EAAzB,YAAkCC,EAAlC,YAoBVY,SACE,MAAM,MAACb,EAAD,UAAQC,GAAaC,KAAKC,MAAMvB,QAChC,QAACkC,EAAD,QAAUL,GAAWP,KAAKM,MAE1BO,EAAkB,kBAAH,OAAqBf,EAArB,oBAErB,OACE,0BACE,QAAC,IAAD,CAAqB7B,OAAO6C,EAAAA,EAAAA,GAAE,mBAAoB3C,YAAa4B,KAC/D,QAAC,IAAD,CAAoB9B,OAAO6C,EAAAA,EAAAA,GAAE,iCAC7B,QAAC,IAAD,WACGA,EAAAA,EAAAA,GACC,qFAIHP,GACC,QAACQ,EAAD,YACE,QAACC,EAAD,YACE,4BAASF,EAAAA,EAAAA,GAAE,UACX,QAACG,EAAD,UAAWL,MAAAA,OAAX,EAAWA,EAAU,GAAGM,IAAIC,aAG9B,QAAC,KAAD,CAAQC,SAAS,UAAU7C,GAAIsC,EAA/B,UACGC,EAAAA,EAAAA,GAAE,8CAIP,uBACE,4BACGO,EAAAA,EAAAA,IAAI,iDAAkD,CACrDC,MAAM,QAAC,KAAD,CAAQF,SAAS,OAAOG,QAASvB,KAAKwB,cAFhD,UAQJ,QAAC,IAAD,CACEC,YAAazB,KAAK0B,eAClBC,WAAW,EACXC,aAAc5B,KAAKC,MAAM2B,gBAE3B,uBACGP,EAAAA,EAAAA,IAAI,6GAGH,CAACQ,SAAS,QAAC,IAAD,CAAcpB,KAAK,mCAzEnCd,EAAAA,YAAAA,yBAiFN,MAAMsB,GAAW,QAAOa,IACtB,mBAAUA,EAAV,UACE,QAAC,IAAD,UAAiBA,EAAE1D,cAFN,qBAAH,0CAQR2C,GAAU,OAAO,MAAP,qBAAH,kBACMgB,EAAAA,EAAAA,GAAM,GADZ,KAIPf,GAAe,OAAO,MAAP,qBAAH,gEAGJe,EAAAA,EAAAA,GAAM,KAHF,KAGUA,EAAAA,EAAAA,GAAM,GAHhB,sCAKCA,EAAAA,EAAAA,GAAM,GALP,KAQlB,GAAeC,EAAAA,EAAAA,GAAiBrC","sources":["webpack:///./app/components/sentryDocumentTitle.tsx","webpack:///./app/utils/recreateRoute.tsx","webpack:///./app/views/projectInstall/overview.tsx"],"sourcesContent":["import * as React from 'react';\nimport DocumentTitle from 'react-document-title';\n\ntype Props = {\n  // Main page title\n  title: string;\n  orgSlug?: string;\n  projectSlug?: string;\n  children?: React.ReactNode;\n};\n\nfunction SentryDocumentTitle({title, orgSlug, projectSlug, children}: Props) {\n  function getDocTitle() {\n    if (!orgSlug && !projectSlug) {\n      return title;\n    }\n\n    if (orgSlug && projectSlug) {\n      return `${title} - ${orgSlug} - ${projectSlug}`;\n    }\n\n    if (orgSlug) {\n      return `${title} - ${orgSlug}`;\n    }\n\n    return `${title} - ${projectSlug}`;\n  }\n\n  const docTitle = getDocTitle();\n\n  return (\n    <DocumentTitle title={`${docTitle} - Sentry`}>\n      {children as React.ReactChild}\n    </DocumentTitle>\n  );\n}\n\nexport default SentryDocumentTitle;\n","import {Location} from 'history';\nimport findLastIndex from 'lodash/findLastIndex';\n\nimport replaceRouterParams from 'app/utils/replaceRouterParams';\nimport {RouteWithName} from 'app/views/settings/components/settingsBreadcrumb/types';\n\ntype Options = {\n  routes: RouteWithName[];\n\n  // parameters to replace any route string parameters (e.g. if route is `:orgId`,\n  // params should have `{orgId: slug}`\n  params: {[key: string]: string | undefined};\n\n  /**\n   * The number of routes to to pop off of `routes\n   * Must be < 0\n   *\n   * There's no ts type for negative numbers so we are arbitrarily specifying -1-9\n   */\n  stepBack?: -1 | -2 | -3 | -4 | -5 | -6 | -7 | -8 | -9;\n  location?: Location;\n};\n\n/**\n * Given a route object or a string and a list of routes + params from router, this will attempt to recreate a location string while replacing url params.\n * Can additionally specify the number of routes to move back\n *\n * See tests for examples\n */\nexport default function recreateRoute(\n  to: string | RouteWithName,\n  options: Options\n): string {\n  const {routes, params, location, stepBack} = options;\n  const paths = routes.map(({path}) => path || '');\n  let lastRootIndex: number;\n  let routeIndex: number | undefined;\n\n  // TODO(ts): typescript things\n  if (typeof to !== 'string') {\n    routeIndex = routes.indexOf(to) + 1;\n    lastRootIndex = findLastIndex(paths.slice(0, routeIndex), path => path[0] === '/');\n  } else {\n    lastRootIndex = findLastIndex(paths, path => path[0] === '/');\n  }\n\n  let baseRoute = paths.slice(lastRootIndex, routeIndex);\n\n  if (typeof stepBack !== 'undefined') {\n    baseRoute = baseRoute.slice(0, stepBack);\n  }\n\n  const search = location?.search ?? '';\n  const hash = location?.hash ?? '';\n\n  const fullRoute = `${baseRoute.join('')}${\n    typeof to !== 'string' ? '' : to\n  }${search}${hash}`;\n\n  return replaceRouterParams(fullRoute, params);\n}\n","import {browserHistory, RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport AsyncComponent from 'app/components/asyncComponent';\nimport AutoSelectText from 'app/components/autoSelectText';\nimport Button from 'app/components/button';\nimport ExternalLink from 'app/components/links/externalLink';\nimport PlatformPicker from 'app/components/platformPicker';\nimport SentryDocumentTitle from 'app/components/sentryDocumentTitle';\nimport {PlatformKey} from 'app/data/platformCategories';\nimport {t, tct} from 'app/locale';\nimport space from 'app/styles/space';\nimport {Organization} from 'app/types';\nimport recreateRoute from 'app/utils/recreateRoute';\nimport withOrganization from 'app/utils/withOrganization';\nimport SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';\nimport TextBlock from 'app/views/settings/components/text/textBlock';\nimport {ProjectKey} from 'app/views/settings/project/projectKeys/types';\n\ntype Props = RouteComponentProps<{orgId: string; projectId: string}, {}> & {\n  organization: Organization;\n} & AsyncComponent['props'];\n\ntype State = {\n  keyList: Array<ProjectKey> | null;\n} & AsyncComponent['state'];\n\nclass ProjectInstallOverview extends AsyncComponent<Props, State> {\n  get isGettingStarted() {\n    return window.location.href.indexOf('getting-started') > 0;\n  }\n\n  getEndpoints(): ReturnType<AsyncComponent['getEndpoints']> {\n    const {orgId, projectId} = this.props.params;\n    return [['keyList', `/projects/${orgId}/${projectId}/keys/`]];\n  }\n\n  redirectToDocs = (platform: PlatformKey | null) => {\n    const {orgId, projectId} = this.props.params;\n\n    const installUrl = this.isGettingStarted\n      ? `/organizations/${orgId}/projects/${projectId}/getting-started/${platform}/`\n      : recreateRoute(`${platform}/`, {\n          ...this.props,\n          stepBack: -1,\n        });\n\n    browserHistory.push(installUrl);\n  };\n\n  toggleDsn = () => {\n    this.setState(state => ({showDsn: !state.showDsn}));\n  };\n\n  render() {\n    const {orgId, projectId} = this.props.params;\n    const {keyList, showDsn} = this.state;\n\n    const issueStreamLink = `/organizations/${orgId}/issues/#welcome`;\n\n    return (\n      <div>\n        <SentryDocumentTitle title={t('Instrumentation')} projectSlug={projectId} />\n        <SettingsPageHeader title={t('Configure your application')} />\n        <TextBlock>\n          {t(\n            'Get started by selecting the platform or language that powers your application.'\n          )}\n        </TextBlock>\n\n        {showDsn ? (\n          <DsnInfo>\n            <DsnContainer>\n              <strong>{t('DSN')}</strong>\n              <DsnValue>{keyList?.[0].dsn.public}</DsnValue>\n            </DsnContainer>\n\n            <Button priority=\"primary\" to={issueStreamLink}>\n              {t('Got it! Take me to the Issue Stream.')}\n            </Button>\n          </DsnInfo>\n        ) : (\n          <p>\n            <small>\n              {tct('Already have things setup? [link:Get your DSN]', {\n                link: <Button priority=\"link\" onClick={this.toggleDsn} />,\n              })}\n              .\n            </small>\n          </p>\n        )}\n        <PlatformPicker\n          setPlatform={this.redirectToDocs}\n          showOther={false}\n          organization={this.props.organization}\n        />\n        <p>\n          {tct(\n            `For a complete list of client integrations, please see\n             [docLink:our in-depth documentation].`,\n            {docLink: <ExternalLink href=\"https://docs.sentry.io\" />}\n          )}\n        </p>\n      </div>\n    );\n  }\n}\n\nconst DsnValue = styled(p => (\n  <code {...p}>\n    <AutoSelectText>{p.children}</AutoSelectText>\n  </code>\n))`\n  overflow: hidden;\n`;\n\nconst DsnInfo = styled('div')`\n  margin-bottom: ${space(3)};\n`;\n\nconst DsnContainer = styled('div')`\n  display: grid;\n  grid-template-columns: max-content 1fr;\n  grid-gap: ${space(1.5)} ${space(2)};\n  align-items: center;\n  margin-bottom: ${space(2)};\n`;\n\nexport default withOrganization(ProjectInstallOverview);\n"],"names":["SentryDocumentTitle","title","orgSlug","projectSlug","children","docTitle","recreateRoute","to","options","routes","params","location","stepBack","paths","map","path","lastRootIndex","routeIndex","indexOf","findLastIndex","slice","baseRoute","search","hash","fullRoute","join","replaceRouterParams","ProjectInstallOverview","AsyncComponent","platform","orgId","projectId","this","props","installUrl","isGettingStarted","browserHistory","setState","state","showDsn","window","href","getEndpoints","render","keyList","issueStreamLink","t","DsnInfo","DsnContainer","DsnValue","dsn","public","priority","tct","link","onClick","toggleDsn","setPlatform","redirectToDocs","showOther","organization","docLink","p","space","withOrganization"],"sourceRoot":""}