var nt=Object.defineProperty,lt=Object.defineProperties;var st=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;var me=(l,t,r)=>t in l?nt(l,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[t]=r,v=(l,t)=>{for(var r in t||(t={}))rt.call(t,r)&&me(l,r,t[r]);if(Ce)for(var r of Ce(t))ot.call(t,r)&&me(l,r,t[r]);return l},y=(l,t)=>lt(l,st(t));var S=(l,t,r)=>(me(l,typeof t!="symbol"?t+"":t,r),r);import{m as ge,c as it,u as ut,d as p,a as re,r as $,o as u,b as _,w as a,e as n,f as e,R as dt,N as je,S as W,g as oe,h as B,i as L,z as ct,j as _t,k as ft,l as pt,n as ht,p as mt,q as gt,s as vt,t as yt,v as bt,x as $t,y as kt,A as xt,B as wt,C as Nt,D as It,E as te,F as Te,G as N,H as ve,I as ae,J as U,K as b,L as Me,M as q,O as Le,P as ze,Q as Ee,T as g,U as k,V as Z,W as ie,X as C,Y as ue,Z as x,_ as K,$ as ye,a0 as St,a1 as Re,a2 as w,a3 as G,a4 as Ut,a5 as j,a6 as Q,a7 as H,a8 as z,a9 as P,aa as De,ab as ne,ac as Ct,ad as be,ae as de,af as Pe,ag as Ae,ah as $e,ai as A,aj as ce,ak as _e,al as ke,am as fe,an as Oe,ao as jt,ap as Tt,aq as Mt,ar as Lt,as as zt,at as Be,au as Et,av as Rt,aw as O,ax as le,ay as Dt,az as Pt,aA as At,aB as Ot,aC as xe,aD as Bt,aE as Ht,aF as He,aG as Fe,aH as Ft,aI as Vt,aJ as we,aK as qt,aL as Ne,aM as Gt,aN as Jt,aO as Wt,aP as Zt,aQ as Kt,aR as Qt,aS as Xt,aT as Yt,aU as Ve,aV as qe,aW as ea,aX as ta,aY as aa,aZ as Ge,a_ as na,a$ as la,b0 as sa}from"./vendor.542e96cc.js";const ra=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}};ra();function Ie(l){return(l==null?void 0:l.startsWith("./"))||(l==null?void 0:l.startsWith("../"))||l=="."||l==".."}function Je(l){const t=(l.match(/[\u4E00-\u9FA5]/g)||[]).length,r=(l.replace(/[\u4E00-\u9FA5]/g,"").match(/[a-zA-Z0-9_\u0392-\u03c9\u0400-\u04FF]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af\u0400-\u04FF]+|[\u00E4\u00C4\u00E5\u00C5\u00F6\u00D6]+|\w+/g)||[]).length;return[t,r]}function oa(l,{cn:t=300,en:r=160}={}){var s=Je(l),i=s[0]/t+s[1]/r;return i}function ia(l){var t=Je(l),r=t[0]+t[1];return r}function ua(l){return l.replace(/\&\#[0-9]*;|&amp;/g,function(t){return t.match(/amp/)?"&":String.fromCharCode(parseInt(t.match(/[0-9]+/)[0]))})}var J=new ge.Renderer;J.link=function(l,t,r){return r};J.paragraph=function(l){return ua(l)+`\r
`};J.heading=function(l,t){return t+") "+l};J.blockquote=function(l){return l};J.codespan=function(l){return l};J.list=function(l,t,r){return l};J.image=function(l,t,r){return""};J.code=function(l,t,r){return""};function We(l){return l}class da{constructor(t){S(this,"baseUrl");this.baseUrl=t}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(t){let s=await(await fetch(`${this.baseUrl}/${t}/index.json`)).json();return y(v({},s),{metadata:y(v({},s.metadata),{creation:new Date(s.metadata.creation.toString()),modification:new Date(s.metadata.modification.toString())}),dataUrl:this.resolveRelativeUrl(t)})}notes(t){return new ca(`${this.baseUrl}/${t}/notes`,this.resolveRelativeUrl(t,"./notes"))}async update(t){let r=y(v({},t),{metadata:y(v({},t.metadata),{creation:t.metadata.creation.toISOString(),modification:t.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(t){await fetch(`${this.baseUrl}/${t}`,{method:"DELETE"})}resolveRelativeUrl(t,r="."){return Ie(r)?`${this.baseUrl}/${t}/${r}`:r}}class ca{constructor(t,r){S(this,"baseUrl");S(this,"dataUrl");this.baseUrl=t,this.dataUrl=r}async all(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async get(t){let s=await(await fetch(`${this.baseUrl}/${t}/index.json`)).json();return y(v({},s),{metadata:y(v({},s.metadata),{creation:new Date(s.metadata.creation.toString()),modification:new Date(s.metadata.modification.toString())}),dataUrl:this.dataUrl})}async update(t){let r=y(v({},t),{metadata:y(v({},t.metadata),{creation:t.metadata.creation.toISOString(),modification:t.metadata.modification.toISOString()})});await fetch(`${this.baseUrl}/`,{body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}})}async delete(t){await fetch(`${this.baseUrl}/${t}/`,{method:"DELETE"})}}class Ze{constructor(t){S(this,"baseUrl");S(this,"materials");this.baseUrl=t,this.materials=new da(`${this.baseUrl}/materials`)}async metadata(){return await(await fetch(`${this.baseUrl}/index.json`)).json()}async title(){let t=(await this.metadata()).site.title;return t==""?"Paperead":t}}const Ke=Symbol(),_a="/api",fa=it({state(){return{api:new Ze(_a),readerMode:!1}},mutations:{setApiUrl(l,t){l.api=new Ze(t)},setReaderMode(l,t){l.readerMode=t}}});function E(){return ut(Ke)}const pa=p({setup(l){return re(),$("home"),(t,r)=>(u(),_(W,null,{default:a(()=>[n(e(dt))]),fallback:a(()=>[n(e(je),{size:80,id:"loading-spin",style:{width:"100%"}})]),_:1}))}});var F=(l,t)=>{for(const[r,s]of t)l[r]=s;return l};const ha=p({setup(l){oe();const t=E(),r=B(),s="#f9f5e9FF",i={common:{baseColor:s,popoverColor:s,tableColor:s,cardColor:s,modalColor:s,bodyColor:s,tagColor:s,inputColor:s,codeColor:s,tabColor:s,actionColor:s,tableHeaderColor:s,hoverColor:s,inputColorDisabled:s}},o=L(()=>t.state.readerMode&&r.value!="dark"),d=L(()=>{let c=navigator.language;return c.indexOf("zh")!=-1?{lang:ct,date:_t}:c.indexOf("ru")!=-1?{lang:ft,date:pt}:c.indexOf("uk")!=-1?{lang:ht,date:mt}:c.indexOf("ja")!=-1?{lang:gt,date:vt}:c.indexOf("id")!=-1?{lang:yt,date:bt}:{lang:$t,date:kt}});return(c,f)=>(u(),_(e(wt),{style:{height:"100%"},theme:e(r)=="dark"?e(xt):null,"theme-overrides":e(o)?i:{},locale:e(d).lang,"date-locale":e(d).date},{default:a(()=>[n(e(It),null,{default:a(()=>[n(e(Nt)),(u(),_(W,null,{default:a(()=>[n(pa)]),fallback:a(()=>[n(e(je),{size:80,id:"loading-spin"})]),_:1}))]),_:1})]),_:1},8,["theme","theme-overrides","locale","date-locale"]))}});var ma=F(ha,[["__scopeId","data-v-41fa4579"]]);const ga=p({props:{scroll:null},setup(l){const t=l,r=L(()=>{var s;return(s=t.scroll)!=null?s:!1});return(s,i)=>e(r)?(u(),_(e(ae),{key:0,style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[n(e(Te),{bordered:"",class:"page-header"},{default:a(()=>[te(s.$slots,"header",{},void 0,!0)]),_:3}),n(e(N),null,{default:a(()=>[te(s.$slots,"default",{},void 0,!0)]),_:3}),n(e(ve),{right:100})]),_:3})):(u(),_(e(ae),{key:1,style:{height:"100%"}},{default:a(()=>[n(e(Te),{bordered:"",class:"page-header"},{default:a(()=>[te(s.$slots,"header",{},void 0,!0)]),_:3}),n(e(N),{class:"page-content-scroll","content-style":"height: 100%;","native-scrollbar":!1},{default:a(()=>[te(s.$slots,"default",{},void 0,!0)]),_:3})]),_:3}))}});var Se=F(ga,[["__scopeId","data-v-cef6b4f8"]]);const va=g("a",{href:"https://www.stardustdl.top/",style:{"text-decoration":"none",color:"inherit"}},"StardustDL",-1),ya=g("a",{href:"https://github.com/StardustDL/paperead/blob/master/LICENSE",style:{"text-decoration":"none",color:"inherit"}},"MPL-2.0",-1),ba=g("a",{href:"https://github.com/StardustDL/paperead",style:{"text-decoration":"none",color:"inherit"}},"GitHub",-1),$a=["href"];async function ka(l){let t,r;const s=([t,r]=U(async()=>([t,r]=U(()=>fetch("/build.json")),t=await t,r(),t).json()),t=await t,r(),t);return(i,o)=>(u(),_(e(C),{size:"large"},{default:a(()=>[n(e(q),{label:"Author"},{prefix:a(()=>[n(e(b),null,{default:a(()=>[n(e(Me))]),_:1})]),default:a(()=>[va]),_:1}),n(e(q),{label:"License"},{prefix:a(()=>[n(e(b),null,{default:a(()=>[n(e(Le))]),_:1})]),default:a(()=>[ya]),_:1}),n(e(q),{label:"Source Code"},{prefix:a(()=>[n(e(b),null,{default:a(()=>[n(e(ze))]),_:1})]),default:a(()=>[ba]),_:1}),n(e(q),{label:"Commit"},{prefix:a(()=>[n(e(b),null,{default:a(()=>[n(e(Ee))]),_:1})]),default:a(()=>[g("a",{href:`https://github.com/StardustDL/paperead/commit/${e(s).commit}`,style:{"text-decoration":"none",color:"inherit"}},k(e(s).shortCommit),9,$a)]),_:1}),n(e(q),{label:"Build Date"},{prefix:a(()=>[n(e(b),null,{default:a(()=>[n(e(Z))]),_:1})]),default:a(()=>[n(e(ie),{time:new Date(e(s).date),type:"relative"},null,8,["time"])]),_:1})]),_:1}))}const xa={components:{BrandGithub:ze,At:Me,License:Le,GitCommit:Ee,Clock:Z}},wa=p(y(v({},xa),{setup:ka}));async function Na(l){let t,r;const s=E(),i=([t,r]=U(()=>s.state.api.title()),t=await t,r(),t);return(o,d)=>(u(),_(e(ye),null,{default:a(()=>[n(e(K),{to:"/"},{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(ue))]),_:1}),x(" "+k(e(i)),1)]),_:1})]),_:1}))}const Ia={components:{HomeIcon:ue}},Ue=p(y(v({},Ia),{setup:Na})),Sa=g("span",null,"Creation:",-1),Ua=x("\xA0 "),Ca=g("br",null,null,-1),ja=g("span",null,"Modification:",-1),Ta=x("\xA0 ");function Ma(l){const t=l;return(r,s)=>(u(),_(e(St),null,{trigger:a(()=>[n(e(C),{size:"small"},{default:a(()=>[n(e(b),{size:"large"},{default:a(()=>[n(e(Z))]),_:1}),n(e(ie),{time:t.creation,type:"relative"},null,8,["time"])]),_:1})]),default:a(()=>[Sa,Ua,n(e(ie),{time:t.creation},null,8,["time"]),Ca,ja,Ta,n(e(ie),{time:l.modification},null,8,["time"])]),_:1}))}const La={components:{Clock:Z}},za=p(y(v({},La),{props:{creation:null,modification:null},setup:Ma}));function Ea(l){const t=l;return(r,s)=>(u(),_(e(C),{size:"small"},{default:a(()=>[n(e(b),{size:"large"},{default:a(()=>[n(e(Re))]),_:1}),(u(!0),w(j,null,G(t.tags,i=>(u(),_(e(Ut),{key:i,size:"small"},{default:a(()=>[x(k(i),1)]),_:2},1024))),128))]),_:1}))}const Ra={components:{Tag:Re}},Da=p(y(v({},Ra),{props:{tags:null},setup:Ea}));function Pa(l){const t=l,r=L(()=>{let s=ia(t.content);return s<1e3?s.toString():`${Math.round(s/1e3)}k`});return(s,i)=>(u(),_(e(C),{size:"small"},{default:a(()=>[n(e(b),{size:"large"},{default:a(()=>[n(e(Q))]),_:1}),g("span",null,k(e(r)),1)]),_:1}))}const Aa={components:{FileText:Q}},Oa=p(y(v({},Aa),{props:{content:null},setup:Pa}));function Ba(l){const t=l,r=L(()=>{let s=oa(t.content);return s<=1?"1 minute":`${Math.round(s)} minutes`});return(s,i)=>(u(),_(e(C),{size:"small"},{default:a(()=>[n(e(b),{size:"large"},{default:a(()=>[n(e(Z))]),_:1}),g("span",null,k(e(r)),1)]),_:1}))}const Ha={components:{Clock:Z}},Fa=p(y(v({},Ha),{props:{content:null},setup:Ba})),pe=p({props:{data:null},setup(l){return(t,r)=>(u(),_(e(C),null,{default:a(()=>[n(za,{creation:l.data.metadata.creation,modification:l.data.metadata.modification},null,8,["creation","modification"]),l.data.metadata.tags.length>0?(u(),_(Da,{key:0,tags:l.data.metadata.tags},null,8,["tags"])):H("",!0),n(Oa,{content:l.data.content},null,8,["content"]),n(Fa,{content:l.data.content},null,8,["content"])]),_:1}))}});const Va=p({props:{id:null},setup(l){const t=l,r=E(),s=$();async function i(){s.value=await r.state.api.materials.get(t.id)}return z(i),P(t,i),(o,d)=>s.value?(u(),_(e(ne),{key:0,hoverable:""},{header:a(()=>[n(e(K),{to:`/${s.value.id}`},{default:a(()=>[x(k(s.value.metadata.name),1)]),_:1},8,["to"])]),action:a(()=>[n(pe,{data:s.value},null,8,["data"])]),default:a(()=>[s.value.content.length>0?(u(),_(e(De),{key:0,tooltip:!1,"line-clamp":5},{default:a(()=>[x(k(e(We)(s.value.content)),1)]),_:1})):H("",!0)]),_:1})):H("",!0)}});var qa=F(Va,[["__scopeId","data-v-2e77ee33"]]);const Qe=p({props:{items:null},setup(l){const t=l,r=$([]),s=$(1),i=$(5);function o(){let d=(s.value-1)*i.value;r.value=t.items.slice(d,d+i.value)}return P(s,o),P(i,o),z(o),P(t,()=>s.value=1),(d,c)=>(u(),_(e(C),{vertical:""},{default:a(()=>[(u(!0),w(j,null,G(r.value,f=>(u(),_(W,{key:f},{default:a(()=>[te(d.$slots,"default",{item:f})]),fallback:a(()=>[n(e(be),{text:"",repeat:2})]),_:2},1024))),128)),n(e(Ct),{style:{"justify-content":"center","margin-top":"20px"},"item-count":l.items.length,"page-size":i.value,"onUpdate:page-size":c[0]||(c[0]=f=>i.value=f),page:s.value,"onUpdate:page":c[1]||(c[1]=f=>s.value=f),"page-sizes":[5,10,20],"show-quick-jumper":"","show-size-picker":""},null,8,["item-count","page-size","page"])]),_:3}))}}),Ga=p({async setup(l){let t,r;const s=E(),i=([t,r]=U(()=>s.state.api.materials.all()),t=await t,r(),t);return(o,d)=>(u(),_(Qe,{items:e(i)},{default:a(c=>[n(qa,{id:c.item},null,8,["id"])]),_:1},8,["items"]))}});const Ja={key:0},Wa=x("Reading"),Za=x("\xA0and "),Ka=x("Notes"),Qa={key:1},Xa=["href"],Ya=["href"],en=["href"];async function tn(l){let t,r;const s=E(),i=re(),o=B(),d=L(()=>s.state.readerMode&&o.value!="dark");function c(V=!0){s.commit("setReaderMode",V)}const f="0.2.2",h=([t,r]=U(()=>s.state.api.metadata()),t=await t,r(),t),m=h.site.subtitle!=""?h.site.subtitle:"\u9605\u8BFB\u4E0E\u7B14\u8BB0",I=h.site.description!=""?h.site.description:`Welcome to ${[t,r]=U(()=>s.state.api.title()),t=await t,r(),t}.`;return document.title=`Home - ${[t,r]=U(()=>s.state.api.title()),t=await t,r(),t}`,(V,T)=>(u(),_(Se,null,{header:a(()=>[n(e(ke),{subtitle:e(m),onBack:T[1]||(T[1]=()=>e(i).back())},{avatar:a(()=>[n(e(de),null,{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(Pe))]),_:1})]),_:1})]),title:a(()=>[e(h).site.title==""?(u(),w("span",Ja,[n(e(Ae),{type:"info"},{default:a(()=>[Wa]),_:1}),Za,n(e(Ae),{type:"success"},{default:a(()=>[Ka]),_:1})])):(u(),w("span",Qa,k(e(h).site.title),1))]),header:a(()=>[n(e($e),null,{default:a(()=>[n(Ue)]),_:1})]),extra:a(()=>[n(e(A),{size:"large",bordered:!1,title:"Reader mode",onClick:T[0]||(T[0]=()=>c(!e(d)))},{icon:a(()=>[n(e(b),null,{default:a(()=>[e(d)?(u(),_(e(ce),{key:0})):(u(),_(e(_e),{key:1}))]),_:1})]),_:1})]),footer:a(()=>[x(k(e(I)),1)]),_:1},8,["subtitle"])]),default:a(()=>[n(e(Oe),{type:"segment",style:{height:"100%"}},{default:a(()=>[n(e(fe),{name:"info",tab:"Information",style:{height:"calc(100% - 52px)"}},{default:a(()=>[n(e(N),{"content-style":"padding: 10px;",style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[n(e(C),{vertical:"",size:"large"},{default:a(()=>[n(e(ne),{title:"Server",hoverable:"",embedded:""},{default:a(()=>[n(e(C),{size:"large"},{default:a(()=>[n(e(q),{label:"Server Endpoint"},{default:a(()=>[g("a",{href:e(s).state.api.baseUrl},k(e(s).state.api.baseUrl),9,Xa)]),_:1}),n(e(q),{label:"Server Version"},{default:a(()=>[g("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(h).version}`},k(e(h).version),9,Ya)]),_:1}),n(e(q),{label:"Client Version"},{default:a(()=>[g("a",{href:`https://github.com/StardustDL/paperead/releases/tag/v${e(f)}`},k(e(f)),9,en)]),_:1})]),_:1})]),_:1}),n(e(ne),{title:"Paperead",hoverable:"",embedded:""},{default:a(()=>[(u(),_(W,null,{default:a(()=>[n(wa)]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),n(e(fe),{name:"materials",tab:"Materials",style:{height:"calc(100% - 52px)"}},{default:a(()=>[n(e(N),{"content-style":"padding: 10px;",style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[n(Ga)]),_:1})]),_:1})]),_:1})]),_:1}))}const an={components:{Notebook:Pe,MaterialsIcon:jt,EnableReaderIcon:_e,DisableReaderIcon:ce}},nn=p(y(v({},an),{setup:tn}));var ln=F(nn,[["__scopeId","data-v-6301dc44"]]);const sn=x("Home");async function rn(l){let t,r;const s=E(),o=oe().params;return document.title=`Not Found - ${[t,r]=U(()=>s.state.api.title()),t=await t,r(),t}`,(d,c)=>(u(),_(e(Tt),{status:"404",title:"Not Found",description:`Path: /${e(o).path.join("/")}`,style:{margin:"50px"}},{footer:a(()=>[n(e(A),null,{icon:a(()=>[n(e(b),null,{default:a(()=>[n(e(ue))]),_:1})]),default:a(()=>[n(e(K),{to:"/"},{default:a(()=>[sn]),_:1})]),_:1})]),_:1},8,["description"]))}const on={components:{HomeIcon:ue,AlertCircle:Mt}},un=p(y(v({},on),{setup:rn}));var dn=F(un,[["__scopeId","data-v-6390192a"]]);const cn=g("thead",null,[g("tr",null,[g("th",null,"Key"),g("th",null,"Value")])],-1);function _n(l){const t=l,r=L(()=>{let s=[];for(let i in t.data.metadata.targets){let o=t.data.metadata.targets[i],d=Ie(o)?`${t.data.dataUrl}/${o}`:o;s.push({label:()=>Lt("a",{target:"_blank",href:d},i),key:i})}return s});return(s,i)=>(u(),_(e(C),null,{default:a(()=>[Object.keys(l.data.metadata.extra).length>0?(u(),_(e(zt),{key:0,placement:"bottom-start",trigger:"hover"},{trigger:a(()=>[n(e(A),{bordered:!1,size:"large",title:"Extra"},{icon:a(()=>[n(e(b),null,{default:a(()=>[n(e(Be))]),_:1})]),_:1})]),default:a(()=>[n(e(Et),null,{default:a(()=>[cn,g("tbody",null,[(u(!0),w(j,null,G(l.data.metadata.extra,(o,d)=>(u(),w("tr",{key:d},[g("td",null,k(d),1),g("td",null,k(o),1)]))),128))])]),_:1})]),_:1})):H("",!0),Object.keys(l.data.metadata.targets).length>0?(u(),_(e(Rt),{key:1,options:e(r),placement:"bottom-start"},{default:a(()=>[n(e(A),{bordered:!1,size:"large",title:"Targets"},{icon:a(()=>[n(e(b),null,{default:a(()=>[n(e(O))]),_:1})]),_:1})]),_:1},8,["options"])):H("",!0)]),_:1}))}const fn={components:{Book:le,ArrowRight:Dt,ExternalLink:O,InfoSquare:Be}},Xe=p(y(v({},fn),{props:{data:null},setup:_n}));function pn(l){return(t,r)=>(u(),_(e(ye),null,{default:a(()=>[n(e(K),{to:`/${l.id}`},{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(le))]),_:1}),x(" "+k(l.id),1)]),_:1},8,["to"])]),_:1}))}const hn={components:{MaterialIcon:le}},Ye=p(y(v({},hn),{props:{id:null},setup:pn})),mn=p({props:{value:null},setup(l){const t=l;return(r,s)=>{const i=Pt("MarkdownPreviewOutlineItem",!0);return u(),_(e(At),{title:t.value.title,href:t.value.href},{default:a(()=>[(u(!0),w(j,null,G(t.value.children,o=>(u(),_(i,{key:o.href,value:o},null,8,["value"]))),128))]),_:1},8,["title","href"])}}});class gn{constructor(t="",r="",s){S(this,"title","");S(this,"href","");S(this,"children",[]);this.title=t,this.href=r,s==null&&(s=[]),this.children=s}}const vn=p({props:{element:null},setup(l,{expose:t}){const r=l,s=$();function i(d){var I,V,T;let f=(I=d.children[0].getAttribute("data-target-id"))!=null?I:"",h=(T=(V=document.getElementById(f))==null?void 0:V.innerText)!=null?T:f,m=new gn(h,`#${f}`);if(d.children.length>1){let Y=d.children[1];for(let ee=0;ee<Y.children.length;ee++)m.children.push(i(Y.children[ee]))}return m}async function o(){if(r.element==null)return!1;let d=document.createElement("div");if(xe.outlineRender(r.element,d),d.children.length==0)return s.value=[],!1;let c=d.children[0],f=[];for(let h=0;h<c.children.length;h++)f.push(i(c.children[h]));return s.value=f,!0}return z(o),P(r,o),t({renderOutline:o}),(d,c)=>(u(),_(e(Ot),{type:"block","listen-to":l.element,"ignore-gap":!0},{default:a(()=>[(u(!0),w(j,null,G(s.value,f=>(u(),_(mn,{key:f.href,value:f},null,8,["value"]))),128))]),_:1},8,["listen-to"]))}});function yn(l,{expose:t}){const r=l,s=E(),i=B(),o=L(()=>{var R;return(R=r.baseUrl)!=null?R:""}),d=L(()=>i.value=="dark"?"dark":"light"),c=$(),f=$(),h=$(!0),m=$(!1),I=L(()=>s.state.readerMode&&i.value!="dark"),V=$(!1);async function T(){await xe.preview(c.value,r.value,{mode:d.value,speech:{enable:!0},hljs:{lineNumber:!0,style:d.value=="dark"?"dracula":I.value?"monokailight":"github"},markdown:{linkBase:o.value,mark:!0},theme:{current:d.value}}),V.value=await f.value.renderOutline();{let R=c.value.getElementsByTagName("img");for(let D=0;D<R.length;D++){let M=R.item(D);M!=null&&(M.onclick=se=>{xe.previewImage(M,void 0,d.value)})}}}function Y(R=!0){m.value=R}function ee(R=!0){s.commit("setReaderMode",R)}return z(T),P(r,T),P(i,T),P(I,T),t({fullscreen:Y}),(R,D)=>(u(),_(e(ae),{class:qt(m.value?"fullscreen":"normal"),"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:a(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[g("article",{ref:(M,se)=>{se.element=M,c.value=M},style:{"padding-bottom":"200px"}},null,512),n(e(ve),{right:h.value?50:250,style:Bt(m.value?{"z-index":2}:{})},null,8,["right","style"])]),_:1}),n(e(we),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1,collapsed:h.value,"onUpdate:collapsed":D[2]||(D[2]=M=>h.value=M)},{default:a(()=>[n(e(N),{style:{height:"100%","background-color":"inherit"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:a(()=>[n(e(C),null,{default:a(()=>[n(e(Ht),null,{default:a(()=>[n(e(A),{title:"Full screen",onClick:D[0]||(D[0]=()=>Y(!m.value))},{icon:a(()=>[n(e(b),null,{default:a(()=>[m.value?(u(),_(e(He),{key:0})):(u(),_(e(Fe),{key:1}))]),_:1})]),_:1}),n(e(A),{title:"Reader mode",onClick:D[1]||(D[1]=()=>ee(!e(I)))},{icon:a(()=>[n(e(b),null,{default:a(()=>[e(I)?(u(),_(e(ce),{key:0})):(u(),_(e(_e),{key:1}))]),_:1})]),_:1})]),_:1}),Ft(n(vn,{element:c.value,ref:(M,se)=>{se.outline=M,f.value=M}},null,8,["element"]),[[Vt,V.value]])]),_:1})]),_:1})]),_:1},8,["collapsed"])]),_:1},8,["class"]))}const bn={components:{Maximize:Fe,Minimize:He,EnableReaderIcon:_e,DisableReaderIcon:ce}},$n=p(y(v({},bn),{props:{value:null,baseUrl:null},setup:yn}));var kn=F($n,[["__scopeId","data-v-bb8ff67c"]]);const xn=p({props:{data:null},setup(l){return(t,r)=>(u(),_(kn,{value:l.data.content,"base-url":l.data.dataUrl},null,8,["value","base-url"]))}});const X=p({props:{css:null},setup(l){const t=l,r=document.getElementsByTagName("head")[0],s=[];function i(){for(let d of s)r.removeChild(d);s.length=0}function o(){if(i(),t.css!=null)for(let d of t.css){let c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=d,r.appendChild(c),s.push(c)}}return z(o),P(t,o),Ne(i),()=>{}}}),wn={class:"slides"},Nn={"data-markdown":"","data-separator":"^\\r?\\n===\\r?\\n$","data-separator-vertical":"^\\r?\\n---\\r?\\n$","data-separator-notes":"notes?:"},In={"data-template":""},Sn=p({props:{data:null},setup(l){const t=l,r=B(),s=$(),i=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/white.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/github.min.css"],o=["https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.2/theme/black.min.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/monokai.min.css"];return z(()=>{new Gt({plugins:[Jt,Wt,Zt,Kt,Qt,Xt],center:!1,markdown:{baseUrl:t.data.dataUrl,smartLists:!0,smartypants:!0},slideNumber:"c/t",hash:!0,embedded:!0,transitionSpeed:"fast"}).initialize()}),(d,c)=>(u(),w(j,null,[n(X,{css:e(r)=="dark"?o:i},null,8,["css"]),g("div",{class:"reveal",ref:(f,h)=>{h.element=f,s.value=f}},[g("div",wn,[g("section",Nn,[g("textarea",In,k(l.data.content),1)])])],512)],64))}}),Un=p({props:{data:null},setup(l){return B(),(t,r)=>(u(),_(Sn,{data:l.data},null,8,["data"]))}});class Cn{constructor(t){S(this,"title");S(this,"url","");S(this,"description","");S(this,"cover","");S(this,"lrc","");S(this,"author","");S(this,"renderedDescription","");this.title=t}}function he(l){let t=[],r=ge.lexer(l.content),s=0;for(;s<r.length;){let i=null;for(;i==null&&s<r.length;){let o=r[s];o.type=="heading"&&o.depth==1&&(i=o.text),s++}if(i!=null){let o=new Cn(i);for(;s<r.length;){let d=r[s];if(d.type=="heading"&&d.depth==1)break;let c=!1;if(d.type=="paragraph"){for(let f of d.tokens)if(f.type=="image"||f.type=="link"){let h=f.href,m=h;switch(Ie(m)&&(m=`${l.dataUrl}/${m}`),f.text){case"url":o.url==""&&(o.url=m,c=!0);break;case"cover":o.cover==""&&(o.cover=m,c=!0);break;case"lrc":o.lrc==""&&(o.lrc=m,c=!0);break;case"author":o.author==""&&(o.author=h,c=!0);break}}}c||(o.description+=d.raw),s++}o.renderedDescription=ge(o.description,{baseUrl:l.dataUrl,headerIds:!1,smartLists:!0,smartypants:!0}),t.push(o)}}return t}const jn=["innerHTML"];function Tn(l){const t=l;B();const r=$([]);return z(()=>{r.value=he(t.data)}),(s,i)=>(u(),w(j,null,[n(X,{css:["https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.0.0/github-markdown.min.css"]},null,8,["css"]),n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 20px;"},{default:a(()=>[n(e(C),{style:{"justify-content":"center"}},{default:a(()=>[(u(!0),w(j,null,G(r.value,(o,d)=>(u(),_(e(ne),{hoverable:"",embedded:"",title:o.title,key:d,style:{"max-width":"300px"}},{cover:a(()=>[n(e(Yt),{"object-fit":"cover",alt:o.title,src:o.url},null,8,["alt","src"])]),"header-extra":a(()=>[n(e(A),{bordered:!1,size:"large",href:o.url,tag:"a",target:"_blank"},{icon:a(()=>[n(e(b),null,{default:a(()=>[n(e(O))]),_:1})]),_:2},1032,["href"])]),default:a(()=>[g("article",{innerHTML:o.renderedDescription,class:"markdown-body",style:{"background-color":"inherit"}},null,8,jn)]),_:2},1032,["title"]))),128))]),_:1}),n(e(ve),{right:"100"})]),_:1})],64))}const Mn={components:{ExternalLink:O}},Ln=p(y(v({},Mn),{props:{data:null},setup:Tn})),zn=["src"],En=["innerHTML"];function Rn(l){const t=l;B();const r=$([]),s=$(0);function i(o){o.length!=0&&(s.value=parseInt(o[0]))}return z(()=>{r.value=he(t.data)}),(o,d)=>(u(),w(j,null,[n(X,{css:["https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.0.0/github-markdown.min.css"]},null,8,["css"]),n(e(ae),{"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:a(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"height: 100%;"},{default:a(()=>[s.value<r.value.length?(u(),w("iframe",{key:0,height:"100%",width:"100%",src:r.value[s.value].url,style:{border:"0"}},null,8,zn)):H("",!0)]),_:1}),n(e(we),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1},{default:a(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:a(()=>[n(e(Ve),{accordion:!0,"arrow-placement":"right","expanded-names":s.value.toString(),onUpdateExpandedNames:i},{default:a(()=>[(u(!0),w(j,null,G(r.value,(c,f)=>(u(),_(e(qe),{title:c.title,name:f.toString()},{"header-extra":a(()=>[n(e(A),{bordered:!1,size:"large",href:c.url,tag:"a",target:"_blank"},{icon:a(()=>[n(e(b),null,{default:a(()=>[n(e(O))]),_:1})]),_:2},1032,["href"])]),default:a(()=>[g("article",{innerHTML:c.renderedDescription,class:"markdown-body",style:{"background-color":"inherit"}},null,8,En)]),_:2},1032,["title","name"]))),256))]),_:1},8,["expanded-names"])]),_:1})]),_:1})]),_:1})],64))}const Dn={components:{ExternalLink:O}},Pn=p(y(v({},Dn),{props:{data:null},setup:Rn})),An=["srcdoc"],On=p({props:{data:null},setup(l){return(t,r)=>(u(),_(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"height: 100%;"},{default:a(()=>[g("iframe",{height:"100%",width:"100%",srcdoc:l.data.content,style:{border:"0"}},null,8,An)]),_:1}))}}),Bn=p({props:{data:null},setup(l){return(t,r)=>(u(),_(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"height: 100%;",innerHTML:l.data.content},null,8,["innerHTML"]))}}),Hn=["innerHTML"];function Fn(l){const t=l;B();const r=$(),s=$([]),i=$(0),o=$();function d(f=!1){var m,I;if(s.value.length==0)return;i.value>=s.value.length&&(i.value=s.value.length-1);let h=s.value[i.value];(m=o.value)==null||m.switchVideo({url:h.url,pic:h.cover},void 0),f&&((I=o.value)==null||I.play())}function c(f){f.length!=0&&(i.value=parseInt(f[0]),d())}return z(()=>{o.value=new ea({container:r.value,screenshot:!0,video:{url:""}}),s.value=he(t.data),d()}),Ne(()=>{o.value!=null&&o.value.destroy()}),(f,h)=>(u(),w(j,null,[n(X,{css:["https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.0.0/github-markdown.min.css"]},null,8,["css"]),n(e(ae),{"has-sider":"","sider-placement":"right",style:{height:"100%"}},{default:a(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"height: 100%;"},{default:a(()=>[g("div",{ref:(m,I)=>{I.container=m,r.value=m}},null,512)]),_:1}),n(e(we),{style:{height:"100%"},"collapse-mode":"width","collapsed-width":0,width:200,"show-trigger":"bar","default-collapsed":!0,"show-collapsed-content":!1},{default:a(()=>[n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"padding: 10px;"},{default:a(()=>[n(e(Ve),{accordion:!0,"arrow-placement":"right","expanded-names":i.value.toString(),onUpdateExpandedNames:c},{default:a(()=>[(u(!0),w(j,null,G(s.value,(m,I)=>(u(),_(e(qe),{title:m.title,name:I.toString()},{"header-extra":a(()=>[n(e(A),{bordered:!1,size:"large",href:m.url,tag:"a",target:"_blank"},{icon:a(()=>[n(e(b),null,{default:a(()=>[n(e(O))]),_:1})]),_:2},1032,["href"])]),default:a(()=>[g("article",{innerHTML:m.renderedDescription,class:"markdown-body",style:{"background-color":"inherit"}},null,8,Hn)]),_:2},1032,["title","name"]))),256))]),_:1},8,["expanded-names"])]),_:1})]),_:1})]),_:1})],64))}const Vn={components:{ExternalLink:O}},qn=p(y(v({},Vn),{props:{data:null},setup:Fn})),Gn=["innerHTML"];function Jn(l){const t=l;B();const r=$(),s=$([]),i=$(0),o=L(()=>{if(i.value<s.value.length)return s.value[i.value]}),d=$();return z(()=>{s.value=he(t.data);let c=[];for(let f of s.value)c.push({name:f.title,url:f.url,lrc:f.lrc,cover:f.cover,artist:f.author});d.value=new ta({container:r.value,audio:c,lrcType:3}),d.value.on("listswitch",f=>{i.value=f.index})}),Ne(()=>{d.value!=null&&d.value.destroy()}),(c,f)=>(u(),w(j,null,[n(X,{css:["https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.0.0/github-markdown.min.css"]},null,8,["css"]),n(X,{css:["https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css"]},null,8,["css"]),n(e(N),{style:{height:"100%"},"native-scrollbar":!1,"content-style":"height: 100%;"},{default:a(()=>[n(e(C),{vertical:"",style:{padding:"10px"}},{default:a(()=>[g("div",{ref:(h,m)=>{m.container=h,r.value=h}},null,512),e(o)?(u(),_(e(aa),{key:0,style:{padding:"10px"}},{avatar:a(()=>[n(e(de),{size:"large",src:e(o).cover},null,8,["src"])]),header:a(()=>[x(k(e(o).title),1)]),"header-extra":a(()=>[n(e(A),{bordered:!1,size:"large",href:e(o).url,tag:"a",target:"_blank"},{icon:a(()=>[n(e(b),null,{default:a(()=>[n(e(O))]),_:1})]),_:1},8,["href"])]),default:a(()=>[g("article",{innerHTML:e(o).renderedDescription,class:"markdown-body",style:{"background-color":"inherit"}},null,8,Gn)]),_:1})):H("",!0)]),_:1})]),_:1})],64))}const Wn={components:{ExternalLink:O}},Zn=p(y(v({},Wn),{props:{data:null},setup:Jn})),Kn={key:0},et=p({props:{data:null},setup(l){return(t,r)=>l.data.metadata.schema=="empty"?(u(),w("span",Kn,"Empty data")):l.data.metadata.schema=="slides"?(u(),_(Un,{key:1,data:l.data},null,8,["data"])):l.data.metadata.schema=="video"?(u(),_(qn,{key:2,data:l.data},null,8,["data"])):l.data.metadata.schema=="audio"?(u(),_(Zn,{key:3,data:l.data},null,8,["data"])):l.data.metadata.schema=="image"?(u(),_(Ln,{key:4,data:l.data},null,8,["data"])):l.data.metadata.schema=="link"?(u(),_(Pn,{key:5,data:l.data},null,8,["data"])):l.data.metadata.schema=="html"?(u(),_(On,{key:6,data:l.data},null,8,["data"])):l.data.metadata.schema=="raw"?(u(),_(Bn,{key:7,data:l.data},null,8,["data"])):(u(),_(xn,{key:8,data:l.data},null,8,["data"]))}});const Qn=p({props:{id:null,noteId:null},setup(l){const t=l,r=E(),s=$();async function i(){s.value=await r.state.api.materials.notes(t.id).get(t.noteId)}return z(i),P(t,i),(o,d)=>s.value?(u(),_(e(ne),{key:0,hoverable:""},{header:a(()=>[n(e(K),{to:`/${t.id}/${s.value.id}`},{default:a(()=>[x(k(s.value.metadata.name),1)]),_:1},8,["to"])]),action:a(()=>[n(pe,{data:s.value},null,8,["data"])]),default:a(()=>[s.value.content.length>0?(u(),_(e(De),{key:0,tooltip:!1,"line-clamp":5},{default:a(()=>[x(k(e(We)(s.value.content)),1)]),_:1})):H("",!0)]),_:1})):H("",!0)}});var Xn=F(Qn,[["__scopeId","data-v-b020cbb0"]]);async function Yn(l){let t,r;const s=l,i=E(),o=([t,r]=U(()=>i.state.api.materials.notes(s.id).all()),t=await t,r(),t);return(d,c)=>(u(),_(e(N),{"content-style":"padding: 10px;","native-scrollbar":!1,style:{height:"100%"}},{default:a(()=>[n(Qe,{items:e(o)},{default:a(f=>[n(Xn,{id:l.id,noteId:f.item},null,8,["id","noteId"])]),_:1},8,["items"])]),_:1}))}const el={components:{NotesIcon:Ge}},tl=p(y(v({},el),{props:{id:null},setup:Yn}));async function al(l){let t,r;const s=oe(),i=re(),o=E(),d=s.params,c=([t,r]=U(()=>o.state.api.materials.get(d.id)),t=await t,r(),t);return document.title=`${c.metadata.name} - ${[t,r]=U(()=>o.state.api.title()),t=await t,r(),t}`,(f,h)=>(u(),_(Se,null,{header:a(()=>[n(e(ke),{onBack:h[0]||(h[0]=()=>e(i).back())},{title:a(()=>[x(k(e(c).metadata.name),1)]),header:a(()=>[n(e($e),null,{default:a(()=>[n(Ue),n(Ye,{id:e(c).id},null,8,["id"])]),_:1})]),avatar:a(()=>[n(e(de),null,{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(le))]),_:1})]),_:1})]),extra:a(()=>[n(Xe,{data:e(c)},null,8,["data"])]),footer:a(()=>[n(pe,{data:e(c)},null,8,["data"])]),_:1})]),default:a(()=>[n(e(Oe),{type:"segment",style:{height:"100%"}},{default:a(()=>[n(e(fe),{name:"description",tab:"Description",style:{height:"calc(100% - 52px)"}},{default:a(()=>[(u(),_(W,null,{default:a(()=>[n(et,{data:e(c)},null,8,["data"])]),fallback:a(()=>[n(e(be),{text:"",repeat:10})]),_:1}))]),_:1}),n(e(fe),{name:"notes",tab:"Notes",style:{height:"calc(100% - 52px)"}},{default:a(()=>[n(e(N),{"content-style":"padding: 10px;",style:{height:"100%"},"native-scrollbar":!1},{default:a(()=>[n(tl,{id:e(d).id},null,8,["id"])]),_:1})]),_:1})]),_:1})]),_:1}))}const nl={components:{MaterialIcon:le,NotesIcon:Ge}},ll=p(y(v({},nl),{setup:al}));var sl=F(ll,[["__scopeId","data-v-3c9989fa"]]);function rl(l){return(t,r)=>(u(),_(e(ye),null,{default:a(()=>[n(e(K),{to:`/${l.id}/${l.noteId}`},{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(Q))]),_:1}),x(" "+k(l.noteId),1)]),_:1},8,["to"])]),_:1}))}const ol={components:{NoteIcon:Q}},il=p(y(v({},ol),{props:{id:null,noteId:null},setup:rl}));async function ul(l){let t,r;const s=oe(),i=re(),o=E(),d=s.params,c=([t,r]=U(()=>o.state.api.materials.notes(d.id).get(d.noteId)),t=await t,r(),t),f=([t,r]=U(()=>o.state.api.materials.get(d.id)),t=await t,r(),t);return document.title=`${c.metadata.name} - ${f.metadata.name} - ${[t,r]=U(()=>o.state.api.title()),t=await t,r(),t}`,(h,m)=>(u(),_(Se,null,{header:a(()=>[n(e(ke),{onBack:m[0]||(m[0]=()=>e(i).back())},{title:a(()=>[x(k(e(c).metadata.name),1)]),header:a(()=>[n(e($e),null,{default:a(()=>[n(Ue),n(Ye,{id:e(d).id},null,8,["id"]),n(il,{id:e(d).id,"note-id":e(c).id},null,8,["id","note-id"])]),_:1})]),avatar:a(()=>[n(e(de),null,{default:a(()=>[n(e(b),null,{default:a(()=>[n(e(Q))]),_:1})]),_:1})]),extra:a(()=>[n(Xe,{data:e(c)},null,8,["data"])]),footer:a(()=>[n(pe,{data:e(c)},null,8,["data"])]),_:1})]),default:a(()=>[n(e(N),{style:{height:"100%"}},{default:a(()=>[(u(),_(W,null,{default:a(()=>[n(et,{data:e(c)},null,8,["data"])]),fallback:a(()=>[n(e(be),{text:"",repeat:10})]),_:1}))]),_:1})]),_:1}))}const dl={components:{NoteIcon:Q}},cl=p(y(v({},dl),{setup:ul}));var _l=F(cl,[["__scopeId","data-v-64d5363f"]]);const fl=[{path:"/",component:ln,meta:{title:"Home - Paperead"}},{path:"/:id",component:sl,meta:{title:"Loading... - Paperead"}},{path:"/:id/:noteId",component:_l,meta:{title:"Loading... - Loading... - Paperead"}},{path:"/:path*",component:dn,meta:{title:"Not found - Paperead"}}],tt=na({history:la(),routes:fl});tt.beforeEach((l,t)=>(l.path==t.path||(document.title=l.meta.title.toString()),!0));const at=sa(ma);at.use(tt).use(fa,Ke);at.mount("#app");
